{"version":3,"sources":["components/utils/logo.png","components/context/csv-context.js","components/utils/SideDrawer.js","components/utils/Header.js","components/utils/Dashboard.js","components/ml/utils.js","components/utils/CsvReader.js","components/utils/CsvTable.js","components/utils/Overview.js","ML/utils.js","ML/linreg.js","components/ml/LinearRegression.js","components/decisiontree/utils.js","components/decisiontree/DecisionTree.js","components/clustering/HC/hc-hook.js","components/clustering/HC/HierarchicalClustering.js","components/clustering/kmeans/Kmeans.js","App.js","index.js"],"names":["module","exports","csvContext","createContext","csv","fetchCsv","useStyles","makeStyles","theme","root","display","button","margin","spacing","drawer","breakpoints","up","width","flexShrink","toolbar","mixins","drawerPaper","paddingTop","SideDrawer","props","history","useHistory","classes","useTheme","pushLink","link","push","handleDrawerToggle","ListItem","Typography","style","fontSize","fontWeight","color","Divider","List","onClick","ListItemText","primary","ListSubheader","component","className","aria-label","Hidden","lgUp","Drawer","container","variant","anchor","direction","open","mobileOpen","onClose","paper","ModalProps","keepMounted","mdDown","appBar","zIndex","menuButton","marginRight","content","flexGrow","title","Header","useState","setMobileOpen","CssBaseline","AppBar","position","Toolbar","IconButton","edge","src","logo","height","alt","marginTop","children","Dashboard","ReadCSV","url","delimiter","tfcore","tfdata","hasHeader","SetDifference","a","b","filter","x","includes","RemoveNode","node","nodeV","document","getElementById","remove","Zip","map","e","i","DrawChart","surface","y","preds","series_names","series","length","data","values","tfvis","scatterplot","CsvReader","useContext","onDrop","accepted","rejected","links","preview","Paper","padding","accept","multiple","CsvTable","columns","setColumns","setData","useEffect","columnNames","toArray","Fetch","options","filterType","responsive","textAlign","Overview","Grid","item","md","xs","NormalizeValRaw","max","min","value","tf","std","sub","div","NormalizeVar","val","pred","ScaleBackValRaw","mul","add","ScaleBackValWithTensor","ScaleBackVal","InputDimSize","tensor","shape","RootMeanSquareError","yTrue","yPred","meanSquaredError","DisposeValue","dispose","DisposeValues","vals","ConvertCSVToRawArrays","labelCol","allCols","normalize","SplitIntoInputAndLabel","xT","yT","array","ExtractInformation","raw","colName","x_raw","y_raw","kv","Number","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","Math","CreateModel","outs","inputs","l1","l2","learningRate","regularizer","l1l2","model","dense","units","inputShape","kernelRegularizer","compile","loss","optimizer","sgd","metrics","Fit","xTrain","yTrain","OnEpochEndCallBack","_","epochs","batchSize","validationSplit","TensorDimSize","logs","fit","shuffle","callbacks","onEpochEnd","epoch","log","rms_loss","val_rms_loss","val_loss","Predict","args","predict","PredictWithScaling","predT","scaledT","console","prediction","PredictDataset","preds_list","preds_raw","Promise","all","predsT","x_valsT","x_vals","y_valsT","y_vals","flexDirection","alignItems","formControl","selectEmpty","form","marginLeft","submit","lossContainer","name","tab","GetDataFromCSV","rowIdx","predCol","Utils","Object","keys","key","join","PredictValues","valuesT","valuesNormT","valuesNorm","LinearRegressionApply","Perform","summary","modelSummary","LinearRegression","error","setError","setColumnNames","ycolumn","setYcolumn","predInput","setPredInput","setPrediction","performPred","setPerformedPred","LoadColumnNames","Alert","severity","enableReinitialize","initialValues","xColumns","selectedColumn","validate","errors","onSubmit","setSubmitting","xCols","Set","submitFormHandler","touched","handleChange","handleBlur","handleSubmit","isSubmitting","setFieldValue","backgroundColor","column","index","FormControlLabel","control","Checkbox","checked","onChange","event","target","newArray","col","label","TextField","id","select","fullWidth","MenuItem","FormHelperText","type","onBlur","Button","disabled","String","split","dt","DecisionTree","builder","this","buildDecisionTree","trainingSet","minItemsCount","categoryAttr","entropyThrehold","maxTreeDepth","ignoredAttributes","category","mostFrequentValue","initialEntropy","entropy","alreadyChecked","bestSplit","gain","attr","pivot","predicateName","attrPredPivot","predicate","predicates","currSplit","matchEntropy","match","notMatchEntropy","notMatch","newEntropy","currGain","attribute","matchSubTree","notMatchSubTree","matchedCount","notMatchedCount","arrayToHashSet","RandomForest","treesNumber","trees","items","trainingSets","t","forest","tree","buildRandomForest","hashSet","countUniqueValues","counter","p","mostFrequentCount","prototype","result","predictRandomForest","minWidth","descDiv","background","borderDiv","marginBottom","borderBottom","dTree","setDTree","config","setConfig","details","predictionForm","setPredictionForm","dT","current","innerHTML","cols","slice","lastItem","reqCols","n","forEach","useRef","ignoreColumn","changeDetails","treeToHtml","Fragment","FormControl","Select","displayEmpty","inputProps","decisionTree","err","noValidate","autoComplete","startIcon","decisionTreePrediction","ref","window","scrollTo","offsetTop","gutterBottom","figue","euclidianDistance","vec1","vec2","N","d","pow","sqrt","manhattanDistance","abs","maxDistance","addVectors","vec","Array","multiplyVectorByValue","v","repeatChar","c","str","calculateCentroid","c1Size","c1Centroid","c2Size","c2Centroid","newCentroid","newSize","centerString","diff","halfdiff","floor","putString","getRandomVectors","k","vectors","vector","selected_vectors","selected_indices","tested_indices","tested","selected","random_index","random","compare","Matrix","rows","mtx","row","j","Node","left","right","dist","centroid","size","depth","SINGLE_LINKAGE","COMPLETE_LINKAGE","AVERAGE_LINKAGE","EUCLIDIAN_DISTANCE","MANHATTAN_DISTANCE","MAX_DISTANCE","PRINT_VECTOR_VALUE_PRECISION","KMEANS_MAX_ITERATIONS","FCMEANS_MAX_ITERATIONS","generateDendogram","sep","balanced","withLabel","withCentroid","withDistance","lines","centroidstr","precision","round","prettyVector","isLeaf","labelstr","len","distancestr","prettyValue","left_dendo","right_dendo","left_bar_ix","indexOf","right_bar_ix","bar_ix","hline","shortest","longest","header","toadd","splice","agglomerate","labels","distance","linkage","c1","c2","c1Cluster","c2Cluster","dMin","cSize","distMatrix","clusters","Infinity","newCluster","avg","kmeans","assignments","clusterSizes","repeat","nb_iters","centroids","mindist","MAX_VALUE","best","newCentroids","cluster","fcmeans","epsilon","fuzziness","l","tmp","norm","membershipMatrix","previousMembershipMatrix","copy","toString","duplicate","buildDendogram","HierarchicalClustering","setLabel","dendoGram","space","params","param","train","text","innerText","FormLabel","RadioGroup","parseInt","Radio","kmeansFunction","selectedCols","Kmeans","createMuiTheme","customTheme","App","setCsv","useCallback","routes","path","exact","to","ThemeProvider","Provider","ReactDOM","render"],"mappings":"wvBAAAA,EAAOC,QAAU,kgN,gYCEJC,EAAaC,wBAAc,CACpCC,IAAK,KACLC,SAAU,SAACD,O,kHCYTE,EAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJC,QAAS,QAEXC,OAAQ,CACNC,OAAQJ,EAAMK,QAAQ,IAExBC,OAAO,eACJN,EAAMO,YAAYC,GAAG,MAAQ,CAC5BC,MAXc,IAYdC,WAAY,IAGhBC,QAASX,EAAMY,OAAOD,QACtBE,YAAY,aACVJ,MAjBgB,KAkBfT,EAAMO,YAAYC,GAAG,MAAQ,CAC5BM,WAAY,aA2HHC,EAtHI,SAAAC,GACf,IAAIC,EAAUC,cACRC,EAAUrB,IACVE,EAAQoB,cAERC,EAAW,SAAAC,GACfL,EAAQM,KAAKD,GACbN,EAAMQ,sBAGFlB,EACF,6BACI,kBAACmB,EAAA,EAAD,CAAUN,QAAS,CAAClB,KAAMkB,EAAQlB,MAAOE,QAAM,GAC3C,kBAACuB,EAAA,EAAD,CAAYC,MAAO,CAAEC,SAAU,OAAQC,WAAY,MAAOC,MAAO,UAAjE,eAIN,kBAACC,EAAA,EAAD,MACA,kBAACC,EAAA,EAAD,KACE,kBAACP,EAAA,EAAD,CAAUtB,QAAM,EAAC8B,QAAS,WAAOZ,EAAS,OACtC,kBAACa,EAAA,EAAD,CAAcC,QAAQ,eAExB,kBAACV,EAAA,EAAD,CAAUtB,QAAM,EAAC8B,QAAS,WAAOZ,EAAS,eACxC,kBAACa,EAAA,EAAD,CAAcC,QAAQ,eAG5B,kBAACJ,EAAA,EAAD,MACA,kBAACC,EAAA,EAAD,KACA,kBAACI,EAAA,EAAD,CAAeC,UAAU,OAAzB,cAGA,kBAACZ,EAAA,EAAD,CAAUtB,QAAM,EAAC8B,QAAS,WAAOZ,EAAS,aACpC,kBAACa,EAAA,EAAD,CAAcC,QAAQ,uBAExB,kBAACV,EAAA,EAAD,CAAUtB,QAAM,GACd,kBAAC+B,EAAA,EAAD,CAAcC,QAAQ,0BAG5B,kBAACJ,EAAA,EAAD,MACA,kBAACC,EAAA,EAAD,KACA,kBAACI,EAAA,EAAD,CAAeC,UAAU,OAAzB,kBAGI,kBAACZ,EAAA,EAAD,CAAUtB,QAAM,EAAC8B,QAAS,WAAOZ,EAAS,oBACxC,kBAACa,EAAA,EAAD,CAAcC,QAAQ,mBAExB,kBAACV,EAAA,EAAD,CAAUtB,QAAM,EAAC8B,QAAS,WAAOZ,EAAS,aACxC,kBAACa,EAAA,EAAD,CAAcC,QAAQ,SAExB,kBAACV,EAAA,EAAD,CAAUtB,QAAM,EAAC8B,QAAS,WAAOZ,EAAS,aACxC,kBAACa,EAAA,EAAD,CAAcC,QAAQ,YAExB,kBAACV,EAAA,EAAD,CAAUtB,QAAM,GACd,kBAAC+B,EAAA,EAAD,CAAcC,QAAQ,SAExB,kBAACV,EAAA,EAAD,CAAUtB,QAAM,GACd,kBAAC+B,EAAA,EAAD,CAAcC,QAAQ,qBAG5B,kBAACJ,EAAA,EAAD,MACA,kBAACA,EAAA,EAAD,MACA,kBAACC,EAAA,EAAD,KACA,kBAACI,EAAA,EAAD,CAAeC,UAAU,OAAzB,cAGI,kBAACZ,EAAA,EAAD,CAAUtB,QAAM,EAAC8B,QAAS,WAAOZ,EAAS,aACxC,kBAACa,EAAA,EAAD,CAAcC,QAAQ,YAExB,kBAACV,EAAA,EAAD,CAAUtB,QAAM,EAAC8B,QAAS,WAAOZ,EAAS,eACxC,kBAACa,EAAA,EAAD,CAAcC,QAAQ,8BAG5B,kBAACJ,EAAA,EAAD,MACA,kBAACC,EAAA,EAAD,KACA,kBAACI,EAAA,EAAD,CAAeC,UAAU,OAAzB,mBAGE,kBAACZ,EAAA,EAAD,CAAUtB,QAAM,EAAC8B,QAAS,WAAOZ,EAAS,WACtC,kBAACa,EAAA,EAAD,CAAcC,QAAQ,WAMlC,OACE,yBAAKG,UAAWnB,EAAQb,OAAQiC,aAAW,mBACzC,kBAACC,EAAA,EAAD,CAAQC,MAAI,GACV,kBAACC,EAAA,EAAD,CACEC,UAAW3B,EAAM2B,UACjBC,QAAQ,YACRC,OAA4B,QAApB7C,EAAM8C,UAAsB,QAAU,OAC9CC,KAAM/B,EAAMgC,WACZC,QAASjC,EAAMQ,mBACfL,QAAS,CACP+B,MAAO/B,EAAQN,aAEjBsC,WAAY,CACVC,aAAa,IAGd9C,IAGL,kBAACkC,EAAA,EAAD,CAAQa,QAAM,GACZ,kBAACX,EAAA,EAAD,CACEvB,QAAS,CACP+B,MAAO/B,EAAQN,aAEjB+B,QAAQ,YACRG,MAAI,GAEHzC,M,sDCxIPR,EAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJC,QAAS,QAEXoD,OAAQ,CACNC,OAAQvD,EAAMuD,OAAOjD,OAAS,GAEhCkD,WAAW,aACTC,YAAazD,EAAMK,QAAQ,IAC1BL,EAAMO,YAAYC,GAAG,MAAQ,CAC5BN,QAAS,SAGbwD,QAAS,CACPC,SAAU,GAEZhD,QAASX,EAAMY,OAAOD,QACpBiD,MAAO,CACPD,SAAU,OAsDCE,EAlDA,SAAA7C,GAAU,IACf2B,EAAc3B,EAAd2B,UACFxB,EAAUrB,IACVE,EAAQoB,cAHQ,EAIc0C,oBAAS,GAJvB,mBAIfd,EAJe,KAIHe,EAJG,KAMhBvC,EAAqB,WACzBuC,GAAef,IAGjB,OACE,yBAAKV,UAAWnB,EAAQlB,MACtB,kBAAC+D,EAAA,EAAD,MACA,kBAACC,EAAA,EAAD,CAAQC,SAAS,QAAQ5B,UAAWnB,EAAQmC,QAC1C,kBAACa,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CACEtC,MAAM,UACNS,aAAW,cACX8B,KAAK,QACLpC,QAAST,EACTc,UAAWnB,EAAQqC,YAEnB,kBAAC,IAAD,OAEF,yBAAKc,IAAKC,IAAMC,OAAO,KAAK/D,MAAM,KAAKgE,IAAI,SAC3C,kBAAC/C,EAAA,EAAD,CAAYkB,QAAQ,KAAKN,UAAWnB,EAAQyC,OAA5C,oBAKF,kBAAC,EAAD,CACE5D,MAAOA,EACP2C,UAAWA,EACXnB,mBAAoBA,EACpBwB,WAAYA,EACZe,cAAeA,IAEnB,0BAAMzB,UAAWnB,EAAQuC,SACvB,yBAAK/B,MAAO,CAAE+C,UAAW,SACpB1D,EAAM2D,aChEJC,EARG,WACd,OACI,oC,6FCAD,SAASC,EAAQC,EAAKC,GACzB,OAAOC,MAAY,WAKf,OAJaC,MAAWH,EAAK,CACzBI,WAAW,EACXH,UAAWA,OAKhB,SAASI,EAAcC,EAAGC,GAC7B,OAAOD,EAAEE,QAAO,SAAAC,GAAC,OAAKF,EAAEG,SAASD,MAG9B,SAASE,EAAWC,GACvB,IAAMC,EAAQC,SAASC,eAAeH,GACzB,MAATC,GACAA,EAAMG,SAYP,SAASC,EAAIX,EAAGC,GAInB,OAHUD,EAAEY,KAAI,SAAUC,EAAGC,GACzB,MAAO,CAACD,EAAGZ,EAAEa,OAId,SAAeC,EAAtB,yC,8CAAO,WAAyBC,EAASb,EAAGc,EAAGC,GAAxC,uBAAAlB,EAAA,sDAGH,IAFMmB,EAAe,GACfC,EAAS,GAFZ,WAGMN,GACLK,EAAahF,KAAK,KAAO2E,EAAI,MAC7BM,EAAOjF,KAAKwE,EAAIR,EAAGc,GAAGL,KAAI,YAAa,IAAD,mBAAVT,EAAU,KAAPc,EAAO,KAAE,MAAO,CAAEd,EAAGA,EAAEW,GAAIG,SAC1DE,EAAahF,KAAK,KAAO2E,EAAI,SAC7BM,EAAOjF,KAAKwE,EAAIR,EAAGe,GAAON,KAAI,YAAa,IAAD,mBAAVT,EAAU,KAAPc,EAAO,KAAE,MAAO,CAAEd,EAAGA,EAAEW,GAAIG,UAJzDH,EAAI,EAAGA,EAAIX,EAAE,GAAGkB,SAAUP,EAAI,EAA9BA,GAHN,OASGQ,EAAO,CAAEC,OAAQH,EAAQA,OAAQD,GATpC,SAUGK,SAAaC,YAAYT,EAASM,GAVrC,4C,sBChCP,IAyBeI,GAzBG,WAAO,IACbjH,EAAakH,qBAAWrH,GAAxBG,SADY,EAGciE,mBAAS,KAHvB,mBAGbiB,EAHa,KAIdiC,GAJc,KAIR,uCAAG,WAAOC,EAAUC,EAAUC,GAA3B,iBAAA/B,EAAA,sDACP6B,GAAYA,EAASR,OAAS,IACxB3B,EAAMmC,EAAS,GAAGG,QAClBV,EAAO7B,EAAQC,EAAKC,GAC1BlF,EAAS6G,IAJF,2CAAH,2DAQZ,OACI,kBAACW,EAAA,EAAD,CAAO1F,MAAO,CAAEvB,OAAQ,OAAQkH,QAAS,SACrC,kBAAC,IAAD,CAAehF,UAAU,WAAWiF,OAAO,OAAOC,UAAU,EAAOR,OAAQA,GACvE,yBAAK1E,UAAU,mBACX,yBAAKX,MAAO,CAAEzB,QAAS,UACnB,iE,qBCsBTuH,GAzCE,WAAO,IACZ7H,EAAQmH,qBAAWrH,GAAnBE,IADW,EAEWkE,mBAAS,IAFpB,mBAEZ4D,EAFY,KAEHC,EAFG,OAGK7D,mBAAS,IAHd,mBAGZ4C,EAHY,KAGNkB,EAHM,KAKnBC,qBAAW,WACP,GAAIjI,EAAK,6CACL,sBAAAwF,EAAA,kEACIuC,EADJ,SACqB/H,EAAIkI,cADzB,8CAEIF,EAFJ,SAEkBhI,EAAImI,UAFtB,+EADK,uBAAC,WAAD,wBAKLC,MAEL,CAACpI,IAOJ,OACI,yBAAK0C,UAAU,aACV1C,EACG,kBAAC,KAAD,CACIgE,MAAO,aACP8C,KAAMA,EACNgB,QAASA,EACTO,QAZA,CACZC,WAAY,WACZC,WAAY,YAeA,yBAAKxG,MAAO,CAAEyG,UAAW,WACrB,gDCnBTC,GAbE,WACb,OACI,6BACI,kBAACC,EAAA,EAAD,CAAM3F,WAAS,GACX,kBAAC2F,EAAA,EAAD,CAAMC,MAAI,EAACC,GAAI,EAAGC,GAAI,IAClB,kBAAC,GAAD,MACA,kBAAC,GAAD,U,+CCDb,SAASC,GAAgBC,EAAKC,EAAKC,GACtC,OAAOC,SAAQ,WACX,IAAMC,EAAMJ,EAAIK,IAAIJ,GAGpB,OAFYC,EAAMG,IAAIJ,GACCK,IAAIF,MAI5B,SAASG,GAAaC,EAAKC,GAC9B,OAAON,SAAQ,WAAQ,OAAOJ,GAAgBS,EAAIR,IAAKQ,EAAIP,IAAKQ,MAE7D,SAASC,GAAgBV,EAAKC,EAAKQ,GACtC,OAAON,SAAQ,WACX,IAAMC,EAAMJ,EAAIK,IAAIJ,GAGpB,OAFYQ,EAAKE,IAAIP,GACFQ,IAAIX,MAIxB,SAASY,GAAuBL,EAAKC,GACxC,OAAON,SAAQ,WACX,OAAOO,GAAgBF,EAAIR,IAAKQ,EAAIP,IAAKE,UAAUM,OAGpD,SAASK,GAAaN,EAAKC,GAC9B,OAAON,SAAQ,WACX,OAAOO,GAAgBF,EAAIR,IAAKQ,EAAIP,IAAKQ,MAI1C,SAASM,GAAaC,GACzB,OAAOb,SAAQ,kBAAMa,EAAOC,MAAM,MAE/B,SAASC,GAAoBC,EAAOC,GACvC,OAAOjB,SAAQ,WAIX,OAAOA,QAAQA,WAAWkB,iBAAiBF,EAAOC,OAInD,SAASE,GAAad,GACzBA,EAAIN,MAAMqB,UACVf,EAAIR,IAAIuB,UACRf,EAAIP,IAAIsB,UAEL,SAASC,KAAwB,IAAD,uBAANC,EAAM,yBAANA,EAAM,gBACnC,cAAkBA,EAAlB,gBAAK,IAAMjB,EAAG,KACVc,GAAad,IAsBd,SAAekB,GAAtB,qC,8CAAO,WAAqCzK,EAAK0K,GAA1C,2CAAAlF,EAAA,6DAAoDmF,EAApD,+BAA8D,GAAIC,EAAlE,yCACgB5K,EAAImI,UADpB,cACGrB,EADH,SAEc+D,GAAuB/D,EAAM4D,EAAUC,EAASC,GAF9D,mBAEIE,EAFJ,KAEQC,EAFR,cAIaD,EAAG7B,MAAM+B,QAJtB,cAIGrF,EAJH,iBAKaoF,EAAG9B,MAAM+B,QALtB,eAKGvE,EALH,OAOH8D,GAAcO,EAAIC,GAPf,kBAQI,CAACpF,EAAGc,IARR,6C,sBAUP,SAASwE,GAAmBC,EAAKpE,GAAyB,IAAnB8D,IAAkB,yDACrD,OAAO1B,SAAQ,WAMX,IALA,IAAMD,EAAQ,CACVA,MAAO,GACPF,IAAK,GACLC,IAAK,IAEA1C,EAAI,EAAGA,EAAIQ,EAAKD,SAAUP,EAC/B2C,EAAMA,MAAMtH,KAAK,IAErB,IAAK,IAAMwJ,KAAWD,EAAK,CACvB,IAAMnC,EAAMmC,EAAIC,GAASpC,IACnBC,EAAMkC,EAAIC,GAASnC,IACzBC,EAAMF,IAAIpH,KAAKoH,GACfE,EAAMD,IAAIrH,KAAKqH,GACf,IAAK,IAAI1C,EAAI,EAAGA,EAAI4E,EAAIC,GAASlC,MAAMpC,SAAUP,EACzCsE,IACAM,EAAIC,GAASlC,MAAM3C,IAAM4E,EAAIC,GAASlC,MAAM3C,GAAK0C,IAAQD,EAAMC,IACnEC,EAAMA,MAAM3C,GAAG3E,KAAKuJ,EAAIC,GAASlC,MAAM3C,IAM/C,OAHA2C,EAAMF,IAAMG,UAAUD,EAAMF,KAC5BE,EAAMD,IAAME,UAAUD,EAAMD,KAC5BC,EAAMA,MAAQC,UAAUD,EAAMA,OACvBA,KAQR,SAAS4B,GAAuB/D,EAAM4D,GAA2C,IAAjCC,EAAgC,uDAAtB,GAAIC,IAAkB,yDACnF,OAAO1B,SAAQ,WACX,IADiB,EACbkC,EAAQ,GACRC,EAAQ,GAFK,cAIAvE,GAJA,IAIjB,gCAAWwE,EAAX,QACI,IAAK,IAAMH,KAAWG,EAClB,GAAuB,IAAnBX,EAAQ9D,QAAiB8D,EAAQ/E,SAASuF,GAA9C,CAGA,IAAMlC,EAAQqC,EAAGH,GACbT,EAAS9E,SAASuF,IACI,MAAlBE,EAAMF,KACNE,EAAMF,GAAW,CAAElC,MAAO,GAAID,IAAKuC,OAAOC,iBAAkBzC,IAAKwC,OAAOE,mBAC5EJ,EAAMF,GAASpC,IAAM2C,KAAK3C,IAAIsC,EAAMF,GAASpC,IAAKE,GAClDoC,EAAMF,GAASnC,IAAM0C,KAAK1C,IAAIqC,EAAMF,GAASnC,IAAKC,GAClDoC,EAAMF,GAASlC,MAAMtH,KAAKsH,KAEJ,MAAlBmC,EAAMD,KACNC,EAAMD,GAAW,CAAElC,MAAO,GAAID,IAAKuC,OAAOC,iBAAkBzC,IAAKwC,OAAOE,mBAC5EL,EAAMD,GAASlC,MAAMtH,KAAKsH,GAC1BmC,EAAMD,GAASpC,IAAM2C,KAAK3C,IAAIqC,EAAMD,GAASpC,IAAKE,GAClDmC,EAAMD,GAASnC,IAAM0C,KAAK1C,IAAIoC,EAAMD,GAASnC,IAAKC,MArB7C,8BA0BjB,MAAO,CAFGgC,GAAmBG,EAAOtE,EAAM8D,GAChCK,GAAmBI,EAAOvE,EAAM8D,OClJ3C,SAASe,GAAYC,EAAMC,EAAQC,EAAIC,EAAIC,GAC9C,OAAO9C,SAAQ,WACX,IAAM+C,EAAc/C,gBAAgBgD,KAAK,CACrCJ,GAAIA,EACJC,GAAIA,IAEFI,EAAQjD,gBAad,OAZAiD,EAAMxC,IACFT,UAAUkD,MAAM,CACZC,MAAOT,EACPU,WAAY,CAACT,GACbU,kBAAmBN,KAG3BE,EAAMK,QAAQ,CACVC,KAAMxC,GACNyC,UAAWxD,SAASyD,IAAIX,GACxBY,QAAS,CAAC3C,MAEPkC,KAGR,SAAeU,GAAtB,qC,8CAAO,WACHC,EAAQC,GADL,2CAAAvH,EAAA,6DAEHwH,EAFG,8DAAAxH,EAAA,MAEkB,WAAOyH,GAAP,SAAAzH,EAAA,0FAFlB,sDAGHsG,EAHG,+BAGE,EAAKC,EAHP,+BAGY,EACfmB,EAJG,+BAIM,IAAKC,EAJX,+BAIuB,GAAIC,EAJ3B,+BAI6C,GAChDpB,EALG,+BAKY,IAETG,EAAQR,GAAY0B,GAAcN,GAASM,GAAcP,GAAShB,EAAIC,EAAIC,GAC1EsB,EAAO,GARV,UAUGnB,EAAMoB,IAAIT,EAAQC,EAAQ,CAC5BI,UAAWA,EACXD,OAAQA,EACRM,SAAS,EACTJ,gBAAkBA,EAAkB,IACpCK,UAAW,CACPC,WAAW,WAAD,4BAAE,WAAOC,EAAOC,GAAd,SAAApI,EAAA,6DACR8H,EAAK3L,KAAK,CACNkM,SAAUD,EAAInB,KACdqB,aAAcF,EAAIG,SAClBJ,MAAOA,IAJH,SAOFX,EAAmBM,GAPjB,2CAAF,qDAAC,MAhBhB,iCA2BInB,GA3BJ,6C,sBA8BA,SAAS6B,GAAQ7B,EAAOlD,GAA0B,IAAnBgF,EAAkB,uDAAX,aACzC,OAAO/E,SAAQ,WACX,OAAOiD,EAAM+B,QAAQhF,UAAU,CAACD,IAASgF,MAQ1C,SAAeE,GAAtB,uC,8CAAO,WAAkChC,EAAOxG,EAAGc,GAA5C,mBAAAjB,EAAA,6DACG4I,EAAQJ,GAAQ7B,EAAOxG,GACvB0I,EAAUxE,GAAapD,EAAG2H,GAF7B,KAGHE,QAHG,SAGeF,EAAMpD,QAHrB,mCAGoCqD,EAAQrD,QAH5C,+BAGK4C,IAHL,qBAIHQ,EAAM9D,UAJH,UAKuB+D,EAAQrD,QAL/B,eAKGuD,EALH,OAKwC,GAC3CF,EAAQ/D,UANL,kBAOIiE,GAPJ,6C,sBASA,SAAeC,GAAtB,uC,8CAAO,WAA8BrC,EAAOxG,EAAGc,GAAxC,yCAAAjB,EAAA,6DACCiJ,EAAa,GADd,kBAEqB9I,EAAEsD,MAAM+B,QAF7B,wCAEH,2BAAWzB,EAA8B,QAC/BC,EAAOwE,GAAQ7B,EAAO5C,GAC5BkF,EAAW9M,KAAK6H,GAJjB,qCAMCkF,EAAYD,EAAWrI,KAAI,SAAAoD,GAAI,OAAIA,EAAKwB,WANzC,UAOe2D,QAAQC,IAAIF,GAP3B,QAUH,IAFAA,GADAA,EAPG,QAQmBtI,KAAI,SAAAoD,GAAI,OAAIA,EAAK,MAEvC,MAA2BiF,EAA3B,oBACiBnE,UAXd,OAYGuE,EAASjF,GAAuBnD,EAAGiI,GAZtC,UAaiBG,EAAO7D,QAbxB,eAaGtE,EAbH,OAeGoI,EAAUjF,GAAalE,EAAGA,EAAEsD,OAf/B,UAgBkB6F,EAAQ9D,QAhB1B,eAgBG+D,EAhBH,OAkBGC,EAAUnF,GAAapD,EAAGA,EAAEwC,OAlB/B,UAmBkB+F,EAAQhE,QAnB1B,eAmBGiE,EAnBH,OAqBHJ,EAAOvE,UACPwE,EAAQxE,UACR0E,EAAQ1E,UACRgE,QAAQV,IAAIlH,EAAOqI,EAAQE,GAxBxB,kBAyBI,CAACvI,EAAOqI,EAAQE,IAzBpB,6C,4ECrDD/O,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACnCkD,MAAO,CACH9C,OAAQJ,EAAMK,QAAQ,EAAG,GACzBH,QAAS,OACT4O,cAAe,SACfC,WAAY,UAEhBC,YAAa,CACT5O,OAAQJ,EAAMK,QAAQ,GACtBI,MAAO,OAEXwO,YAAa,CACTvK,UAAW1E,EAAMK,QAAQ,IAE7B6O,KAAM,CACFzO,MAAO,MACPiE,UAAW1E,EAAMK,QAAQ,GACzB8O,WAAY,QAEhBC,OAAQ,CACJ3O,MAAO,aAIXsL,GAAQ,KACN3B,GAAO,CAAE7E,EAAG,KAAMc,EAAG,MACrBgJ,GAAgB,CAAEC,KAAM,YAAaC,IAAK,Q,SAgBjCC,G,uFAAf,WAA8B5P,EAAK6P,EAAQ/H,EAASgI,GAApD,mBAAAtK,EAAA,sEACwBxF,EAAImI,UAD5B,mBACuC0H,EAA7B/I,EADV,aAEUoB,EAAc6H,EAAoBjI,EAAS,CAACgI,IAClDxB,QAAQV,IAAI1F,EAAa4H,GACnB/I,EAASiJ,OAAOC,KAAKnJ,GAAMpB,QAAO,SAAAwK,GAAG,OAAIhI,EAAYtC,SAASsK,MAAM9J,KAAI,SAAAmD,GAAG,OAAIzC,EAAKyC,MAJ9F,kBAKWxC,EAAOoJ,KAAK,MALvB,4C,+BAQeC,G,iFAAf,WAA6BrJ,GAA7B,qBAAAvB,EAAA,6DACU6K,EAAUnH,KAAUnC,GACpBuJ,EAAchH,GAAakB,GAAK7E,EAAG0K,GACzCA,EAAQ/F,UAHZ,SAI6BgG,EAAYtF,QAJzC,cAIUuF,EAJV,OAKID,EAAYhG,UALhB,SAMuBkG,GAAyCrE,GAAOoE,EAAY/F,GAAK/D,GANxF,cAMU+C,EANV,OAOI8E,QAAQV,IAAIpE,GAPhB,kBAQWA,GARX,6C,+BAWeiH,G,iGAAf,WAAuBzQ,EAAK0K,EAAUxC,EAAa4D,EAAIC,EAAImB,EAAQC,EAAWC,EAAiBpB,GAA/F,iCAAAxG,EAAA,6DACkB,MAAVgF,GAAK7E,GAAuB,MAAV6E,GAAK/D,GAAsB,MAAT0F,KACpC5B,GAAcC,GAAK7E,EAAG6E,GAAK/D,GAC3B6H,QAAQV,IAAI,MACZzB,GAAM7B,UACN6B,GAAQ,MALhB,SAOuBnM,EAAImI,UAP3B,cAOUrB,EAPV,OAQIwH,QAAQV,IAAIlD,GACZqF,EAAiB,wBACjB/I,UAAc7D,OAVlB,EAWmB0H,GAAuB/D,EAAM4D,EAAUxC,GAX1D,mBAWWvC,EAXX,KAWcc,EAXd,eAYkB+J,GAA0B7K,EAAEsD,MAAOxC,EAAEwC,MAArC,uCAA4C,WAAOqE,GAAP,SAAA9H,EAAA,sEAChDwB,OAAW3F,QAAQoO,GAAenC,EAAM,CAAC,WAAY,iBADL,2CAA5C,sDAEXxB,EAAIC,EAAImB,EAAQC,EAAWC,EAAiBpB,GAdnD,eAYIG,GAZJ,QAeUuE,UAfV,UAgBU1J,OAAW2J,aAAa,CAAEjB,KAAM,QAASC,IAAK,SAAWxD,IAhBnE,yBAkB0CqE,GAAqCrE,GAAOxG,EAAGc,GAlBzF,2CAkBWC,EAlBX,KAkBkBqI,EAlBlB,KAkB0BE,EAlB1B,eAmBUc,EAAgB,CAAEL,KAAM,aAAcC,IAAK,QAAUZ,EAAQE,EAAQvI,GAnB/E,QAoBI8D,GAAK7E,EAAIA,EACT6E,GAAK/D,EAAIA,EAET6H,QAAQV,IAAI,qBAAsB1E,QAvBtC,6C,sBA0Be,SAAS0H,KACpB,IAAMrP,EAAUrB,KADuB,EAEbgE,mBAAS,IAFI,mBAEhC2M,EAFgC,KAEzBC,EAFyB,KAG/B9Q,EAAQmH,qBAAWrH,GAAnBE,IAH+B,EAIDkE,mBAAS,IAJR,mBAIhCgE,EAJgC,KAInB6I,EAJmB,OAKT7M,qBALS,mBAKhC8M,EALgC,KAKvBC,EALuB,OAML/M,mBAAS,aANJ,mBAMhCgN,EANgC,KAMrBC,EANqB,OAOHjN,mBAAS,IAPN,mBAOhCqK,EAPgC,KAOpB6C,EAPoB,OAQClN,oBAAS,GARV,mBAQhCmN,EARgC,KAQnBC,EARmB,KAoBvC,OAXArJ,qBAAU,WAAM,4CAGZ,4BAAAzC,EAAA,sEAC0BxF,EAAIkI,cAD9B,OACUJ,EADV,OAEIiJ,EAAejJ,GACfmJ,EAAWnJ,EAAQA,EAAQjB,OAAS,IAHxC,4CAHY,sBACD,MAAP7G,GADQ,mCAQZuR,KACD,CAACvR,EAAK+Q,IAGL,kBAACrI,EAAA,EAAD,CAAM3F,WAAS,GACX,kBAAC2F,EAAA,EAAD,CAAMC,MAAI,EAACC,GAAI,EAAGC,GAAI,IAClB,kBAAC,GAAD,MACA,kBAAC,GAAD,OAEJ,kBAACH,EAAA,EAAD,CAAMC,MAAI,EAACC,GAAI,EAAGC,GAAI,IACjB7I,GAAOgR,EACJ,yBAAKjP,MAAO,CAAE2F,QAAS,SAClBmJ,GACG,kBAACW,GAAA,EAAD,CAAOnO,QAAS,kBAAMyN,EAAS,KAAKW,SAAS,SACxCZ,GAGT,kBAAC,KAAD,CACIa,oBAAkB,EAClBC,cAAe,CACXC,SAAU1J,EACV2J,eAAgBb,EAChBlF,GAAI,EACJC,GAAI,EACJoB,UAAW,GACXC,gBAAiB,GACjBpB,aAAc,IACdkB,OAAQ,IAEZ4E,SAAU,SAAA/K,GACN,IAAMgL,EAAS,GAsCf,OArCKhL,EAAO8K,iBACRE,EAAOF,eAAiB,YAEX,MAAb9K,EAAO+E,KACPiG,EAAOjG,GAAK,YAEZ/E,EAAO+E,GAAK,IACZiG,EAAOjG,GAAK,oBAEC,MAAb/E,EAAOgF,KACPgG,EAAOhG,GAAK,YAEZhF,EAAOgF,GAAK,IACZgG,EAAOhG,GAAK,oBAEXhF,EAAOoG,YACR4E,EAAO5E,UAAY,YAElBpG,EAAOqG,kBACR2E,EAAO3E,gBAAkB,YAEzBrG,EAAOqG,gBAAkB,IACzB2E,EAAO3E,gBAAkB,4BAExBrG,EAAOiF,eACR+F,EAAO/F,aAAe,aAEtBjF,EAAOiF,aAAe,GAAKjF,EAAOiF,aAAe,KACjD+F,EAAO/F,aAAe,yBAErBjF,EAAOmG,SACR6E,EAAO7E,OAAS,YAEhBnG,EAAOmG,OAAS,IAChB6E,EAAO7E,OAAS,4BAGb6E,GAEXC,SAAU,SAACjL,EAAD,GAAgC,IAArBkL,EAAoB,EAApBA,eACM,uCAAG,WAAMlL,GAAN,eAAAvB,EAAA,6DAClB0M,EADkB,uBACNnL,EAAO6K,UADD,CACW7K,EAAO8K,iBACxCK,EAAK,aAAO,IAAIC,IAAID,IACpB5D,QAAQV,IAAIsE,GAHU,SAKlBZ,GAAiB,GALC,SAMZb,GACFzQ,EACA,CAAC+G,EAAO8K,gBACRK,EACAnL,EAAO+E,GACP/E,EAAOgF,GACPhF,EAAOmG,OACPnG,EAAOoG,UACPpG,EAAOqG,gBACPrG,EAAOiF,cAfO,cAgBlBsF,GAAiB,GAhBC,KAiBlBH,EAjBkB,UAiBCvB,GAAe5P,EAAK,EAAGkS,EAAOlB,GAjB/B,qFAmBlB1C,QAAQuC,MAAR,MACAC,EAAS,6BACTQ,GAAiB,GArBC,0DAAH,sDAwBvBc,CAAkBrL,GAClBkL,GAAc,MAEpB,gBACElL,EADF,EACEA,OACAgL,EAFF,EAEEA,OACAM,EAHF,EAGEA,QACAC,EAJF,EAIEA,aACAC,EALF,EAKEA,WACAC,EANF,EAMEA,aACAC,EAPF,EAOEA,aACAC,EARF,EAQEA,cARF,OAUM,0BAAMhQ,UAAWnB,EAAQ+N,KAAM0C,SAAUQ,GACrC,kBAAC9J,EAAA,EAAD,CAAM3F,WAAS,EAACtC,QAAS,GACrB,kBAACiI,EAAA,EAAD,CAAMC,MAAI,EAACE,GAAI,IACX,kBAACpB,EAAA,EAAD,CAAO1F,MAAO,CAAE4Q,gBAAiB,QAASjL,QAAS,SAAnD,gDAGA,kBAACgB,EAAA,EAAD,CAAM3F,WAAS,EAACtC,QAAS,GACpByH,EAAY9B,KAAI,SAACwM,EAAQC,GAAT,OACb,kBAACnK,EAAA,EAAD,CAAMC,MAAI,EAACE,GAAI,EAAGqH,IAAK2C,GAClBD,IAAW7L,EAAO8K,gBACf,kBAACiB,GAAA,EAAD,CACIC,QAAS,kBAACC,GAAA,EAAD,CACLC,QAASlM,EAAO6K,SAAShM,SAASgN,GAClC1Q,MAAM,UACNwN,KAAMkD,EACNM,SAAU,SAACC,GACP,IAAInI,EAAQjE,EAAO6K,SACnB,GAAI5G,EAAMpF,SAASuN,EAAMC,OAAO1D,MAAO,CACnC,IAAM2D,EAAWrI,EAAMtF,QAAO,SAAC4N,GAAD,OAASA,IAAQH,EAAMC,OAAO1D,QAC5DgD,EAAc,WAAYW,GAAU,QAEpCrI,EAAMrJ,KAAKwR,EAAMC,OAAO1D,MACxBgD,EAAc,WAAY1H,GAAO,MAI7CuI,MAAOX,UAO/B,kBAAClK,EAAA,EAAD,CAAMC,MAAI,EAACE,GAAI,IACX,kBAAC2K,GAAA,EAAD,CAAWC,GAAG,SACVF,MAAM,cAAcG,QAAM,EAC1BC,WAAS,EACT1K,MAAOlC,EAAO8K,eACdnC,KAAK,iBACLwD,SAAUZ,EACVtP,QAAQ,UAEPkF,EAAY9B,KAAI,SAACwM,EAAQC,GAAT,OACb,kBAACe,GAAA,EAAD,CAAU1D,IAAK2C,EAAO5J,MAAO2J,GAASA,OAG9C,kBAACiB,GAAA,EAAD,yBAEJ,kBAACnL,EAAA,EAAD,CAAMC,MAAI,EAACE,GAAI,GACX,kBAAC2K,GAAA,EAAD,CACIxQ,QAAQ,SACRuQ,MAAM,KACN7D,KAAK,KACLoE,KAAK,SACLZ,SAAUZ,EACVyB,OAAQxB,EACRtJ,MAAOlC,EAAO+E,KAGlB,yBAAK/J,MAAO,CAAEvB,OAAQ,OAAQ0B,MAAO,QAChC6P,EAAOjG,IAAMuG,EAAQvG,IAAMiG,EAAOjG,KAG3C,kBAACpD,EAAA,EAAD,CAAMC,MAAI,EAACE,GAAI,GACX,kBAAC2K,GAAA,EAAD,CACIxQ,QAAQ,SACRuQ,MAAM,KACN7D,KAAK,KACLoE,KAAK,SACLZ,SAAUZ,EACVyB,OAAQxB,EACRtJ,MAAOlC,EAAOgF,KAElB,yBAAKhK,MAAO,CAAEvB,OAAQ,OAAQ0B,MAAO,QAChC6P,EAAOhG,IAAMsG,EAAQtG,IAAMgG,EAAOhG,KAG3C,kBAACrD,EAAA,EAAD,CAAMC,MAAI,EAACE,GAAI,GACX,kBAAC2K,GAAA,EAAD,CACIxQ,QAAQ,SACRuQ,MAAM,aACN7D,KAAK,YACLoE,KAAK,SACLZ,SAAUZ,EACVyB,OAAQxB,EACRtJ,MAAOlC,EAAOoG,YAElB,yBAAKpL,MAAO,CAAEvB,OAAQ,OAAQ0B,MAAO,QAChC6P,EAAO5E,WAAakF,EAAQlF,WAAa4E,EAAO5E,YAGzD,kBAACzE,EAAA,EAAD,CAAMC,MAAI,EAACE,GAAI,GACX,kBAAC2K,GAAA,EAAD,CACIxQ,QAAQ,SACRuQ,MAAM,mBACN7D,KAAK,kBACLoE,KAAK,SACLZ,SAAUZ,EACVyB,OAAQxB,EACRtJ,MAAOlC,EAAOqG,kBAElB,yBAAKrL,MAAO,CAAEvB,OAAQ,OAAQ0B,MAAO,QAChC6P,EAAO3E,iBAAmBiF,EAAQjF,iBAAmB2E,EAAO3E,kBAGrE,kBAAC1E,EAAA,EAAD,CAAMC,MAAI,EAACE,GAAI,GACX,kBAAC2K,GAAA,EAAD,CACIxQ,QAAQ,SACRuQ,MAAM,gBACN7D,KAAK,eACLoE,KAAK,SACLZ,SAAUZ,EACVyB,OAAQxB,EACRtJ,MAAOlC,EAAOiF,eAElB,yBAAKjK,MAAO,CAAEvB,OAAQ,OAAQ0B,MAAO,QAChC6P,EAAO/F,cAAgBqG,EAAQrG,cAAgB+F,EAAO/F,eAG/D,kBAACtD,EAAA,EAAD,CAAMC,MAAI,EAACE,GAAI,GACX,kBAAC2K,GAAA,EAAD,CACIxQ,QAAQ,SACRuQ,MAAM,SACN7D,KAAK,SACLoE,KAAK,SACLZ,SAAUZ,EACVyB,OAAQxB,EACRtJ,MAAOlC,EAAOmG,SAElB,yBAAKnL,MAAO,CAAEvB,OAAQ,OAAQ0B,MAAO,QAChC6P,EAAO7E,QAAUmF,EAAQnF,QAAU6E,EAAO7E,UAIvD,yBAAKnL,MAAO,CAAEvB,OAAQ,OAAQgI,UAAW,WACrC,kBAACwL,GAAA,EAAD,CACIjS,MAAO,CAAElB,MAAO,QAChBiT,KAAK,SACLH,WAAS,EACT3Q,QAAQ,YACRd,MAAM,UACNQ,UAAWnB,EAAQiO,OACnByE,SAAUxB,GAPd,gBAgBZpB,GACA,oCACI,kBAACmC,GAAA,EAAD,CACIxQ,QAAQ,SACRuQ,MAAM,YACN7D,KAAK,YACLzG,MAAOiI,EACPgC,SAAU,SAACjG,GAAD,OAAOkE,EAAalE,EAAEmG,OAAOnK,UAE3C,kBAAC+K,GAAA,EAAD,CAAQ3R,QAAS,kBAAM2E,UAAc7D,SAArC,eACA,kBAAC6Q,GAAA,EAAD,CAAQ3R,QAAO,sBAAE,sBAAAmD,EAAA,6DAAc4L,EAAc,IAA5B,KAAiCA,EAAjC,SAAqDhB,GAAc8D,OAAOhD,GAAWiD,MAAM,KAAK/N,KAAI,SAAA6C,GAAK,OAAIsC,OAAOtC,OAApH,8EAAjB,YAIJoI,GAA8B,KAAf9C,GACf,kBAACiD,GAAA,EAAD,CAAOnO,QAAS,WAAQ+N,EAAc,KAAOK,SAAS,WAAtD,0BAC4BlD,IAKhC,yBAAKxM,MAAO,CAAEb,WAAY,OAAQsH,UAAW,WAA7C,6B,cCVT4L,GA3YL,WASN,SAASC,EAAaC,GAClBC,KAAKlU,KAgLT,SAASmU,EAAkBF,GAEvB,IAAIG,EAAcH,EAAQG,YACtBC,EAAgBJ,EAAQI,cACxBC,EAAeL,EAAQK,aACvBC,EAAkBN,EAAQM,gBAC1BC,EAAeP,EAAQO,aACvBC,EAAoBR,EAAQQ,kBAEhC,GAAsB,IAAjBD,GAAwBJ,EAAY5N,QAAU6N,EAI/C,MAAO,CACHK,SAAUC,EAAkBP,EAAaE,IAIjD,IAAIM,EAAiBC,EAAQT,EAAaE,GAE1C,GAAIM,GAAkBL,EAIlB,MAAO,CACHG,SAAUC,EAAkBP,EAAaE,IAYjD,IANA,IAAIQ,EAAiB,GAIjBC,EAAY,CAACC,KAAM,GAEd/O,EAAImO,EAAY5N,OAAS,EAAGP,GAAK,EAAGA,IAAK,CAC9C,IAAIqC,EAAO8L,EAAYnO,GAGvB,IAAK,IAAIgP,KAAQ3M,EACb,GAAK2M,IAASX,IAAiBG,EAAkBQ,GAAjD,CAKA,IAAIC,EAAQ5M,EAAK2M,GAIbE,OAAa,EASbC,EAAgBH,GAPhBE,EADiB,kBAAVD,EACS,KAIA,OAGuBA,EAC3C,IAAIJ,EAAeM,GAAnB,CAKAN,EAAeM,IAAiB,EAEhC,IAAIC,EAAYC,EAAWH,GAGvBI,EAAYzB,EAAMM,EAAaa,EAAMI,EAAWH,GAGhDM,EAAeX,EAAQU,EAAUE,MAAOnB,GACxCoB,EAAkBb,EAAQU,EAAUI,SAAUrB,GAG9CsB,EAAa,EACjBA,GAAcJ,EAAeD,EAAUE,MAAMjP,OAC7CoP,GAAcF,EAAkBH,EAAUI,SAASnP,OACnDoP,GAAcxB,EAAY5N,OAC1B,IAAIqP,EAAWjB,EAAiBgB,EAE5BC,EAAWd,EAAUC,QAGrBD,EAAYQ,GACFJ,cAAgBA,EAC1BJ,EAAUM,UAAYA,EACtBN,EAAUe,UAAYb,EACtBF,EAAUG,MAAQA,EAClBH,EAAUC,KAAOa,KAK7B,IAAKd,EAAUC,KAEX,MAAO,CAAEN,SAAUC,EAAkBP,EAAaE,IAKtDL,EAAQO,aAAeA,EAAe,EAEtCP,EAAQG,YAAcW,EAAUU,MAChC,IAAIM,EAAe5B,EAAkBF,GAErCA,EAAQG,YAAcW,EAAUY,SAChC,IAAIK,EAAkB7B,EAAkBF,GAExC,MAAO,CACH6B,UAAWf,EAAUe,UACrBT,UAAWN,EAAUM,UACrBF,cAAeJ,EAAUI,cACzBD,MAAOH,EAAUG,MACjBO,MAAOM,EACPJ,SAAUK,EACVC,aAAclB,EAAUU,MAAMjP,OAC9B0P,gBAAiBnB,EAAUY,SAASnP,QAxS5B2N,CAAkB,CAC1BC,YAAaH,EAAQG,YACrBK,kBAAmB0B,EAAelC,EAAQQ,mBAC1CH,aAAcL,EAAQK,cAAgB,WACtCD,cAAeJ,EAAQI,eAAiB,EACxCE,gBAAiBN,EAAQM,iBAAmB,IAC5CC,aAAcP,EAAQO,cAAgB,KAiB9C,SAAS4B,EAAanC,EAASoC,GAC3BnC,KAAKoC,MAuTT,SAA2BrC,EAASoC,GAKhC,IAJA,IAAIE,EAAQtC,EAAQG,YAGhBoC,EAAe,GACVC,EAAI,EAAGA,EAAIJ,EAAaI,IAC7BD,EAAaC,GAAK,GAEtB,IAAK,IAAIxQ,EAAIsQ,EAAM/P,OAAS,EAAGP,GAAK,EAAIA,IAAK,CAI3CuQ,EADwBvQ,EAAIoQ,GACI/U,KAAKiV,EAAMtQ,IAK7C,IADA,IAAIyQ,EAAS,GACJD,EAAI,EAAGA,EAAIJ,EAAaI,IAAK,CAClCxC,EAAQG,YAAcoC,EAAaC,GAEnC,IAAIE,EAAO,IAAI3C,EAAaC,GAC5ByC,EAAOpV,KAAKqV,GAEhB,OAAOD,EA9UME,CAAkB3C,EAASoC,GAW5C,SAASF,EAAexL,GACpB,IAAIkM,EAAU,GACd,GAAIlM,EACA,IAAI,IAAI1E,KAAK0E,EAAO,CAEhBkM,EADWlM,EAAM1E,KACD,EAGxB,OAAO4Q,EAYX,SAASC,EAAkBP,EAAOtB,GAI9B,IAHA,IAAI8B,EAAU,GAGL9Q,EAAIsQ,EAAM/P,OAAS,EAAGP,GAAK,EAAGA,IAEnC8Q,EAAQR,EAAMtQ,GAAGgP,IAAS,EAK9B,IAAK,IAAIhP,EAAIsQ,EAAM/P,OAAS,EAAGP,GAAK,EAAGA,IACnC8Q,EAAQR,EAAMtQ,GAAGgP,KAAU,EAG/B,OAAO8B,EAYX,SAASlC,EAAQ0B,EAAOtB,GAGpB,IAGI+B,EAHAD,EAAUD,EAAkBP,EAAOtB,GAEnCJ,EAAU,EAEd,IAAK,IAAI5O,KAAK8Q,EAEVlC,KADAmC,EAAID,EAAQ9Q,GAAKsQ,EAAM/P,QACP6E,KAAKkC,IAAIyJ,GAG7B,OAAOnC,EAuBX,SAASf,EAAMyC,EAAOtB,EAAMI,EAAWH,GAOnC,IANA,IAGI5M,EAHAmN,EAAQ,GACRE,EAAW,GAKN1P,EAAIsQ,EAAM/P,OAAS,EAAGP,GAAK,EAAGA,IAI/BoP,GAHJ/M,EAAOiO,EAAMtQ,IACIgP,GAEQC,GACrBO,EAAMnU,KAAKgH,GAEXqN,EAASrU,KAAKgH,GAItB,MAAO,CACHmN,MAAOA,EACPE,SAAUA,GAalB,SAAShB,EAAkB4B,EAAOtB,GAG9B,IAGIN,EAHAoC,EAAUD,EAAkBP,EAAOtB,GAEnCgC,EAAoB,EAGxB,IAAK,IAAIrO,KAASmO,EACVA,EAAQnO,GAASqO,IACjBA,EAAoBF,EAAQnO,GAC5B+L,EAAoB/L,GAI5B,OAAO+L,EA3JXX,EAAakD,UAAUrJ,QAAU,SAAUvF,GACvC,OAoSJ,SAAiBqO,EAAMrO,GACnB,IAAI2M,EACArM,EACAyM,EACAH,EAGJ,OAAY,CAER,GAAIyB,EAAKjC,SAEL,OAAOiC,EAAKjC,SAGhBO,EAAO0B,EAAKb,UACZlN,EAAQN,EAAK2M,GAEbI,EAAYsB,EAAKtB,UACjBH,EAAQyB,EAAKzB,MAITyB,EADAtB,EAAUzM,EAAOsM,GACVyB,EAAKlB,MAELkB,EAAKhB,UA5Tb9H,CAAQqG,KAAKlU,KAAMsI,IAgB9B8N,EAAac,UAAUrJ,QAAU,SAAUvF,GACvC,OAqVJ,SAA6BoO,EAAQpO,GACjC,IAAI6O,EAAS,GACb,IAAK,IAAIlR,KAAKyQ,EAAQ,CAClB,IACIxI,EADOwI,EAAOzQ,GACI4H,QAAQvF,GAC9B6O,EAAOjJ,GAAciJ,EAAOjJ,GAAciJ,EAAOjJ,GAAc,EAAI,EAEvE,OAAOiJ,EA5VAC,CAAoBlD,KAAKoC,MAAOhO,IA4I3C,IAAIgN,EAAa,CACb,MAAO,SAAUnQ,EAAGC,GAAK,OAAOD,IAAMC,GACtC,KAAM,SAAUD,EAAGC,GAAK,OAAOD,GAAKC,IAiNxC,IAAI5F,EAAU,GAGd,OAFAA,EAAQwU,aAAeA,EACvBxU,EAAQ4W,aAAeA,EAChB5W,EAxYD,G,uECsBJK,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCC,KAAM,CACF,QAAS,CACPG,OAAQJ,EAAMK,QAAQ,GACtBI,MAAO,SAGbN,OAAQ,CACJC,OAAQJ,EAAMK,QAAQ,GACtBI,MAAO,QAEXuO,YAAa,CACX5O,OAAQJ,EAAMK,QAAQ,GACtBiX,SAAU,KAEZrI,YAAa,CACXvK,UAAW1E,EAAMK,QAAQ,IAE3BkX,QAAS,CACLC,WAAY,UACZ/W,MAAO,OACP6G,QAAS,OACT1F,SAAU,QAEd6V,UAAW,CACPC,aAAc,OACdpQ,QAAS,OACTqQ,aAAc,uBAyRP1D,GArRM,WACjB,IAAM9S,EAAUrB,KACRF,EAAQmH,qBAAWrH,GAAnBE,IAFe,EAGOkE,mBAAS,IAHhB,mBAGhB4D,EAHgB,KAGPC,EAHO,OAIG7D,qBAJH,mBAIhB8T,EAJgB,KAITC,EAJS,OAKK/T,mBAAS,CACjCuQ,YAAa,KACbE,aAAc,GACdG,kBAAmB,KARA,mBAKhBoD,EALgB,KAKRC,EALQ,OAWqBjU,mBAAS,CACjD4D,QAAS,GACTsQ,QAAS,KAbU,mBAWhBC,EAXgB,KAWAC,EAXA,OAiBGpU,mBAAS,IAjBZ,mBAiBhB2M,EAjBgB,KAiBTC,EAjBS,OAkBa5M,mBAAS,IAlBtB,mBAkBhBqK,EAlBgB,KAkBJ6C,EAlBI,KAoBvBnJ,qBAAW,WACP,GAAIjI,EAAK,6CACL,kCAAAwF,EAAA,6DACIyS,EAAS,MACTM,EAAGC,QAAQC,UAAY,KAF3B,SAGqBzY,EAAIkI,cAHzB,cAGQwQ,EAHR,SAIqBA,EAAKC,OAAO,GAJjC,mBAISC,EAJT,KAKI7Q,EAAW2Q,GALf,KAMIP,EANJ,UAO2BnY,EAAImI,UAP/B,yBAQsByQ,EARtB,KAS2B,GAT3B,MAOQnE,YAPR,KAQQE,aARR,KASQG,kBATR,kEADK,uBAAC,WAAD,wBAaL1M,MAEL,CAACpI,IAEJiI,qBAAU,WACN,GAAI+P,EAAO,CACP,IAAIa,EAAU/Q,EAAQpC,QAAO,SAAAoT,GAAC,OAAKZ,EAAOpD,kBAAkBlP,SAASkT,MACrED,EAAUA,EAAQnT,QAAO,SAAAoT,GAAC,OAAIA,IAAMZ,EAAOvD,gBAC3C,IAAIyD,EAAU,GACdS,EAAQE,SAAQ,SAAAzF,GACZ8E,EAAQ9E,GAAO,MAEnBgF,EAAkB,CACdxQ,QAAS+Q,EACTT,QAASA,OAGlB,CAACtQ,EAASoQ,EAAQF,IAErB,IAAMO,EAAKS,mBAELC,EAAe,SAAC9F,GAClB,IAAInI,EAAQkN,EAAOpD,kBACnB,GAAI9J,EAAMpF,SAASuN,EAAMC,OAAO1D,MAAO,CACnC,IAAM2D,EAAWrI,EAAMtF,QAAO,SAAC4N,GAAD,OAASA,IAAQH,EAAMC,OAAO1D,QAC5DyI,EAAU,gBACHD,EADE,CAELpD,kBAAmBzB,UAGvBrI,EAAMrJ,KAAKwR,EAAMC,OAAO1D,MACxByI,EAAU,gBACHD,EADE,CAELpD,kBAAmB9J,MAYzBkO,EAAgB,SAAC/F,GACnB,IAAIiF,EAAUC,EAAeD,QAC7BA,EAAQjF,EAAMC,OAAO1D,MAAQyD,EAAMC,OAAOnK,MAC1CqP,EAAkB,gBACXD,EADU,CAEbD,QAASA,MAKXe,EAAa,SAAbA,EAAcnC,GAEhB,OAAIA,EAAKjC,SACG,CAAC,OACG,OACI,WACI,MAAOiC,EAAKjC,SAAU,OAC1B,YACJ,QACJ,SAAS5E,KAAK,IAGlB,CAAC,OACG,OACI,WACI,MAAO6G,EAAKb,UAAW,IAAKa,EAAKxB,cAAe,IAAKwB,EAAKzB,MAAO,SACrE,YACA,OACI,OACI,uBACA4D,EAAWnC,EAAKlB,OACpB,QACA,OACI,sBACAqD,EAAWnC,EAAKhB,UACpB,QACJ,QACJ,QACJ,SAAS7F,KAAK,KA4B1B,OACI,kBAACzH,EAAA,EAAD,CAAM3F,WAAS,GACX,kBAAC2F,EAAA,EAAD,CAAMC,MAAI,EAACC,GAAI,EAAGC,GAAI,IAClB,kBAAC,GAAD,MACA,kBAAC,GAAD,OAEJ,kBAACH,EAAA,EAAD,CAAMC,MAAI,EAACC,GAAI,EAAGC,GAAI,IACjB7I,EACO,yBAAK+B,MAAO,CAAE2F,QAAS,SAClBmJ,GACG,kBAACW,GAAA,EAAD,CAAOnO,QAAS,kBAAMyN,EAAS,KAAKW,SAAS,SACxCZ,GAGR/I,GACG,kBAAC,IAAMsR,SAAP,KACI,yBAAK1W,UAAWnB,EAAQsW,WACpB,kBAACpQ,EAAA,EAAD,CAAO/E,UAAWnB,EAAQoW,SAA1B,qCAGA,kBAAC0B,GAAA,EAAD,CAAa3W,UAAWnB,EAAQ6N,aAC5B,kBAACkK,GAAA,EAAD,CACIrQ,MAAOiP,EAAOvD,aACdzB,SAhGjB,SAACC,GACxBgF,EAAU,gBACHD,EADE,CAELvD,aAAcxB,EAAMC,OAAOnK,UA8FSsQ,cAAY,EACZ7W,UAAWnB,EAAQ8N,YACnBmK,WAAY,CAAE,aAAc,kBAE3B1R,EAAQ1B,KAAI,SAACwM,EAAQC,GAAT,OACT,kBAACe,GAAA,EAAD,CAAU1D,IAAK2C,EAAO5J,MAAO2J,GAASA,OAG9C,kBAACiB,GAAA,EAAD,0BAGR,yBAAKnR,UAAWnB,EAAQsW,WACpB,kBAACpQ,EAAA,EAAD,CAAO/E,UAAWnB,EAAQoW,SAA1B,mCAGC7P,EAAQ1B,KAAI,SAACwM,EAAQC,GAAT,OACT,yBAAK3C,IAAK2C,GACLD,IAAWsF,EAAOvD,cACf,kBAAC7B,GAAA,EAAD,CACIC,QAAS,kBAACC,GAAA,EAAD,CACGC,QAASiF,EAAOpD,kBAAkBlP,SAASgN,GAC3C1Q,MAAM,UACNwN,KAAMkD,EACNM,SAAU+F,IAEtB1F,MAAOX,UAUnC,yBAAK7Q,MAAO,CAAEyG,UAAW,WACrB,kBAACwL,GAAA,EAAD,CAAQhR,QAAQ,YAAYd,MAAM,UAAUG,QArFnD,WACjB,IAEI,IAAIoX,EAAe,IAAIrF,GAAGC,aAAa6D,GACvCD,EAASwB,GAETlB,EAAGC,QAAQC,UAAYU,EAAWM,EAAapZ,MACjD,MAAOqZ,GACL5I,EAAS4I,MA6EW,2BAEH1B,GACG,yBAAKjW,MAAO,CAAE+C,UAAW,OAAQ4C,QAAS,SACtC,kBAACD,EAAA,EAAD,CAAO/E,UAAWnB,EAAQoW,SAA1B,qBAGA,0BAAMjV,UAAWnB,EAAQlB,KAAMsZ,YAAU,EAACC,aAAa,OAClDvB,EAAevQ,QAAQ1B,KAAI,SAACwM,EAAQC,GAAT,OACxB,kBAACW,GAAA,EAAD,CACItD,IAAK2C,EACLU,MAAOX,EACPlD,KAAMkD,EACN3J,MAAOoP,EAAeD,QAAQxF,OAC9BM,SAAUgG,QAItB,kBAACxQ,EAAA,EAAD,CAAM3G,MAAO,CAAE+V,aAAc,QAAU/U,WAAS,EAACtC,QAAS,GACtD,kBAACiI,EAAA,EAAD,CAAMC,MAAI,EAACE,GAAI,GACX,kBAACmL,GAAA,EAAD,CACIhR,QAAQ,YACRd,MAAM,UACNQ,UAAWnB,EAAQhB,OACnBsZ,UAAW,kBAAC,KAAD,MACXxX,QAlGxB,WAEhB,IAAIoX,EAAe,IAAIrF,GAAGC,aAAa6D,GAGnCE,EAAUC,EAAeD,QAEzB0B,EAAyBL,EAAavL,QAAQkK,GAClDhH,EAAc0I,GAEdvB,EAAGC,QAAQC,UAAYU,EAAWM,EAAapZ,QAmFX,YAUJ,kBAACqI,EAAA,EAAD,CAAMC,MAAI,EAACE,GAAI,GACX,kBAACmL,GAAA,EAAD,CACIhR,QAAQ,YACRd,MAAM,UACNQ,UAAWnB,EAAQhB,OACnBsZ,UAAW,kBAAC,KAAD,MACXxX,QAAS,WAjOjC,IAAC0X,IAiOmDxB,EAjO3CyB,OAAOC,SAAS,EAAGF,EAAIvB,QAAQ0B,aA4NpB,gBAaf3L,GACG,kBAACiD,GAAA,EAAD,CAAOnO,QAAS,WAAO+N,EAAc,KAAMK,SAAS,WAApD,0BAC4BlD,IAKpC,yBAAKxM,MAAO,CAAEb,WAAY,OAAQsH,UAAW,WAA7C,4BAMXwP,GACG,kBAACvQ,EAAA,EAAD,CAAO1F,MAAO,CAAElB,MAAO,OAAQL,OAAQ,OAAQkH,QAAS,OAAQc,UAAW,SAAUmK,gBAAiB,YAClG,kBAAC7Q,EAAA,EAAD,CAAYkB,QAAQ,KAAKmX,cAAY,GAArC,kBAKR,yBAAKzX,UAAU,gBACX,yBAAKA,UAAU,OAAOqX,IAAKxB,OCnUvC6B,GAAQ,WAGX,SAASC,EAAmBC,EAAOC,GAGlC,IAFA,IAAIC,EAAIF,EAAKzT,OACT4T,EAAI,EACCnU,EAAI,EAAIA,EAAIkU,EAAIlU,IACxBmU,GAAK/O,KAAKgP,IAAKJ,EAAKhU,GAAKiU,EAAKjU,GAAI,GAEnC,OADAmU,EAAI/O,KAAKiP,KAAMF,GAIhB,SAASG,EAAmBN,EAAOC,GAGlC,IAFA,IAAIC,EAAIF,EAAKzT,OACT4T,EAAI,EACCnU,EAAI,EAAIA,EAAIkU,EAAIlU,IACxBmU,GAAK/O,KAAKmP,IAAKP,EAAKhU,GAAKiU,EAAKjU,IAC/B,OAAOmU,EAGR,SAASK,EAAaR,EAAOC,GAG5B,IAFA,IAAIC,EAAIF,EAAKzT,OACT4T,EAAI,EACCnU,EAAI,EAAIA,EAAIkU,EAAIlU,IACxBmU,EAAI/O,KAAK3C,IAAK0R,EAAI/O,KAAKmP,IAAKP,EAAKhU,GAAKiU,EAAKjU,KAC5C,OAAOmU,EAGR,SAASM,EAAYT,EAAOC,GAG3B,IAFA,IAAIC,EAAIF,EAAKzT,OACTmU,EAAM,IAAIC,MAAMT,GACXlU,EAAI,EAAIA,EAAIkU,EAAIlU,IACxB0U,EAAI1U,GAAKgU,EAAKhU,GAAKiU,EAAKjU,GACzB,OAAO0U,EAGR,SAASE,EAAuBjS,EAAQ+R,GAGvC,IAFA,IAAIR,EAAIQ,EAAInU,OACRsU,EAAI,IAAIF,MAAMT,GACTlU,EAAI,EAAIA,EAAIkU,EAAIlU,IACxB6U,EAAE7U,GAAK2C,EAAQ+R,EAAI1U,GACpB,OAAO6U,EAYR,SAASC,EAAWC,EAAGvC,GAEtB,IADA,IAAIwC,EAAM,GACDhV,EAAI,EAAIA,EAAIwS,EAAIxS,IACxBgV,GAAOD,EACR,OAAOC,EAGR,SAASC,EAAmBC,EAASC,EAAaC,EAASC,GAG1D,IAFA,IAAIC,EAAc,IAAIX,MAAMQ,EAAW5U,QACnCgV,EAAUL,EAASE,EACdpV,EAAI,EAAIA,EAAImV,EAAW5U,OAASP,IACxCsV,EAAYtV,IAAMkV,EAASC,EAAWnV,GAAKoV,EAASC,EAAWrV,IAAMuV,EACtE,OAAOD,EAIR,SAASE,EAAaR,EAAKza,GAC1B,IAAIkb,EAAOlb,EAAQya,EAAIzU,OACvB,KAAIkV,EAAO,GAAX,CAGA,IAAIC,EAAWtQ,KAAKuQ,MAAMF,EAAO,GACjC,OAAOX,EAAY,IAAMY,GAAYV,EAAMF,EAAY,IAAMW,EAAOC,IAGrE,SAASE,EAAUZ,EAAKza,EAAOgS,GAE9B,KADWhS,EAAQya,EAAIzU,OACZ,GAGX,OAAOuU,EAAY,IAAMvI,GAASyI,EAAMF,EAAY,IAAMva,GAASya,EAAIzU,OAAOgM,IA0M/E,SAASsJ,EAAiBC,EAAGC,GAI5B,IAAIvD,EAAIuD,EAAQxV,OAChB,GAAKuV,EAAItD,EACR,OAAO,KASR,IAPA,IAMIxS,EAAIgW,EAAQ5I,EANZ6I,EAAmB,IAAItB,MAAMmB,GAC7BI,EAAmB,IAAIvB,MAAMmB,GAE7BK,EAAiB,GACjBC,EAAS,EACTC,EAAW,EAERA,EAAWP,GAAG,CACpB,GAAIM,IAAW5D,EACd,OAAO,KAER,IAAI8D,EAAelR,KAAKuQ,MAAMvQ,KAAKmR,SAAU/D,GAC7C,KAAI8D,KAAgBH,GAApB,CAOA,IAJAA,EAAeG,GAAgB,EAC/BF,IACAJ,EAASD,EAAQO,GACjBlJ,GAAS,EACJpN,EAAI,EAAIA,EAAIqW,EAAWrW,IAC3B,GAAKgW,EAAOQ,QAASP,EAAiBjW,IAAM,CAC3CoN,GAAS,EACT,MAGEA,IACH6I,EAAiBI,GAAYL,EAC7BE,EAAiBG,GAAYC,EAC7BD,MAGF,MAAO,CAAC,QAAWJ,EAAkB,QAAWC,GA+JjD,SAASO,EAAQC,EAAKtE,GAErBnE,KAAKyI,KAAOA,EACZzI,KAAKmE,KAAOA,EACZnE,KAAK0I,IAAM,IAAIhC,MAAM+B,GAErB,IAAK,IAAI1W,EAAI,EAAIA,EAAI0W,EAAO1W,IAC5B,CAEC,IADA,IAAI4W,EAAM,IAAIjC,MAAMvC,GACXyE,EAAI,EAAIA,EAAIzE,EAAOyE,IAC3BD,EAAIC,GAAK,EACV5I,KAAK0I,IAAI3W,GAAK4W,GAIhB,SAASE,EAAM7J,EAAM8J,EAAKC,EAAMC,EAAMC,GAErCjJ,KAAKhB,MAAQA,EACbgB,KAAK8I,KAAOA,EACZ9I,KAAK+I,MAAQA,EACb/I,KAAKgJ,KAAOA,EACZhJ,KAAKiJ,SAAWA,EACH,OAATH,GAA2B,OAAVC,GACpB/I,KAAKkJ,KAAO,EACZlJ,KAAKmJ,MAAQ,IAEbnJ,KAAKkJ,KAAOJ,EAAKI,KAAOH,EAAMG,KAC9BlJ,KAAKmJ,MAAQ,EAAIhS,KAAK3C,IAAKsU,EAAKK,MAAQJ,EAAMI,QAMhD,MAAO,CACNC,eAAgB,EAChBC,iBAAkB,EAClBC,gBAAgB,EAChBC,mBAAoB,EACpBC,mBAAoB,EACpBC,aAAc,EACdC,6BAA8B,EAC9BC,sBAAuB,GACvBC,uBAAwB,EAExBpB,OAAQA,EACRK,KAAMA,EACNgB,kBA9aD,SAASA,EAAkBpH,EAAMqH,EAAKC,EAAUC,EAAWC,EAAcC,GACxE,IAAIC,EAAQ,GACRC,EAfL,SAAsBrC,GAGrB,IAFA,IAAI9R,EAAO,IAAIyQ,MAAMqB,EAAOzV,QACxB+X,EAAYlT,KAAKgP,IAAI,GAAIN,GAAM6D,8BAC1B3X,EAAI,EAAIA,EAAIgW,EAAOzV,OAASP,IACpCkE,EAAKlE,GAAKoF,KAAKmT,MAAMvC,EAAOhW,GAAGsY,GAAWA,EAC3C,OAAOpU,EAAK2F,KAAK,KAUC2O,CAAa9H,EAAKwG,UACpC,GAAIxG,EAAK+H,SAAU,CAClB,IAAIC,EAAW9K,OAAO8C,EAAKzD,OACvB0L,EAAM,EACNT,IACHS,EAAMvT,KAAK3C,IAAI4V,EAAY9X,OAASoY,IACjCV,IACHU,EAAMvT,KAAK3C,IAAIiW,EAASnY,OAASoY,IAElCP,EAAM/c,KAAMma,EAAc,IAAMmD,IAC5BT,GACHE,EAAM/c,KAAMma,EAAc6C,EAAcM,IACrCV,GACHG,EAAM/c,KAAMma,EAAckD,EAAWC,QAEhC,CACN,IAAIC,EAvBN,SAAqBjW,GACpB,IAAI2V,EAAYlT,KAAKgP,IAAI,GAAIN,GAAM6D,8BACnC,OAAO/J,OAAQxI,KAAKmT,MAAM5V,EAAM2V,GAAWA,GAqBxBO,CAAYnI,EAAKuG,MAC/B6B,EAAahB,EAAkBpH,EAAKqG,KAAMgB,EAAKC,EAASC,EAAUC,EAAcC,GAChFY,EAAcjB,EAAkBpH,EAAKsG,MAAOe,EAAKC,EAASC,EAAUC,EAAaC,GACjFa,EAAcF,EAAW,GAAGG,QAAQ,KACpCC,EAAeH,EAAY,GAAGE,QAAQ,KAGtCN,EAAMZ,EAAMgB,EAAY,GAAGxY,OAASuY,EAAW,GAAGvY,OAClD2X,IACHS,EAAMvT,KAAK3C,IAAI4V,EAAY9X,OAASoY,IACjCR,IACHQ,EAAMvT,KAAK3C,IAAImW,EAAYrY,OAASoY,IAIrC,IAAIQ,EAAUH,EAAc5T,KAAKuQ,OAAQmD,EAAW,GAAGvY,OAAUyY,EAAejB,GAAO,EAAEmB,IAAiB,GAG1Gd,EAAM/c,KAAMua,EAAW,IAAM+C,EAAMQ,IAC/BjB,GACHE,EAAM/c,KAAMua,EAAWyC,EAAcM,EAAMQ,EAAS/T,KAAKuQ,MAAO0C,EAAY9X,OAAS,KAElF4X,GACHC,EAAM/c,KAAMua,EAAWgD,EAAcD,EAAMQ,EAAS/T,KAAKuQ,MAAOiD,EAAYrY,OAAS,KAItF,IACI6Y,EAAQtE,EAAY,IADTiD,GAAOe,EAAW,GAAGvY,OAAQyY,GAAeE,EAAa,GAMxE,GAJAd,EAAM/c,KAAMua,EAAUwD,EAAOT,EAAKK,IAI9BhB,GAAcc,EAAWvY,SAAUwY,EAAYxY,OAAS,CAC3D,IAAI8Y,EACAC,EACAR,EAAWvY,OAASwY,EAAYxY,QACnC+Y,EAAUR,EACVO,EAAWN,IAEXO,EAAUP,EACVM,EAAWP,GAKZ,IAFA,IAAIS,EAASF,EAAS,GAClBG,EAAQF,EAAQ/Y,OAAS8Y,EAAS9Y,OAC7BP,EAAI,EAAIA,EAAIwZ,EAAQxZ,IAC5BqZ,EAASI,OAAQ,EAAE,EAAEF,GAKvB,IAAK,IAAIvZ,EAAI,EAAIA,EAAIoF,KAAK3C,IAAKqW,EAAWvY,OAASwY,EAAYxY,QAAUP,IAAK,CAC7E,IAAI+W,EAAO,GAEVA,EADG/W,EAAI8Y,EAAWvY,OACXuY,EAAW9Y,GAEX8U,EAAY,IAAMgE,EAAW,GAAGvY,QAExC,IAAIyW,EAAQ,GAEXA,EADGhX,EAAI+Y,EAAYxY,OACXwY,EAAY/Y,GAEZ8U,EAAY,IAAMiE,EAAY,GAAGxY,QAC1C6X,EAAM/c,KAAK0b,EAAOjC,EAAY,IAAMiD,GAAOf,GAE5BlC,EAAY,IAAMiD,IAInC,OAAOK,GAuVPsB,YAlVD,SAAsBC,EAAQ5D,EAAS6D,EAAUC,GAChD,IAOIC,EAAIC,EAAIC,EAAWC,EAAWja,EAAG6W,EAAG9F,EAAGhX,EAAOub,EAP9CpB,EAAI6B,EAAQxV,OACZ2Z,EAAO,IAAIvF,MAAMT,GACjBiG,EAAQ,IAAIxF,MAAMT,GAElBkG,EADY,IAAItG,GAAM2C,OAAOvC,EAAEA,GACRyC,IACvB0D,EAAW,IAAI1F,MAAMT,GAYzB,IARI0F,IAAa9F,GAAM0D,mBACtBoC,EAAW7F,EACH6F,IAAa9F,GAAM2D,mBAC3BmC,EAAWtF,EACHsF,IAAa9F,GAAM4D,eAC3BkC,EAAWpF,GAGPxU,EAAI,EAAIA,EAAIkU,EAAIlU,IAEpB,IADAka,EAAKla,GAAK,EACL6W,EAAI,EAAIA,EAAI3C,EAAI2C,IAEnBuD,EAAWpa,GAAG6W,GADX7W,IAAM6W,EACUyD,IAEAV,EAAS7D,EAAQ/V,GAAK+V,EAAQc,IAE9CuD,EAAWpa,GAAGka,EAAKla,IAAMoa,EAAWpa,GAAG6W,KAC1CqD,EAAKla,GAAK6W,GAKb,IAAK7W,EAAI,EAAIA,EAAIkU,EAAIlU,IACpBqa,EAASra,GAAK,GACdqa,EAASra,GAAG,GAAK,IAAI8W,EAAM6C,EAAO3Z,GAAI,KAAM,KAAM,EAAG+V,EAAQ/V,IAC7Dma,EAAMna,GAAK,EAIZ,IAAK+Q,EAAI,EAAIA,EAAImD,EAAE,EAAInD,IAAK,CAG3B,IADA+I,EAAK,EACA9Z,EAAI,EAAIA,EAAIkU,EAAIlU,IAChBoa,EAAWpa,GAAGka,EAAKla,IAAMoa,EAAWN,GAAII,EAAKJ,MAChDA,EAAK9Z,GAEP+Z,EAAKG,EAAKJ,GAGVE,EAAYK,EAASP,GAAI,GACzBG,EAAYI,EAASN,GAAI,GAEzBzE,EAAcL,EAAoB+E,EAAU7C,KAAO6C,EAAU9C,SAAW+C,EAAU9C,KAAO8C,EAAU/C,UACnG,IAAIqD,EAAa,IAAIzD,GAAO,EAAGkD,EAAWC,EAAYG,EAAWN,GAAIC,GAAMzE,GAK3E,IAJA+E,EAASP,GAAIL,OAAO,EAAE,EAAGc,GACzBJ,EAAML,IAAOK,EAAMJ,GAGdlD,EAAI,EAAIA,EAAI3C,EAAI2C,IACpB,GAAIgD,IAAY/F,GAAMuD,eACjB+C,EAAWN,GAAIjD,GAAKuD,EAAWL,GAAIlD,KACtCuD,EAAWvD,GAAGiD,GAAMM,EAAWN,GAAIjD,GAAKuD,EAAWL,GAAIlD,SAClD,GAAIgD,IAAY/F,GAAMwD,iBACxB8C,EAAWN,GAAIjD,GAAKuD,EAAWL,GAAIlD,KACtCuD,EAAWvD,GAAGiD,GAAMM,EAAWN,GAAIjD,GAAKuD,EAAWL,GAAIlD,SAClD,GAAIgD,IAAY/F,GAAMyD,gBAAiB,CAC7C,IAAIiD,GAAQL,EAAML,GAAMM,EAAWN,GAAIjD,GAAKsD,EAAMJ,GAAMK,EAAWL,GAAIlD,KAAQsD,EAAML,GAAMK,EAAMtD,IACjGuD,EAAWvD,GAAGiD,GAAMM,EAAWN,GAAIjD,GAAK2D,EAM1C,IAHAJ,EAAWN,GAAIA,GAAMQ,IAGhBta,EAAI,EAAIA,EAAIkU,EAAIlU,IACpBoa,EAAWpa,GAAG+Z,GAAMK,EAAWL,GAAI/Z,GAAKsa,IAGzC,IAAKzD,EAAI,EAAGA,EAAI3C,EAAI2C,IACfqD,EAAKrD,KAAOkD,IACfG,EAAKrD,GAAKiD,GACPM,EAAWN,GAAIjD,GAAKuD,EAAWN,GAAII,EAAKJ,MAC3CI,EAAKJ,GAAMjD,GAIb9c,EAAOwgB,EAGR,OAAOxgB,GA2PP0gB,OA5MD,SAAiB3E,EAAGC,GACnB,IAAIvD,EAAIuD,EAAQxV,OACZma,EAAc,IAAI/F,MAAMnC,GACxBmI,EAAe,IAAIhG,MAAMmB,GACzB8E,GAAS,EACTC,EAAW,EACXC,EAAY,KAEZtK,EAAIqF,EAAiBC,EAAGC,GAC5B,GAAU,OAANvF,EACH,OAAO,KAIR,IAFCsK,EAAYtK,EAAEuF,QAER6E,GAAQ,CAGd,IAAK,IAAI/D,EAAI,EAAIA,EAAIf,EAAIe,IACxB8D,EAAa9D,GAAK,EAEnB,IAAK,IAAI7W,EAAI,EAAIA,EAAIwS,EAAIxS,IAAK,CAK7B,IAJA,IAAIgW,EAASD,EAAQ/V,GACjB+a,EAAU9V,OAAO+V,UACjBC,OAAI,EACJhE,OAAI,EACCJ,EAAI,EAAIA,EAAIf,EAAIe,KACxBI,EAAOlD,EAAmB+G,EAAUjE,GAAIb,IAC7B+E,IACVA,EAAU9D,EACVgE,EAAOpE,GAGT8D,EAAaM,KACbP,EAAY1a,GAAKib,EAKlB,IADA,IAAIC,EAAe,IAAIvG,MAAMmB,GACpBe,EAAI,EAAIA,EAAIf,EAAIe,IACxBqE,EAAarE,GAAK,KAEnB,IADA,IAAIsE,OAAO,EACFnb,EAAI,EAAIA,EAAIwS,EAAIxS,IAEM,OAA1Bkb,EADJC,EAAUT,EAAY1a,IAErBkb,EAAaC,GAAWpF,EAAQ/V,GAEhCkb,EAAaC,GAAW1G,EAAYyG,EAAaC,GAAWpF,EAAQ/V,IAGtE,IAAK,IAAI6W,EAAI,EAAIA,EAAIf,EAAIe,IACxBqE,EAAarE,GAAKjC,EAAuB,EAAE+F,EAAa9D,GAAKqE,EAAarE,IAI3E+D,GAAS,EACT,IAAK,IAAI/D,EAAI,EAAIA,EAAIf,EAAIe,IACxB,IAAMqE,EAAarE,GAAGL,QAASsE,EAAUjE,IAAK,CAC7C+D,GAAS,EACT,MAGFE,EAAYI,IACZL,EAGe/G,GAAM8D,wBACpBgD,GAAS,GAGX,MAAO,CAAE,UAAaE,EAAY,YAAeJ,IAwIjDU,QApID,SAAkBtF,EAAGC,EAASsF,EAASC,GAQtC,IAPA,IAMItb,EAAE6W,EAAE0E,EAAGC,EAAKC,EAAMhZ,EAAKgT,EANvBiG,EAAmB,IAAIjF,EAAQV,EAAQxV,OAAQuV,GAC/C8E,GAAS,EACTC,EAAW,EAEXC,EAAY,KAGTF,GAAQ,CAEd,GAAkB,OAAdE,EAAoB,CAGvB,GAAY,QADZU,EAAM3F,EAAiBC,EAAGC,IAEzB,OAAO,KAEP+E,EAAYU,EAAIzF,aAGjB,IAAKc,EAAI,EAAIA,EAAIf,EAAGe,IAAK,CAGxB,IAFAiE,EAAUjE,GAAK,GACf4E,EAAO,EACFzb,EAAI,EAAIA,EAAI0b,EAAiBhF,KAAO1W,IACxCyb,GAAQrW,KAAKgP,IAAIsH,EAAiB/E,IAAI3W,GAAG6W,GAAIyE,GAC7CE,EAAM5G,EAAuBxP,KAAKgP,IAAIsH,EAAiB/E,IAAI3W,GAAG6W,GAAIyE,GAAavF,EAAQ/V,IAGtF8a,EAAUjE,GADD,IAAN7W,EACYwb,EAEA/G,EAAYqG,EAAUjE,GAAK2E,GAExCC,EAAO,IACVX,EAAUjE,GAAKjC,EAAsB,EAAE6G,EAAMX,EAAUjE,KAS1D,IAAI8E,EAA2BD,EAAiBE,OAChD,IAAK5b,EAAI,EAAIA,EAAI0b,EAAiBhF,KAAO1W,IACxC,IAAK6W,EAAI,EAAIA,EAAIf,EAAIe,IAAK,CAEzB,IADA6E,EAAiB/E,IAAI3W,GAAG6W,GAAK,EACxB0E,EAAI,EAAIA,EAAIzF,EAAIyF,IAEnBC,EADoD,IAAjDzH,EAAkBgC,EAAQ/V,GAAK8a,EAAUS,IACtC,EAECxH,EAAkBgC,EAAQ/V,GAAK8a,EAAUjE,IAAM9C,EAAkBgC,EAAQ/V,GAAK8a,EAAUS,IAChGC,EAAMpW,KAAKgP,IAAKoH,EAAK,GAAGF,EAAU,IAClCI,EAAiB/E,IAAI3W,GAAG6W,IAAM2E,EAE3BE,EAAiB/E,IAAI3W,GAAG6W,GAAK,IAChC6E,EAAiB/E,IAAI3W,GAAG6W,GAAK,EAAI6E,EAAiB/E,IAAI3W,GAAG6W,IAQ5D,IADApU,GAAO,EACFzC,EAAI,EAAIA,EAAI0b,EAAiBhF,KAAO1W,IACxC,IAAK6W,EAAI,EAAIA,EAAI6E,EAAiBtJ,KAAOyE,KACxCpB,EAAOrQ,KAAKmP,IAAImH,EAAiB/E,IAAI3W,GAAG6W,GAAK8E,EAAyBhF,IAAI3W,GAAG6W,KAClEpU,IACVA,EAAMgT,GAGLhT,EAAM4Y,IACTT,GAAS,KAEVC,EAGe/G,GAAM+D,yBACpB+C,GAAS,GAEX,MAAO,CAAE,UAAaE,EAAY,iBAAoBY,KA9d5C,GAyhBZ5H,GAAM2C,OAAOxF,UAAU4K,SAAW,WAGjC,IADA,IAAIzD,EAAQ,GACHpY,EAAI,EAAIA,EAAIiO,KAAKyI,KAAO1W,IAChCoY,EAAM/c,KAAM4S,KAAK0I,IAAI3W,GAAG6J,KAAK,OAC9B,OAAOuO,EAAMvO,KAAM,OAIpBiK,GAAM2C,OAAOxF,UAAU2K,KAAO,WAG7B,IADA,IAAIE,EAAY,IAAIhI,GAAM2C,OAAOxI,KAAKyI,KAAMzI,KAAKmE,MACxCpS,EAAI,EAAIA,EAAIiO,KAAKyI,KAAO1W,IAChC8b,EAAUnF,IAAI3W,GAAKiO,KAAK0I,IAAI3W,GAAGqS,MAAM,GACtC,OAAOyJ,GAGRhI,GAAMgD,KAAK7F,UAAUwH,OAAS,WAE7B,OAAmB,OAAdxK,KAAK8I,MAAkC,OAAf9I,KAAK+I,OAMnClD,GAAMgD,KAAK7F,UAAU8K,eAAiB,SAAUhE,EAAKC,EAASC,EAAUC,EAAcC,GAIrF,OADQrE,GAAMgE,kBAAkB7J,KAAM8J,EAAKC,EAASC,EAAUC,EAAcC,GAC/DtO,KAAM,OAeLiK,U,8BC7iBTla,I,OAAYC,aAAW,SAAAC,GAAK,MAAK,CACnCkD,MAAO,CACH9C,OAAQJ,EAAMK,QAAQ,EAAG,GACzBH,QAAS,OACT4O,cAAe,SACfC,WAAY,UAEhBC,YAAa,CACT5O,OAAQJ,EAAMK,QAAQ,GACtBI,MAAO,OAEXwO,YAAa,CACTvK,UAAW1E,EAAMK,QAAQ,IAE7B6O,KAAM,CACFzO,MAAO,MACPiE,UAAW1E,EAAMK,QAAQ,GACzB8O,WAAY,QAEhBC,OAAQ,CACJ3O,MAAO,cA2RAyhB,GAvRgB,WAC3B,IAAM/gB,EAAUrB,KADiB,EAEPgE,mBAAS,IAFF,mBAE1B2M,EAF0B,KAEnBC,EAFmB,KAGzB9Q,EAAQmH,qBAAWrH,GAAnBE,IAHyB,EAIKkE,mBAAS,IAJd,mBAI1BgE,EAJ0B,KAIb6I,EAJa,OAKP7M,qBALO,mBAK1BqP,EAL0B,KAKnBgP,EALmB,KAM3BC,EAAYxJ,mBAclB,OAXA/Q,qBAAU,WAAM,4CAGZ,4BAAAzC,EAAA,sEAC0BxF,EAAIkI,cAD9B,OACUJ,EADV,OAEIiJ,EAAejJ,GACfya,EAASza,EAAQ,IAHrB,4CAHY,sBACD,MAAP9H,GADQ,mCAQZuR,KACD,CAACvR,EAAK+Q,IAGL,6BACI,kBAACrI,EAAA,EAAD,CAAM3F,WAAS,GACX,kBAAC2F,EAAA,EAAD,CAAMC,MAAI,EAACC,GAAI,EAAGC,GAAI,IAClB,kBAAC,GAAD,MACA,kBAAC,GAAD,OAEJ,kBAACH,EAAA,EAAD,CAAMC,MAAI,EAACC,GAAI,EAAGC,GAAI,IACjB7I,GAAOkI,GAAeqL,EACnB,yBAAKxR,MAAO,CAAE2F,QAAS,SACtBmJ,GACG,kBAACW,GAAA,EAAD,CAAOnO,QAAS,kBAAMyN,EAAS,KAAKW,SAAS,SACxCZ,GAGT,kBAAC,KAAD,CACIa,oBAAkB,EAClBC,cAAe,CACX0K,QAASnU,EACTqL,MAAOA,EACP4M,QAAS,EACTD,SAAU,EACV3B,WAAW,EACXC,cAAc,EACdC,cAAc,EACdH,UAAU,EACVmE,MAAO,GAEX3Q,SAAU,SAAA/K,GACN,IAAMgL,EAAS,GAef,OAdKhL,EAAOwM,QACRxB,EAAOwB,MAAQ,aAEfxM,EAAOoZ,QAAU,GAAKpZ,EAAOoZ,QAAU,KACvC7R,QAAQV,IAAI,QACZmE,EAAOoO,QAAU,aAEjBpZ,EAAOmZ,SAAW,GAAKnZ,EAAOmZ,SAAW,KACzCnO,EAAOmO,SAAW,YAED,IAAjBnZ,EAAO0b,OAAgC,IAAjB1b,EAAO0b,OAAgC,IAAjB1b,EAAO0b,OAAgC,IAAjB1b,EAAO0b,QACzE1Q,EAAO0Q,MAAQ,iBAGZ1Q,GAEXC,SAAU,SAACjL,EAAD,GAAgC,IAArBkL,EAAoB,EAApBA,eACM,uCAAG,WAAMlL,GAAN,SAAAvB,EAAA,wFAAAA,EAAA,kDAAAA,EAAA,6DAEdkd,EAFc,uBAED3b,EAAOsV,SAFN,CAEetV,EAAOwM,QAExCmP,GADAA,EAAM,aAAO,IAAIvQ,IAAIuQ,KACLhd,QAAO,SAACid,GAAD,OAAWA,IAAU5b,EAAOwM,SAJjC,SAKDvT,EAAImI,UALH,OAQlB,IAHIrB,EALc,OAMdmZ,EAAS,GACT5D,EAAU,GAPI,WAQT/V,GACL2Z,EAAO3Z,GAAKQ,EAAKR,GAAGS,EAAOwM,OAC3B8I,EAAQ/V,GAAK,GACboc,EAAO3J,SAAQ,SAAC4J,GACZtG,EAAQ/V,GAAG3E,KAAKmF,EAAKR,GAAGqc,QAJvBrc,EAAI,EAAIA,EAAIQ,EAAKD,OAASP,IAAM,EAAhCA,GAOLsc,EAAQ,CAAC,OAAU3C,EAAS,QAAW5D,GACvChc,EAAO+Z,GAAM4F,YAAY4C,EAAK,OAAYA,EAAK,QAAc7b,EAAOmZ,SAAUnZ,EAAOoZ,SACrF0C,EAAOxiB,EAAKgiB,eAAetb,EAAO0b,MAAO1b,EAAOuX,SAAUvX,EAAOwX,UAAWxX,EAAOyX,aAAczX,EAAO0X,cAC5GnQ,QAAQV,IAAIvN,GACZmiB,EAAUhK,QAAQsK,UAAYD,EA/E7C9I,EAgF2ByI,EAhFnBxI,OAAOC,SAAS,EAAGF,EAAIvB,QAAQ0B,WA4DN,kCA5DlC,IAACH,IA4DiC,sEAsBlBzL,QAAQuC,MAAR,MACAC,EAAS,2CAvBS,wDAAH,sDA0BvBsB,CAAkBrL,GAClBkL,GAAc,MAEpB,gBACElL,EADF,EACEA,OACAgL,EAFF,EAEEA,OACAM,EAHF,EAGEA,QACAC,EAJF,EAIEA,aAEAE,GANF,EAKED,WALF,EAMEC,cACAC,EAPF,EAOEA,aACAC,EARF,EAQEA,cARF,OAUM,0BAAMhQ,UAAWnB,EAAQ+N,KAAM0C,SAAUQ,GACrC,kBAAC9J,EAAA,EAAD,CAAM3F,WAAS,EAACtC,QAAS,GACrB,kBAACiI,EAAA,EAAD,CAAMC,MAAI,EAACE,GAAI,IACX,kBAACpB,EAAA,EAAD,CAAO1F,MAAO,CAAE4Q,gBAAiB,QAASjL,QAAS,SAAnD,mCAGA,kBAACgB,EAAA,EAAD,CAAM3F,WAAS,EAACtC,QAAS,GACpByH,EAAY9B,KAAI,SAACwM,EAAQC,GAAT,OACb,kBAACnK,EAAA,EAAD,CAAMC,MAAI,EAACE,GAAI,GAAIqH,IAAK2C,GACnBD,IAAW7L,EAAOwM,OACf,kBAACT,GAAA,EAAD,CACIC,QAAS,kBAACC,GAAA,EAAD,CACLC,QAASlM,EAAOsV,QAAQzW,SAASgN,GACjC1Q,MAAM,UACNwN,KAAMkD,EACNM,SAAU,SAACC,GACP,IAAInI,EAAQjE,EAAOsV,QACnB,GAAIrR,EAAMpF,SAASuN,EAAMC,OAAO1D,MAAO,CACnC,IAAM2D,EAAWrI,EAAMtF,QAAO,SAAC4N,GAAD,OAASA,IAAQH,EAAMC,OAAO1D,QAC5DgD,EAAc,UAAWW,GAAU,QAEnCrI,EAAMrJ,KAAKwR,EAAMC,OAAO1D,MACxBgD,EAAc,UAAW1H,GAAO,MAI5CuI,MAAOX,UAO/B,kBAAClK,EAAA,EAAD,CAAM3G,MAAO,CAAE2F,QAAS,QAAUiB,MAAI,EAACE,GAAI,IACvC,8BAEJ,kBAACH,EAAA,EAAD,CAAMC,MAAI,EAACE,GAAI,IACX,kBAAC2K,GAAA,EAAD,CAAWC,GAAG,SACVF,MAAM,QAAQG,QAAM,EACpBC,WAAS,EACT1K,MAAOlC,EAAOwM,MACd7D,KAAK,QACLwD,SAAUZ,EACVtP,QAAQ,UAEPkF,EAAY9B,KAAI,SAACwM,EAAQC,GAAT,OACb,kBAACe,GAAA,EAAD,CAAU1D,IAAK2C,EAAO5J,MAAO2J,GAASA,OAG9C,kBAACiB,GAAA,EAAD,wBAEJ,kBAACnL,EAAA,EAAD,CAAM3G,MAAO,CAAE2F,QAAS,QAAUiB,MAAI,EAACE,GAAI,IACvC,8BAEJ,kBAACH,EAAA,EAAD,CAAM3G,MAAO,CAAE+C,UAAW,QAAU6D,MAAI,EAACE,GAAI,GACzC,kBAACwQ,GAAA,EAAD,CAAa5W,UAAU,YACvB,kBAACsgB,GAAA,EAAD,CAAWtgB,UAAU,UAArB,WACA,kBAACugB,GAAA,EAAD,CAAYrgB,aAAW,UAAU+M,KAAK,UAAUzG,MAAOlC,EAAOoZ,QAASjN,SAAU,SAACC,GAC9ET,EAAc,UAAWuQ,SAAS9P,EAAMC,OAAOnK,QAAQ,KAEvD,kBAAC6J,GAAA,EAAD,CAAkB7J,MAAO,EAAG8J,QAAS,kBAACmQ,GAAA,EAAD,MAAW3P,MAAM,mBACtD,kBAACT,GAAA,EAAD,CAAkB7J,MAAO,EAAG8J,QAAS,kBAACmQ,GAAA,EAAD,MAAW3P,MAAM,qBACtD,kBAACT,GAAA,EAAD,CAAkB7J,MAAO,EAAG8J,QAAS,kBAACmQ,GAAA,EAAD,MAAW3P,MAAM,sBAG1D,yBAAKxR,MAAO,CAAEvB,OAAQ,OAAQ0B,MAAO,QAChC6P,EAAOoO,SAAW9N,EAAQ8N,SAAWpO,EAAOoO,UAGrD,kBAACzX,EAAA,EAAD,CAAM3G,MAAO,CAAE+C,UAAW,QAAU6D,MAAI,EAACE,GAAI,GACzC,kBAACwQ,GAAA,EAAD,CAAa5W,UAAU,YACvB,kBAACsgB,GAAA,EAAD,CAAWtgB,UAAU,UAArB,YACA,kBAACugB,GAAA,EAAD,CAAYrgB,aAAW,WAAW+M,KAAK,WAAWzG,MAAOlC,EAAOmZ,SAAUhN,SAAU,SAACC,GACjFT,EAAc,WAAYuQ,SAAS9P,EAAMC,OAAOnK,QAAQ,KAExD,kBAAC6J,GAAA,EAAD,CAAkB7J,MAAO,EAAG8J,QAAS,kBAACmQ,GAAA,EAAD,MAAW3P,MAAM,cACtD,kBAACT,GAAA,EAAD,CAAkB7J,MAAO,EAAG8J,QAAS,kBAACmQ,GAAA,EAAD,MAAW3P,MAAM,cACtD,kBAACT,GAAA,EAAD,CAAkB7J,MAAO,EAAG8J,QAAS,kBAACmQ,GAAA,EAAD,MAAW3P,MAAM,cAG1D,yBAAKxR,MAAO,CAAEvB,OAAQ,OAAQ0B,MAAO,QAChC6P,EAAOmO,UAAY7N,EAAQ6N,UAAYnO,EAAOmO,WAGvD,kBAACxX,EAAA,EAAD,CAAM3G,MAAO,CAAE2F,QAAS,QAAUiB,MAAI,EAACE,GAAI,IACvC,8BAEJ,kBAACH,EAAA,EAAD,CAAMC,MAAI,EAACE,GAAI,GACX,kBAACiK,GAAA,EAAD,CACIC,QAAS,kBAACC,GAAA,EAAD,CAAUC,QAASlM,EAAOwX,UAAWrL,SAAUZ,EAAc5C,KAAK,cAC3E6D,MAAM,iBAGd,kBAAC7K,EAAA,EAAD,CAAMC,MAAI,EAACE,GAAI,GACX,kBAACiK,GAAA,EAAD,CACIC,QAAS,kBAACC,GAAA,EAAD,CAAUC,QAASlM,EAAO0X,aAAcvL,SAAUZ,EAAc5C,KAAK,iBAC9E6D,MAAM,mBAGd,kBAAC7K,EAAA,EAAD,CAAMC,MAAI,EAACE,GAAI,GACX,kBAACiK,GAAA,EAAD,CACIC,QAAS,kBAACC,GAAA,EAAD,CAAUC,QAASlM,EAAOyX,aAActL,SAAUZ,EAAc5C,KAAK,iBAC9E6D,MAAM,mBAGd,kBAAC7K,EAAA,EAAD,CAAMC,MAAI,EAACE,GAAI,GACX,kBAACiK,GAAA,EAAD,CACIC,QAAS,kBAACC,GAAA,EAAD,CAAUC,QAASlM,EAAOuX,SAAUpL,SAAUZ,EAAc5C,KAAK,aAC1E6D,MAAM,uBAGd,kBAAC7K,EAAA,EAAD,CAAMC,MAAI,EAACE,GAAI,IACX,kBAAC2K,GAAA,EAAD,CAAWC,GAAG,SACN1R,MAAO,CAAElB,MAAO,OAChB0S,MAAM,QAAQG,QAAM,EACpBC,WAAS,EACT1K,MAAOlC,EAAO0b,MACd/S,KAAK,QACLwD,SAAU,SAACC,GACPT,EAAc,QAASuQ,SAAS9P,EAAMC,OAAOnK,QAAQ,IAEzDjG,QAAQ,UAER,kBAAC4Q,GAAA,EAAD,CAAU3K,MAAO,GAAjB,KACA,kBAAC2K,GAAA,EAAD,CAAU3K,MAAO,GAAjB,KACA,kBAAC2K,GAAA,EAAD,CAAU3K,MAAO,GAAjB,KACA,kBAAC2K,GAAA,EAAD,CAAU3K,MAAO,GAAjB,MAEJ,kBAAC4K,GAAA,EAAD,sCACA,yBAAK9R,MAAO,CAAEvB,OAAQ,OAAQ0B,MAAO,QAChC6P,EAAO0Q,OAASpQ,EAAQoQ,OAAS1Q,EAAO0Q,SAKzD,yBAAK1gB,MAAO,CAAEvB,OAAQ,OAAQgI,UAAW,WACrC,kBAACwL,GAAA,EAAD,CACIjS,MAAO,CAAElB,MAAO,QAChBiT,KAAK,SACLH,WAAS,EACT3Q,QAAQ,YACRd,MAAM,UACNQ,UAAWnB,EAAQiO,OACnByE,SAAUxB,GAPd,4CAiBhB,yBAAK1Q,MAAO,CAAEb,WAAY,OAAQsH,UAAW,WAA7C,4BAKPxI,GAAOuT,GACJ,kBAAC9L,EAAA,EAAD,CAAO1F,MAAO,CAAElB,MAAO,OAAQL,OAAQ,OAAQkH,QAAS,OAAQc,UAAW,SAAUmK,gBAAiB,YAClG,kBAAC7Q,EAAA,EAAD,CAAYkB,QAAQ,KAAKmX,cAAY,GAArC,cAKR,yBAAKzX,UAAU,eACX,yBAAKA,UAAU,MAAMqX,IAAKyI,Q,4BCtT/BW,G,mFAAf,WAA8BnjB,EAAKojB,GAAnC,mCAAA5d,EAAA,6DAAiD4W,EAAjD,+BAAmD,EAAnD,SAC4B3R,GAAsBzK,EAAK,GAAIojB,GAD3D,mCACWtc,EADX,UAEIwH,QAAQV,IAAIwV,GACZ9U,QAAQV,IAAI,kBAAmB9G,GAEzB0Q,EAASuJ,aAAOja,EAAMsV,GAE5B9N,QAAQV,IAAI4J,GAPhB,6C,sBAWA,IA4Be6L,GA5BA,WAAO,IAEVrjB,EAAQmH,qBAAWrH,GAAnBE,IAFS,EAGqBkE,mBAAS,IAH9B,mBAGVgE,EAHU,KAGG6I,EAHH,KAejB,OAXA9I,qBAAU,WAAM,4CAGZ,4BAAAzC,EAAA,sEAC0BxF,EAAIkI,cAD9B,OACUJ,EADV,OAEIiJ,EAAejJ,GAFnB,4CAHY,sBACD,MAAP9H,GADQ,mCAQZuR,KACD,CAACvR,EAAK+Q,IAGL,kBAACrI,EAAA,EAAD,CAAM3F,WAAS,GACX,kBAAC2F,EAAA,EAAD,CAAMC,MAAI,EAACC,GAAI,EAAGC,GAAI,IAClB,kBAAC,GAAD,MACA,kBAAC,GAAD,OAEJ,kBAACH,EAAA,EAAD,CAAMC,MAAI,EAACC,GAAI,EAAGC,GAAI,IAClB,kBAACmL,GAAA,EAAD,CAAQ3R,QAAO,sBAAE,sBAAAmD,EAAA,sEAAkB2d,GAAenjB,EAAKkI,GAAtC,oFAAjB,YCvBV9H,GAAQkjB,YAAeC,GAmDdC,GAjDH,WAAO,IAAD,EACMtf,qBADN,mBACTlE,EADS,KACJyjB,EADI,KAGVxjB,EAAWyjB,uBAAY,SAAC1jB,GAC5ByjB,EAAOzjB,KACN,IAEC2jB,EACA,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOC,KAAK,IAAIC,OAAK,GACjB,kBAAC,EAAD,OAEJ,kBAAC,IAAD,CAAOD,KAAK,YAAYC,OAAK,GACzB,kBAAC,GAAD,OAEJ,kBAAC,IAAD,CAAOD,KAAK,UAAUC,OAAK,GACzB,kBAACjT,GAAD,OAEF,kBAAC,IAAD,CAAOgT,KAAK,iBAAiBC,OAAK,GAChC,kBAAC,GAAD,OAEF,kBAAC,IAAD,CAAOD,KAAK,YAAYC,OAAK,GAC3B,kBAAC,GAAD,OAEF,kBAAC,IAAD,CAAOD,KAAK,UAAUC,OAAK,GACzB,kBAAC,GAAD,OAEF,kBAAC,IAAD,CAAUC,GAAG,OAInB,OACI,kBAACC,EAAA,EAAD,CAAe3jB,MAAOA,IACpB,kBAACN,EAAWkkB,SAAZ,CACE/a,MAAO,CACLjJ,IAAKA,EACLC,SAAUA,IAGZ,kBAAC,IAAD,KACE,kBAAC,EAAD,KACG0jB,OC1DfM,IAASC,OAAO,kBAAC,GAAD,MAASle,SAASC,eAAe,W","file":"static/js/main.36d32f3c.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAMAAABlApw1AAAC5VBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VfA0nAAAA9nRSTlMAAAcBA0eGDIdJD3nr4SUm4ngQJKf6+VNUqEDJkpTLBFvQGdEIc+7oMwJRUudyhPXkZFdZBmKDDo5Fvy0ukP6yI+Yisf2lGxqmpBYJUBcKce0Y8fKK4K2g2ir7oa4/yr4hHayenR4ws/Rc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\"","  import { createContext } from 'react';\r\n\r\nexport const csvContext = createContext({\r\n    csv: null,\r\n    fetchCsv: (csv) => {}\r\n});","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport List from '@material-ui/core/List';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\n\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nconst drawerWidth = 250;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  button: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  drawer: {\r\n    [theme.breakpoints.up('lg')]: {\r\n      width: drawerWidth,\r\n      flexShrink: 0,\r\n    },\r\n  },\r\n  toolbar: theme.mixins.toolbar,\r\n  drawerPaper: {\r\n    width: drawerWidth,\r\n    [theme.breakpoints.up('lg')]: {\r\n      paddingTop: \"64px\",\r\n    },\r\n  },  \r\n}));\r\n\r\nconst SideDrawer = props => {\r\n    let history = useHistory();\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n\r\n    const pushLink = link => {\r\n      history.push(link);\r\n      props.handleDrawerToggle();\r\n    }\r\n\r\n    const drawer = (\r\n        <div>\r\n            <ListItem classes={{root: classes.root}} button>\r\n                <Typography style={{ fontSize: '20px', fontWeight: '500', color: 'white' }}>\r\n                    Algorithms\r\n                </Typography>\r\n              </ListItem>\r\n          <Divider />\r\n          <List>\r\n            <ListItem button onClick={() => {pushLink('/')}}>\r\n                <ListItemText primary=\"Dashboard\" />\r\n              </ListItem>\r\n              <ListItem button onClick={() => {pushLink('/overview')}}>\r\n                <ListItemText primary=\"Overview\" />\r\n              </ListItem>\r\n          </List>\r\n          <Divider />\r\n          <List>\r\n          <ListSubheader component=\"div\">\r\n            REGRESSION\r\n          </ListSubheader>  \r\n          <ListItem button onClick={() => {pushLink('/linreg')}}>\r\n                <ListItemText primary=\"Linear Regression\" />\r\n              </ListItem>\r\n              <ListItem button>\r\n                <ListItemText primary=\"Logistic Regression\" />\r\n              </ListItem>\r\n          </List>\r\n          <Divider />\r\n          <List>\r\n          <ListSubheader component=\"div\">\r\n            CLASSIFICATION\r\n          </ListSubheader>\r\n              <ListItem button onClick={() => {pushLink('/decision-tree')}}>\r\n                <ListItemText primary=\"Decision Tree\" />\r\n              </ListItem>\r\n              <ListItem button onClick={() => {pushLink('/search')}}>\r\n                <ListItemText primary=\"PCA\" />\r\n              </ListItem>  \r\n              <ListItem button onClick={() => {pushLink('/kmeans')}}>\r\n                <ListItemText primary=\"KMeans\" />\r\n              </ListItem>\r\n              <ListItem button>\r\n                <ListItemText primary=\"SVM\" />\r\n              </ListItem>\r\n              <ListItem button>\r\n                <ListItemText primary=\"KNN Classifier\" />\r\n              </ListItem>\r\n          </List>\r\n          <Divider />\r\n          <Divider />\r\n          <List>\r\n          <ListSubheader component=\"div\">\r\n            CLUSTERING\r\n          </ListSubheader> \r\n              <ListItem button onClick={() => {pushLink('/kmeans')}}>\r\n                <ListItemText primary=\"KMeans\" />\r\n              </ListItem>\r\n              <ListItem button onClick={() => {pushLink('/hcluster')}}>\r\n                <ListItemText primary=\"Hierarchical Clustering\" />\r\n              </ListItem> \r\n          </List>\r\n          <Divider />\r\n          <List>\r\n          <ListSubheader component=\"div\">\r\n            NEURAL NETWORKS\r\n          </ListSubheader>  \r\n            <ListItem button onClick={() => {pushLink('/maps')}}>\r\n                <ListItemText primary=\"CNN\" />\r\n              </ListItem>\r\n          </List>\r\n        </div>\r\n      );\r\n\r\n    return (\r\n      <nav className={classes.drawer} aria-label=\"mailbox folders\">\r\n        <Hidden lgUp>\r\n          <Drawer\r\n            container={props.container}\r\n            variant=\"temporary\"\r\n            anchor={theme.direction === 'rtl' ? 'right' : 'left'}\r\n            open={props.mobileOpen}\r\n            onClose={props.handleDrawerToggle}\r\n            classes={{\r\n              paper: classes.drawerPaper,\r\n            }}\r\n            ModalProps={{\r\n              keepMounted: true, // Better open performance on mobile.\r\n            }}\r\n          >\r\n            {drawer}\r\n          </Drawer>\r\n        </Hidden>\r\n        <Hidden mdDown>\r\n          <Drawer\r\n            classes={{\r\n              paper: classes.drawerPaper,\r\n            }}\r\n            variant=\"permanent\"\r\n            open\r\n          >\r\n            {drawer}\r\n          </Drawer>\r\n        </Hidden>\r\n      </nav> \r\n  );\r\n}\r\n\r\nexport default SideDrawer;","import React, { useState } from 'react';\r\n\r\nimport PropTypes from 'prop-types';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport SideDrawer from './SideDrawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport logo from './logo.png';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n    [theme.breakpoints.up('lg')]: {\r\n      display: 'none',\r\n    },\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n  },\r\n  toolbar: theme.mixins.toolbar,\r\n    title: {\r\n    flexGrow: 1,\r\n  },\r\n}));\r\n\r\nconst Header = props => {\r\n  const { container } = props;\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const [mobileOpen, setMobileOpen] = useState(false);\r\n\r\n  const handleDrawerToggle = () => {\r\n    setMobileOpen(!mobileOpen);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <CssBaseline />\r\n      <AppBar position=\"fixed\" className={classes.appBar}>\r\n        <Toolbar>\r\n          <IconButton\r\n            color=\"inherit\"\r\n            aria-label=\"open drawer\"\r\n            edge=\"start\"\r\n            onClick={handleDrawerToggle}\r\n            className={classes.menuButton}\r\n          >\r\n            <MenuIcon />\r\n          </IconButton>\r\n          <img src={logo} height=\"30\" width=\"30\" alt=\"logo\" />\r\n          <Typography variant=\"h6\" className={classes.title}>\r\n            &nbsp;Data Miner\r\n          </Typography>\r\n        </Toolbar>\r\n      </AppBar>\r\n        <SideDrawer \r\n          theme={theme}\r\n          container={container}\r\n          handleDrawerToggle={handleDrawerToggle}\r\n          mobileOpen={mobileOpen}\r\n          setMobileOpen={setMobileOpen}\r\n        />\r\n      <main className={classes.content}>\r\n        <div style={{ marginTop: \"70px\" }}>\r\n            {props.children}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nHeader.propTypes = {\r\n  container: PropTypes.any,\r\n};\r\n\r\nexport default Header;","import React from 'react';\r\n\r\nconst Dashboard = () => {\r\n    return (\r\n        <div>\r\n            fg\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Dashboard;","import * as tfdata from \"@tensorflow/tfjs-data\";\r\nimport * as tfcore from \"@tensorflow/tfjs-core\";\r\nimport * as tfvis from \"@tensorflow/tfjs-vis\";\r\n\r\nexport function ReadCSV(url, delimiter) {\r\n    return tfcore.tidy(() => {\r\n        const data = tfdata.csv(url, {\r\n            hasHeader: true,\r\n            delimiter: delimiter\r\n        });\r\n        return data;\r\n    })\r\n}\r\nexport function SetDifference(a, b) {\r\n    return a.filter(x => !b.includes(x));\r\n}\r\n\r\nexport function RemoveNode(node) {\r\n    const nodeV = document.getElementById(node);\r\n    if (nodeV != null)\r\n        nodeV.remove();\r\n}\r\n\r\nexport function CreateTensor(data, labels) {\r\n    const arr = [];\r\n    return tfcore.tidy(() => {\r\n        for (const label of labels)\r\n            arr.push(data[label]);\r\n        return tfcore.tensor(arr);\r\n    });\r\n}\r\n\r\nexport function Zip(a, b) {\r\n    const c = a.map(function (e, i) {\r\n        return [e, b[i]];\r\n    });\r\n    return c;\r\n}\r\nexport async function DrawChart(surface, x, y, preds) {\r\n    const series_names = [];\r\n    const series = [];\r\n    for (let i = 0; i < x[0].length; ++i) {\r\n        series_names.push(\"X \" + i + \" Y\");\r\n        series.push(Zip(x, y).map(([x, y]) => { return { x: x[i], y }; }));\r\n        series_names.push(\"X \" + i + \" PRED\");\r\n        series.push(Zip(x, preds).map(([x, y]) => { return { x: x[i], y }; }));\r\n    }\r\n    const data = { values: series, series: series_names }\r\n    await tfvis.render.scatterplot(surface, data);\r\n}\r\n","import React, { useContext, useState } from 'react';\r\nimport MagicDropzone from 'react-magic-dropzone';\r\nimport { csvContext } from '../context/csv-context';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { ReadCSV } from '../ml/utils';\r\n\r\nconst CsvReader = () => {\r\n    const { fetchCsv } = useContext(csvContext);\r\n    // eslint-disable-next-line\r\n    const [delimiter, setDelimiter] = useState(',');\r\n    const onDrop = async (accepted, rejected, links) => {\r\n        if (accepted && accepted.length > 0) {\r\n            const url = accepted[0].preview;\r\n            const data = ReadCSV(url, delimiter);\r\n            fetchCsv(data);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Paper style={{ margin: '10px', padding: '10px' }}>\r\n            <MagicDropzone className=\"dropzone\" accept=\".csv\" multiple={false} onDrop={onDrop}>\r\n                <div className=\"center-div-wrap\">\r\n                    <div style={{ display: 'block' }}>\r\n                        <p>Drag/drop csv files over here</p>\r\n                    </div>\r\n                </div>\r\n            </MagicDropzone>\r\n        </Paper>\r\n    )\r\n}\r\n\r\nexport default CsvReader;","import React, { useState, useEffect, useContext } from 'react';\r\nimport { csvContext } from '../context/csv-context';\r\nimport MUIDataTable from \"mui-datatables\";\r\n\r\nconst CsvTable = () => {\r\n    const { csv } = useContext(csvContext);\r\n    const [columns, setColumns] = useState([])\r\n    const [data, setData] = useState([]);\r\n\r\n    useEffect( () => {\r\n        if (csv) {\r\n            async function Fetch() {\r\n                setColumns(await csv.columnNames());\r\n                setData(await csv.toArray())\r\n            }\r\n            Fetch();\r\n        }\r\n    }, [csv])\r\n\r\n    const options = {\r\n        filterType: \"dropdown\",\r\n        responsive: \"scroll\"\r\n    };\r\n\r\n    return (\r\n        <div className=\"csv-table\">\r\n            {csv ? (\r\n                <MUIDataTable\r\n                    title={\"Data Table\"}\r\n                    data={data}\r\n                    columns={columns}\r\n                    options={\r\n\r\n                        options}\r\n                />\r\n            ) : (\r\n                    <div style={{ textAlign: 'center' }}>\r\n                        <h3>No Data Found</h3>\r\n                    </div>\r\n                )}\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CsvTable;","import React from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport CsvReader from './CsvReader';\r\nimport CsvTable from './CsvTable';\r\n\r\nconst Overview = () => {\r\n    return (\r\n        <div>\r\n            <Grid container>\r\n                <Grid item md={6} xs={12}>\r\n                    <CsvReader />\r\n                    <CsvTable />\r\n                </Grid>\r\n            </Grid>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Overview;","import * as tf from \"@tensorflow/tfjs\";\r\n\r\nexport function Normalize(tensor) {\r\n    return tf.tidy(() => {\r\n        const max = tensor.max();\r\n        const min = tensor.min();\r\n        const normalized = NormalizeValRaw(max, min, tensor);\r\n        return { max, min, value: normalized };\r\n    });\r\n}\r\nexport function NormalizeValRaw(max, min, value) {\r\n    return tf.tidy(() => {\r\n        const std = max.sub(min)\r\n        const num = value.sub(min)\r\n        const normalized = num.div(std)\r\n        return normalized;\r\n    });\r\n}\r\nexport function NormalizeVar(val, pred) {\r\n    return tf.tidy(() => { return NormalizeValRaw(val.max, val.min, pred); })\r\n}\r\nexport function ScaleBackValRaw(max, min, pred) {\r\n    return tf.tidy(() => {\r\n        const std = max.sub(min)\r\n        const num = pred.mul(std)\r\n        const scaled = num.add(min)\r\n        return scaled;\r\n    });\r\n}\r\nexport function ScaleBackValWithTensor(val, pred) {\r\n    return tf.tidy(() => {\r\n        return ScaleBackValRaw(val.max, val.min, tf.tensor(pred))\r\n    });\r\n}\r\nexport function ScaleBackVal(val, pred) {\r\n    return tf.tidy(() => {\r\n        return ScaleBackValRaw(val.max, val.min, pred);\r\n    });\r\n}\r\n\r\nexport function InputDimSize(tensor) {\r\n    return tf.tidy(() => tensor.shape[1])\r\n}\r\nexport function RootMeanSquareError(yTrue, yPred) {\r\n    return tf.tidy(() => {\r\n        // Scale the the first column (0-1 shape indicator) of `yTrue` in order\r\n        // to ensure balanced contributions to the final loss value\r\n        // from shape and bounding-box predictions.\r\n        return tf.sqrt(tf.metrics.meanSquaredError(yTrue, yPred));\r\n    });\r\n}\r\n\r\nexport function DisposeValue(val) {\r\n    val.value.dispose();\r\n    val.max.dispose();\r\n    val.min.dispose();\r\n}\r\nexport function DisposeValues(...vals) {\r\n    for (const val of vals)\r\n        DisposeValue(val);\r\n}\r\nexport async function ExtractSelectedLabelsFromCSV(csv, selectedCols = []) {\r\n    const data = await csv.toArray();\r\n    return ExtractSelectedLabels(data, selectedCols);\r\n}\r\nexport function ExtractSelectedLabels(data, selectedCols = []) {\r\n    if (selectedCols.length === 0)\r\n        return data;\r\n    const results = [];\r\n    for (const kv of data) {\r\n        const result = {};\r\n        for (const colName in kv) {\r\n            if (!selectedCols.includes(colName))\r\n                continue;\r\n            const value = kv[colName];\r\n            result[colName] = value;\r\n        }\r\n        results.push(result);\r\n    }\r\n    return results;\r\n}\r\nexport async function ConvertCSVToRawArrays(csv, labelCol, allCols = [], normalize = false) {\r\n    const data = await csv.toArray();\r\n    const [xT, yT] = SplitIntoInputAndLabel(data, labelCol, allCols, normalize);\r\n\r\n    const x = await xT.value.array();\r\n    const y = await yT.value.array();\r\n\r\n    DisposeValues(xT, yT);\r\n    return [x, y];\r\n}\r\nfunction ExtractInformation(raw, data, normalize = true) {\r\n    return tf.tidy(() => {\r\n        const value = {\r\n            value: [],\r\n            max: [],\r\n            min: []\r\n        };\r\n        for (let i = 0; i < data.length; ++i)\r\n            value.value.push([]);\r\n\r\n        for (const colName in raw) {\r\n            const max = raw[colName].max;\r\n            const min = raw[colName].min;\r\n            value.max.push(max);\r\n            value.min.push(min);\r\n            for (let i = 0; i < raw[colName].value.length; ++i) {\r\n                if (normalize)\r\n                    raw[colName].value[i] = (raw[colName].value[i] - min) / (max - min)\r\n                value.value[i].push(raw[colName].value[i]);\r\n            }\r\n        }\r\n        value.max = tf.tensor(value.max);\r\n        value.min = tf.tensor(value.min);\r\n        value.value = tf.tensor(value.value);\r\n        return value;\r\n    });\r\n}\r\nexport function ArrayRemoveColumn(array, remIdx = []) {\r\n    return array.map((arr) => {\r\n        return arr.filter((_, idx) => !remIdx.includes(idx));\r\n    });\r\n};\r\nexport function SplitIntoInputAndLabel(data, labelCol, allCols = [], normalize = true) {\r\n    return tf.tidy(() => {\r\n        let x_raw = {};\r\n        let y_raw = {};\r\n\r\n        for (const kv of data)\r\n            for (const colName in kv) {\r\n                if (allCols.length !== 0 && !allCols.includes(colName)) {\r\n                    continue;\r\n                }\r\n                const value = kv[colName];\r\n                if (labelCol.includes(colName)) {\r\n                    if (y_raw[colName] == null)\r\n                        y_raw[colName] = { value: [], min: Number.MAX_SAFE_INTEGER, max: Number.MIN_SAFE_INTEGER }\r\n                    y_raw[colName].max = Math.max(y_raw[colName].max, value);\r\n                    y_raw[colName].min = Math.min(y_raw[colName].min, value);\r\n                    y_raw[colName].value.push(value);\r\n                } else {\r\n                    if (x_raw[colName] == null)\r\n                        x_raw[colName] = { value: [], min: Number.MAX_SAFE_INTEGER, max: Number.MIN_SAFE_INTEGER }\r\n                    x_raw[colName].value.push(value);\r\n                    x_raw[colName].max = Math.max(x_raw[colName].max, value);\r\n                    x_raw[colName].min = Math.min(x_raw[colName].min, value);\r\n                }\r\n            }\r\n        const x = ExtractInformation(x_raw, data, normalize)\r\n        const y = ExtractInformation(y_raw, data, normalize)\r\n        return [x, y];\r\n    });\r\n}","import * as tf from \"@tensorflow/tfjs\";\r\nimport { InputDimSize as TensorDimSize, RootMeanSquareError, ScaleBackVal, ScaleBackValWithTensor } from \"./utils\";\r\n\r\nexport function CreateModel(outs, inputs, l1, l2, learningRate) {\r\n    return tf.tidy(() => {\r\n        const regularizer = tf.regularizers.l1l2({\r\n            l1: l1,\r\n            l2: l2\r\n        });\r\n        const model = tf.sequential();\r\n        model.add(\r\n            tf.layers.dense({\r\n                units: outs, // Simple Linear Regression\r\n                inputShape: [inputs],\r\n                kernelRegularizer: regularizer\r\n            })\r\n        );\r\n        model.compile({\r\n            loss: RootMeanSquareError,\r\n            optimizer: tf.train.sgd(learningRate),\r\n            metrics: [RootMeanSquareError]\r\n        });\r\n        return model;\r\n    });\r\n}\r\nexport async function Fit(\r\n    xTrain, yTrain,\r\n    OnEpochEndCallBack = async (_) => { },\r\n    l1 = 0.0, l2 = 0.0,\r\n    epochs = 100, batchSize = 16, validationSplit = 10,\r\n    learningRate = 0.01) {\r\n\r\n    const model = CreateModel(TensorDimSize(yTrain), TensorDimSize(xTrain), l1, l2, learningRate);\r\n    const logs = [];\r\n\r\n    await model.fit(xTrain, yTrain, {\r\n        batchSize: batchSize,\r\n        epochs: epochs,\r\n        shuffle: true,\r\n        validationSplit: (validationSplit / 100), // In Percentage\r\n        callbacks: {\r\n            onEpochEnd: async (epoch, log) => {\r\n                logs.push({\r\n                    rms_loss: log.loss,\r\n                    val_rms_loss: log.val_loss,\r\n                    epoch: epoch\r\n                });\r\n                // Perform Action with All Train Logs\r\n                await OnEpochEndCallBack(logs);\r\n            }\r\n        }\r\n    });\r\n    return model;\r\n}\r\n\r\nexport function Predict(model, value, args = () => { }) {\r\n    return tf.tidy(() => {\r\n        return model.predict(tf.tensor([value]), args);\r\n    });\r\n}\r\nexport function Evaluate(model, x, y, args = () => { }) {\r\n    return tf.tidy(() => {\r\n        return model.evaluate(x, y, args);\r\n    });\r\n}\r\nexport async function PredictWithScaling(model, x, y) {\r\n    const predT = Predict(model, x);\r\n    const scaledT = ScaleBackVal(y, predT);\r\n    console.log(await predT.array(), await scaledT.array());\r\n    predT.dispose();\r\n    const prediction = (await scaledT.array())[0];\r\n    scaledT.dispose();\r\n    return prediction;\r\n}\r\nexport async function PredictDataset(model, x, y) {\r\n    let preds_list = [];\r\n    for (const val of await x.value.array()) {\r\n        const pred = Predict(model, val);\r\n        preds_list.push(pred);\r\n    }\r\n    let preds_raw = preds_list.map(pred => pred.array());\r\n    preds_raw = await Promise.all(preds_raw);\r\n    preds_raw = preds_raw.map(pred => pred[0]);\r\n\r\n    for (const pred_dispose of preds_list)\r\n        pred_dispose.dispose();\r\n    const predsT = ScaleBackValWithTensor(y, preds_raw);\r\n    const preds = await predsT.array();\r\n\r\n    const x_valsT = ScaleBackVal(x, x.value);\r\n    const x_vals = await x_valsT.array();\r\n\r\n    const y_valsT = ScaleBackVal(y, y.value);\r\n    const y_vals = await y_valsT.array();\r\n\r\n    predsT.dispose();\r\n    x_valsT.dispose();\r\n    y_valsT.dispose();\r\n    console.log(preds, x_vals, y_vals);\r\n    return [preds, x_vals, y_vals]\r\n}\r\n","import React, { useState, useEffect, useContext } from 'react';\r\nimport { Formik } from 'formik';\r\nimport Button from '@material-ui/core/Button';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport { csvContext } from '../context/csv-context';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport * as Utils from \"./utils\";\r\nimport { SplitIntoInputAndLabel, NormalizeVar, DisposeValues } from '../../ML/utils';\r\nimport * as LinearRegressionApply from \"../../ML/linreg\";\r\nimport * as tfvis from \"@tensorflow/tfjs-vis\";\r\nimport * as tf from \"@tensorflow/tfjs-core\";\r\nimport Grid from '@material-ui/core/Grid';\r\nimport CsvReader from '../utils/CsvReader';\r\nimport CsvTable from '../utils/CsvTable';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    paper: {\r\n        margin: theme.spacing(8, 4),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing(1),\r\n        width: '80%',\r\n    },\r\n    selectEmpty: {\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    form: {\r\n        width: '90%', // Fix IE 11 issue.\r\n        marginTop: theme.spacing(1),\r\n        marginLeft: '20px',\r\n    },\r\n    submit: {\r\n        width: '100px',\r\n    },\r\n}));\r\n\r\nlet model = null;\r\nconst vals = { x: null, y: null };\r\nconst lossContainer = { name: 'show.loss', tab: 'Loss' };\r\n\r\n// async function PredictSingleValue(model, data, xCols, x, y) {\r\n//     const val_pred = Utils.CreateTensor(data, xCols);\r\n//     const pred = await val_pred.data();\r\n//     const val_pred_norm = NormalizeVar(x, val_pred);\r\n//     const prediction = LinearRegressionApply.Predict(model, await val_pred_norm.array());\r\n//     const resT = ScaleBackVal(y, prediction);\r\n//     const res = (await resT.array())[0];\r\n//     val_pred.dispose();\r\n//     val_pred_norm.dispose();\r\n//     resT.dispose();\r\n//     prediction.dispose();\r\n//     return [pred, res];\r\n// }\r\n\r\nasync function GetDataFromCSV(csv, rowIdx, columns, predCol) {\r\n    const data = (await csv.toArray())[rowIdx];\r\n    const columnNames = Utils.SetDifference(columns, [predCol]);\r\n    console.log(columnNames, predCol);\r\n    const values = Object.keys(data).filter(key => columnNames.includes(key)).map(val => data[val]);\r\n    return values.join(',');\r\n}\r\n\r\nasync function PredictValues(values) {\r\n    const valuesT = tf.tensor(values);\r\n    const valuesNormT = NormalizeVar(vals.x, valuesT)\r\n    valuesT.dispose();\r\n    const valuesNorm = await valuesNormT.array();\r\n    valuesNormT.dispose();\r\n    const pred = await LinearRegressionApply.PredictWithScaling(model, valuesNorm, vals.y);\r\n    console.log(pred);\r\n    return pred;\r\n}\r\n\r\nasync function Perform(csv, labelCol, columnNames, l1, l2, epochs, batchSize, validationSplit, learningRate) {\r\n    if (vals.x != null && vals.y != null && model != null) {\r\n        DisposeValues(vals.x, vals.y);\r\n        console.log(\"33\");\r\n        model.dispose();\r\n        model = null;\r\n    }\r\n    const data = await csv.toArray();\r\n    console.log(labelCol);\r\n    Utils.RemoveNode(\"tfjs-visor-container\");\r\n    tfvis.visor().open();\r\n    const [x, y] = SplitIntoInputAndLabel(data, labelCol, columnNames);\r\n    model = await LinearRegressionApply.Fit(x.value, y.value, async (logs) => {\r\n        await tfvis.show.history(lossContainer, logs, [\"rms_loss\", \"val_rms_loss\"]);\r\n    }, l1, l2, epochs, batchSize, validationSplit, learningRate);\r\n    model.summary();\r\n    await tfvis.show.modelSummary({ name: 'Model', tab: 'Model' }, model);\r\n\r\n    const [preds, x_vals, y_vals] = await LinearRegressionApply.PredictDataset(model, x, y);\r\n    await Utils.DrawChart({ name: 'Line chart', tab: 'Plot' }, x_vals, y_vals, preds);\r\n    vals.x = x;\r\n    vals.y = y;\r\n\r\n    console.log(\"Final Memory Usage\", tf.memory());\r\n}\r\n\r\nexport default function LinearRegression() {\r\n    const classes = useStyles();\r\n    const [error, setError] = useState('')\r\n    const { csv } = useContext(csvContext);\r\n    const [columnNames, setColumnNames] = useState([]);\r\n    const [ycolumn, setYcolumn] = useState();\r\n    const [predInput, setPredInput] = useState(\"9,7.5,3.5\");\r\n    const [prediction, setPrediction] = useState(\"\");\r\n    const [performPred, setPerformedPred] = useState(false);\r\n    useEffect(() => {\r\n        if (csv == null)\r\n            return;\r\n        async function LoadColumnNames() {\r\n            const columns = await csv.columnNames();\r\n            setColumnNames(columns);\r\n            setYcolumn(columns[columns.length - 1]);\r\n        }\r\n        LoadColumnNames();\r\n    }, [csv, setColumnNames]);\r\n\r\n    return (\r\n        <Grid container>\r\n            <Grid item md={6} xs={12}>\r\n                <CsvReader />\r\n                <CsvTable />\r\n            </Grid>\r\n            <Grid item md={6} xs={12}>\r\n                {csv && ycolumn ? (\r\n                    <div style={{ padding: '10px' }}>\r\n                        {error && (\r\n                            <Alert onClose={() => setError('')} severity=\"error\">\r\n                                {error}\r\n                            </Alert>\r\n                        )}\r\n                        <Formik\r\n                            enableReinitialize\r\n                            initialValues={{\r\n                                xColumns: columnNames,\r\n                                selectedColumn: ycolumn,\r\n                                l1: 0.0,\r\n                                l2: 0.0,\r\n                                batchSize: 16,\r\n                                validationSplit: 10,\r\n                                learningRate: 0.01,\r\n                                epochs: 50,\r\n                            }}\r\n                            validate={values => {\r\n                                const errors = {};\r\n                                if (!values.selectedColumn) {\r\n                                    errors.selectedColumn = 'Required';\r\n                                }\r\n                                if (values.l1 == null) {\r\n                                    errors.l1 = 'Required';\r\n                                }\r\n                                if (values.l1 < 0) {\r\n                                    errors.l1 = 'Invalid L1 value';\r\n                                }\r\n                                if (values.l2 == null) {\r\n                                    errors.l2 = 'Required';\r\n                                }\r\n                                if (values.l2 < 0) {\r\n                                    errors.l2 = 'Invalid L2 value';\r\n                                }\r\n                                if (!values.batchSize) {\r\n                                    errors.batchSize = 'Required';\r\n                                }\r\n                                if (!values.validationSplit) {\r\n                                    errors.validationSplit = 'Required';\r\n                                }\r\n                                if (values.validationSplit < 5) {\r\n                                    errors.validationSplit = 'Invalid Validation Split';\r\n                                }\r\n                                if (!values.learningRate) {\r\n                                    errors.learningRate = 'Required';\r\n                                }\r\n                                if (values.learningRate < 0 || values.learningRate > 1) {\r\n                                    errors.learningRate = 'Invalid Learning Rate';\r\n                                }\r\n                                if (!values.epochs) {\r\n                                    errors.epochs = 'Required';\r\n                                }\r\n                                if (values.epochs < 1) {\r\n                                    errors.epochs = 'Invalid Number of Epochs';\r\n                                }\r\n\r\n                                return errors;\r\n                            }}\r\n                            onSubmit={(values, { setSubmitting }) => {\r\n                                const submitFormHandler = async values => {\r\n                                    let xCols = [...values.xColumns, values.selectedColumn]\r\n                                    xCols = [...new Set(xCols)]\r\n                                    console.log(xCols)\r\n                                    try {\r\n                                        setPerformedPred(false);\r\n                                        await Perform(\r\n                                            csv,\r\n                                            [values.selectedColumn],\r\n                                            xCols,\r\n                                            values.l1,\r\n                                            values.l2,\r\n                                            values.epochs,\r\n                                            values.batchSize,\r\n                                            values.validationSplit,\r\n                                            values.learningRate)\r\n                                        setPerformedPred(true);\r\n                                        setPredInput(await GetDataFromCSV(csv, 0, xCols, ycolumn));\r\n                                    } catch (err) {\r\n                                        console.error(err);\r\n                                        setError('Error occored in Training');\r\n                                        setPerformedPred(false);\r\n                                    }\r\n                                }\r\n                                submitFormHandler(values);\r\n                                setSubmitting(false)\r\n                            }}\r\n                        >{({\r\n                            values,\r\n                            errors,\r\n                            touched,\r\n                            handleChange,\r\n                            handleBlur,\r\n                            handleSubmit,\r\n                            isSubmitting,\r\n                            setFieldValue,\r\n                        }) => (\r\n                                <form className={classes.form} onSubmit={handleSubmit}>\r\n                                    <Grid container spacing={1}>\r\n                                        <Grid item xs={12}>\r\n                                            <Paper style={{ backgroundColor: 'black', padding: '20px' }}>\r\n                                                Select the attributes for training the model\r\n                                        </Paper>\r\n                                            <Grid container spacing={1}>\r\n                                                {columnNames.map((column, index) =>\r\n                                                    <Grid item xs={4} key={index}>\r\n                                                        {column !== values.selectedColumn && (\r\n                                                            <FormControlLabel\r\n                                                                control={<Checkbox\r\n                                                                    checked={values.xColumns.includes(column)}\r\n                                                                    color=\"default\"\r\n                                                                    name={column}\r\n                                                                    onChange={(event) => {\r\n                                                                        let array = values.xColumns;\r\n                                                                        if (array.includes(event.target.name)) {\r\n                                                                            const newArray = array.filter((col) => col !== event.target.name);\r\n                                                                            setFieldValue('xColumns', newArray, false)\r\n                                                                        } else {\r\n                                                                            array.push(event.target.name)\r\n                                                                            setFieldValue('xColumns', array, false)\r\n                                                                        }\r\n                                                                    }}\r\n                                                                />}\r\n                                                                label={column}\r\n                                                            />\r\n                                                        )}\r\n                                                    </Grid>\r\n                                                )}\r\n                                            </Grid>\r\n                                        </Grid>\r\n                                        <Grid item xs={12}>\r\n                                            <TextField id=\"select\"\r\n                                                label=\"Y Attribute\" select\r\n                                                fullWidth\r\n                                                value={values.selectedColumn}\r\n                                                name=\"selectedColumn\"\r\n                                                onChange={handleChange}\r\n                                                variant=\"filled\"\r\n                                            >\r\n                                                {columnNames.map((column, index) =>\r\n                                                    <MenuItem key={index} value={column}>{column}</MenuItem>\r\n                                                )}\r\n                                            </TextField>\r\n                                            <FormHelperText>Select a column</FormHelperText>\r\n                                        </Grid>\r\n                                        <Grid item xs={6}>\r\n                                            <TextField\r\n                                                variant=\"filled\"\r\n                                                label=\"L1\"\r\n                                                name=\"l1\"\r\n                                                type=\"number\"\r\n                                                onChange={handleChange}\r\n                                                onBlur={handleBlur}\r\n                                                value={values.l1}\r\n\r\n                                            />\r\n                                            <div style={{ margin: \"10px\", color: \"red\" }}>\r\n                                                {errors.l1 && touched.l1 && errors.l1}\r\n                                            </div>\r\n                                        </Grid>\r\n                                        <Grid item xs={6}>\r\n                                            <TextField\r\n                                                variant=\"filled\"\r\n                                                label=\"L2\"\r\n                                                name=\"l2\"\r\n                                                type=\"number\"\r\n                                                onChange={handleChange}\r\n                                                onBlur={handleBlur}\r\n                                                value={values.l2}\r\n                                            />\r\n                                            <div style={{ margin: \"10px\", color: \"red\" }}>\r\n                                                {errors.l2 && touched.l2 && errors.l2}\r\n                                            </div>\r\n                                        </Grid>\r\n                                        <Grid item xs={6}>\r\n                                            <TextField\r\n                                                variant=\"filled\"\r\n                                                label=\"Batch Size\"\r\n                                                name=\"batchSize\"\r\n                                                type=\"number\"\r\n                                                onChange={handleChange}\r\n                                                onBlur={handleBlur}\r\n                                                value={values.batchSize}\r\n                                            />\r\n                                            <div style={{ margin: \"10px\", color: \"red\" }}>\r\n                                                {errors.batchSize && touched.batchSize && errors.batchSize}\r\n                                            </div>\r\n                                        </Grid>\r\n                                        <Grid item xs={6}>\r\n                                            <TextField\r\n                                                variant=\"filled\"\r\n                                                label=\"Validation Split\"\r\n                                                name=\"validationSplit\"\r\n                                                type=\"number\"\r\n                                                onChange={handleChange}\r\n                                                onBlur={handleBlur}\r\n                                                value={values.validationSplit}\r\n                                            />\r\n                                            <div style={{ margin: \"10px\", color: \"red\" }}>\r\n                                                {errors.validationSplit && touched.validationSplit && errors.validationSplit}\r\n                                            </div>\r\n                                        </Grid>\r\n                                        <Grid item xs={6}>\r\n                                            <TextField\r\n                                                variant=\"filled\"\r\n                                                label=\"Learning Rate\"\r\n                                                name=\"learningRate\"\r\n                                                type=\"number\"\r\n                                                onChange={handleChange}\r\n                                                onBlur={handleBlur}\r\n                                                value={values.learningRate}\r\n                                            />\r\n                                            <div style={{ margin: \"10px\", color: \"red\" }}>\r\n                                                {errors.learningRate && touched.learningRate && errors.learningRate}\r\n                                            </div>\r\n                                        </Grid>\r\n                                        <Grid item xs={6}>\r\n                                            <TextField\r\n                                                variant=\"filled\"\r\n                                                label=\"Epochs\"\r\n                                                name=\"epochs\"\r\n                                                type=\"number\"\r\n                                                onChange={handleChange}\r\n                                                onBlur={handleBlur}\r\n                                                value={values.epochs}\r\n                                            />\r\n                                            <div style={{ margin: \"10px\", color: \"red\" }}>\r\n                                                {errors.epochs && touched.epochs && errors.epochs}\r\n                                            </div>\r\n                                        </Grid>\r\n                                    </Grid>\r\n                                    <div style={{ margin: '20px', textAlign: 'center' }}>\r\n                                        <Button\r\n                                            style={{ width: '100%' }}\r\n                                            type=\"submit\"\r\n                                            fullWidth\r\n                                            variant=\"contained\"\r\n                                            color=\"primary\"\r\n                                            className={classes.submit}\r\n                                            disabled={isSubmitting}\r\n                                        >\r\n                                            Perform\r\n                                    </Button>\r\n                                    </div>\r\n                                </form>\r\n                            )}\r\n                        </Formik>\r\n                        {\r\n                            performPred &&\r\n                            <>\r\n                                <TextField\r\n                                    variant=\"filled\"\r\n                                    label=\"Predictor\"\r\n                                    name=\"Predictor\"\r\n                                    value={predInput}\r\n                                    onChange={(_) => setPredInput(_.target.value)}\r\n                                />\r\n                                <Button onClick={() => tfvis.visor().open()}>Show Charts</Button>\r\n                                <Button onClick={async () => { setPrediction(''); setPrediction(await PredictValues(String(predInput).split(',').map(value => Number(value)))); }}>PREDICT</Button>\r\n                            </>\r\n                        }\r\n                        {\r\n                            performPred && prediction !== \"\" &&\r\n                            <Alert onClose={() => { setPrediction('') }} severity=\"success\">\r\n                                The predicted value is {prediction}\r\n                            </Alert>\r\n                        }\r\n                    </div>\r\n                ) : (\r\n                        <div style={{ paddingTop: '50px', textAlign: 'center' }}>\r\n                            Please select a dataset\r\n                        </div>\r\n                    )}\r\n            </Grid>\r\n\r\n        </Grid >\r\n    )\r\n}\r\n\r\n","let dt = (function () {\r\n          \r\n    /**\r\n     * Creates an instance of DecisionTree\r\n     *\r\n     * @constructor\r\n     * @param builder - contains training set and\r\n     *                  some configuration parameters\r\n     */\r\n    function DecisionTree(builder) {        \r\n        this.root = buildDecisionTree({\r\n            trainingSet: builder.trainingSet,\r\n            ignoredAttributes: arrayToHashSet(builder.ignoredAttributes),\r\n            categoryAttr: builder.categoryAttr || 'category',\r\n            minItemsCount: builder.minItemsCount || 1,\r\n            entropyThrehold: builder.entropyThrehold || 0.01,\r\n            maxTreeDepth: builder.maxTreeDepth || 70\r\n        });\r\n    }\r\n          \r\n    DecisionTree.prototype.predict = function (item) {\r\n        return predict(this.root, item);\r\n    }\r\n\r\n    /**\r\n     * Creates an instance of RandomForest\r\n     * with specific number of trees\r\n     *\r\n     * @constructor\r\n     * @param builder - contains training set and some\r\n     *                  configuration parameters for\r\n     *                  building decision trees\r\n     */\r\n    function RandomForest(builder, treesNumber) {\r\n        this.trees = buildRandomForest(builder, treesNumber);\r\n    }\r\n          \r\n    RandomForest.prototype.predict = function (item) {\r\n        return predictRandomForest(this.trees, item);\r\n    }\r\n    \r\n    /**\r\n     * Transforming array to object with such attributes \r\n     * as elements of array (afterwards it can be used as HashSet)\r\n     */\r\n    function arrayToHashSet(array) {\r\n        let hashSet = {};\r\n        if (array) {\r\n            for(let i in array) {\r\n                let attr = array[i];\r\n                hashSet[attr] = true;\r\n            }\r\n        }\r\n        return hashSet;\r\n    }\r\n    \r\n    /**\r\n     * Calculating how many objects have the same \r\n     * values of specific attribute.\r\n     *\r\n     * @param items - array of objects\r\n     *\r\n     * @param attr  - letiable with name of attribute, \r\n     *                which embedded in each object\r\n     */\r\n    function countUniqueValues(items, attr) {\r\n        let counter = {};\r\n\r\n        // detecting different values of attribute\r\n        for (let i = items.length - 1; i >= 0; i--) {\r\n            // items[i][attr] - value of attribute\r\n            counter[items[i][attr]] = 0;\r\n        }\r\n          \r\n        // counting number of occurrences of each of values\r\n        // of attribute\r\n        for (let i = items.length - 1; i >= 0; i--) {\r\n            counter[items[i][attr]] += 1;\r\n        }\r\n\r\n        return counter;\r\n    }\r\n    \r\n    /**\r\n     * Calculating entropy of array of objects \r\n     * by specific attribute.\r\n     *\r\n     * @param items - array of objects\r\n     *\r\n     * @param attr  - letiable with name of attribute, \r\n     *                which embedded in each object\r\n     */\r\n    function entropy(items, attr) {\r\n        // counting number of occurrences of each of values\r\n        // of attribute\r\n        let counter = countUniqueValues(items, attr);\r\n\r\n        let entropy = 0;\r\n        let p;\r\n        for (let i in counter) {\r\n            p = counter[i] / items.length;\r\n            entropy += -p * Math.log(p);\r\n        }\r\n\r\n        return entropy;\r\n    }\r\n          \r\n    /**\r\n     * Splitting array of objects by value of specific attribute, \r\n     * using specific predicate and pivot.\r\n     *\r\n     * Items which matched by predicate will be copied to \r\n     * the new array called 'match', and the rest of the items \r\n     * will be copied to array with name 'notMatch'\r\n     *\r\n     * @param items - array of objects\r\n     *\r\n     * @param attr  - letiable with name of attribute,\r\n     *                which embedded in each object\r\n     *\r\n     * @param predicate - function(x, y) \r\n     *                    which returns 'true' or 'false'\r\n     *\r\n     * @param pivot - used as the second argument when \r\n     *                calling predicate function:\r\n     *                e.g. predicate(item[attr], pivot)\r\n     */\r\n    function split(items, attr, predicate, pivot) {\r\n        let match = [];\r\n        let notMatch = [];\r\n\r\n        let item,\r\n            attrValue;\r\n          \r\n        for (let i = items.length - 1; i >= 0; i--) {\r\n            item = items[i];\r\n            attrValue = item[attr];\r\n\r\n            if (predicate(attrValue, pivot)) {\r\n                match.push(item);\r\n            } else {\r\n                notMatch.push(item);\r\n            }\r\n        };\r\n\r\n        return {\r\n            match: match,\r\n            notMatch: notMatch\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Finding value of specific attribute which is most frequent\r\n     * in given array of objects.\r\n     *\r\n     * @param items - array of objects\r\n     *\r\n     * @param attr  - letiable with name of attribute, \r\n     *                which embedded in each object\r\n     */\r\n    function mostFrequentValue(items, attr) {\r\n        // counting number of occurrences of each of values\r\n        // of attribute\r\n        let counter = countUniqueValues(items, attr);\r\n\r\n        let mostFrequentCount = 0;\r\n        let mostFrequentValue;\r\n\r\n        for (let value in counter) {\r\n            if (counter[value] > mostFrequentCount) {\r\n                mostFrequentCount = counter[value];\r\n                mostFrequentValue = value;\r\n            }\r\n        };\r\n\r\n        return mostFrequentValue;\r\n    }\r\n          \r\n    let predicates = {\r\n        '===': function (a, b) { return a === b },\r\n        '>=': function (a, b) { return a >= b }\r\n    };\r\n\r\n    /**\r\n     * Function for building decision tree\r\n     */\r\n    function buildDecisionTree(builder) {\r\n\r\n        let trainingSet = builder.trainingSet;\r\n        let minItemsCount = builder.minItemsCount;\r\n        let categoryAttr = builder.categoryAttr;\r\n        let entropyThrehold = builder.entropyThrehold;\r\n        let maxTreeDepth = builder.maxTreeDepth;\r\n        let ignoredAttributes = builder.ignoredAttributes;\r\n\r\n        if ((maxTreeDepth === 0) || (trainingSet.length <= minItemsCount)) {\r\n            // restriction by maximal depth of tree\r\n            // or size of training set is to small\r\n            // so we have to terminate process of building tree\r\n            return {\r\n                category: mostFrequentValue(trainingSet, categoryAttr)\r\n            };\r\n        }\r\n\r\n        let initialEntropy = entropy(trainingSet, categoryAttr);\r\n\r\n        if (initialEntropy <= entropyThrehold) {\r\n            // entropy of training set too small\r\n            // (it means that training set is almost homogeneous),\r\n            // so we have to terminate process of building tree\r\n            return {\r\n                category: mostFrequentValue(trainingSet, categoryAttr)\r\n            };\r\n        }\r\n\r\n        // used as hash-set for avoiding the checking of split by rules\r\n        // with the same 'attribute-predicate-pivot' more than once\r\n        let alreadyChecked = {};\r\n          \r\n        // this letiable expected to contain rule, which splits training set\r\n        // into subsets with smaller values of entropy (produces informational gain)\r\n        let bestSplit = {gain: 0};\r\n\r\n        for (let i = trainingSet.length - 1; i >= 0; i--) {\r\n            let item = trainingSet[i];\r\n\r\n            // iterating over all attributes of item\r\n            for (let attr in item) {\r\n                if ((attr === categoryAttr) || ignoredAttributes[attr]) {\r\n                    continue;\r\n                }\r\n\r\n                // let the value of current attribute be the pivot\r\n                let pivot = item[attr];\r\n\r\n                // pick the predicate\r\n                // depending on the type of the attribute value\r\n                let predicateName;\r\n                if (typeof pivot === 'number') {\r\n                    predicateName = '>=';\r\n                } else {\r\n                    // there is no sense to compare non-numeric attributes\r\n                    // so we will check only equality of such attributes\r\n                    predicateName = '===';\r\n                }\r\n\r\n                let attrPredPivot = attr + predicateName + pivot;\r\n                if (alreadyChecked[attrPredPivot]) {\r\n                    // skip such pairs of 'attribute-predicate-pivot',\r\n                    // which been already checked\r\n                    continue;\r\n                }\r\n                alreadyChecked[attrPredPivot] = true;\r\n\r\n                let predicate = predicates[predicateName];\r\n          \r\n                // splitting training set by given 'attribute-predicate-value'\r\n                let currSplit = split(trainingSet, attr, predicate, pivot);\r\n\r\n                // calculating entropy of subsets\r\n                let matchEntropy = entropy(currSplit.match, categoryAttr);\r\n                let notMatchEntropy = entropy(currSplit.notMatch, categoryAttr);\r\n\r\n                // calculating informational gain\r\n                let newEntropy = 0;\r\n                newEntropy += matchEntropy * currSplit.match.length;\r\n                newEntropy += notMatchEntropy * currSplit.notMatch.length;\r\n                newEntropy /= trainingSet.length;\r\n                let currGain = initialEntropy - newEntropy;\r\n\r\n                if (currGain > bestSplit.gain) {\r\n                    // remember pairs 'attribute-predicate-value'\r\n                    // which provides informational gain\r\n                    bestSplit = currSplit;\r\n                    bestSplit.predicateName = predicateName;\r\n                    bestSplit.predicate = predicate;\r\n                    bestSplit.attribute = attr;\r\n                    bestSplit.pivot = pivot;\r\n                    bestSplit.gain = currGain;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!bestSplit.gain) {\r\n            // can't find optimal split\r\n            return { category: mostFrequentValue(trainingSet, categoryAttr) };\r\n        }\r\n\r\n        // building subtrees\r\n          \r\n        builder.maxTreeDepth = maxTreeDepth - 1;\r\n\r\n        builder.trainingSet = bestSplit.match;\r\n        let matchSubTree = buildDecisionTree(builder);\r\n\r\n        builder.trainingSet = bestSplit.notMatch;\r\n        let notMatchSubTree = buildDecisionTree(builder);\r\n\r\n        return {\r\n            attribute: bestSplit.attribute,\r\n            predicate: bestSplit.predicate,\r\n            predicateName: bestSplit.predicateName,\r\n            pivot: bestSplit.pivot,\r\n            match: matchSubTree,\r\n            notMatch: notMatchSubTree,\r\n            matchedCount: bestSplit.match.length,\r\n            notMatchedCount: bestSplit.notMatch.length\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Classifying item, using decision tree\r\n     */\r\n    function predict(tree, item) {\r\n        let attr,\r\n            value,\r\n            predicate,\r\n            pivot;\r\n        \r\n        // Traversing tree from the root to leaf\r\n        while(true) {\r\n          \r\n            if (tree.category) {\r\n                // only leafs contains predicted category\r\n                return tree.category;\r\n            }\r\n\r\n            attr = tree.attribute;\r\n            value = item[attr];\r\n\r\n            predicate = tree.predicate;\r\n            pivot = tree.pivot;\r\n\r\n            // move to one of subtrees\r\n            if (predicate(value, pivot)) {\r\n                tree = tree.match;\r\n            } else {\r\n                tree = tree.notMatch;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Building array of decision trees\r\n     */\r\n    function buildRandomForest(builder, treesNumber) {\r\n        let items = builder.trainingSet;\r\n          \r\n        // creating training sets for each tree\r\n        let trainingSets = [];\r\n        for (let t = 0; t < treesNumber; t++) {\r\n            trainingSets[t] = [];\r\n        }\r\n        for (let i = items.length - 1; i >= 0 ; i--) {\r\n          // assigning items to training sets of each tree\r\n          // using 'round-robin' strategy\r\n          let correspondingTree = i % treesNumber;\r\n          trainingSets[correspondingTree].push(items[i]);\r\n        }\r\n\r\n        // building decision trees\r\n        let forest = [];\r\n        for (let t = 0; t < treesNumber; t++) {\r\n            builder.trainingSet = trainingSets[t];\r\n\r\n            let tree = new DecisionTree(builder);\r\n            forest.push(tree);\r\n        }\r\n        return forest;\r\n    }\r\n\r\n    /**\r\n     * Each of decision tree classifying item\r\n     * ('voting' that item corresponds to some class).\r\n     *\r\n     * This function returns hash, which contains \r\n     * all classifying results, and number of votes \r\n     * which were given for each of classifying results\r\n     */\r\n    function predictRandomForest(forest, item) {\r\n        let result = {};\r\n        for (let i in forest) {\r\n            let tree = forest[i];\r\n            let prediction = tree.predict(item);\r\n            result[prediction] = result[prediction] ? result[prediction] + 1 : 1;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    let exports = {};\r\n    exports.DecisionTree = DecisionTree;\r\n    exports.RandomForest = RandomForest;\r\n    return exports;\r\n})();\r\n\r\nexport default dt;","import React, { useState, useEffect, useRef, useContext } from 'react';\r\nimport dt from './utils';\r\nimport { csvContext } from '../context/csv-context';\r\nimport './DecisionTree.css';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport CsvReader from '../utils/CsvReader';\r\nimport CsvTable from '../utils/CsvTable';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FunctionsIcon from '@material-ui/icons/Functions';\r\nimport AccountTreeIcon from '@material-ui/icons/AccountTree';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        '& > *': {\r\n          margin: theme.spacing(1),\r\n          width: '25ch',\r\n        },\r\n    },\r\n    button: {\r\n        margin: theme.spacing(1),\r\n        width: '100%',\r\n    },\r\n    formControl: {\r\n      margin: theme.spacing(1),\r\n      minWidth: 120,\r\n    },\r\n    selectEmpty: {\r\n      marginTop: theme.spacing(2),\r\n    },\r\n    descDiv: {\r\n        background: '#505050', \r\n        width: '100%', \r\n        padding: '15px',\r\n        fontSize: '14px',\r\n    },\r\n    borderDiv: {\r\n        marginBottom: '20px', \r\n        padding: '10px', \r\n        borderBottom: '1px solid white',\r\n    }\r\n}));\r\n\r\nconst DecisionTree = () => {\r\n    const classes = useStyles();\r\n    const { csv } = useContext(csvContext);\r\n    const [columns, setColumns] = useState([])\r\n    const [dTree, setDTree] = useState();\r\n    const [config, setConfig] = useState({\r\n        trainingSet: null, \r\n        categoryAttr: '', \r\n        ignoredAttributes: [] \r\n    })\r\n\r\n    const [predictionForm, setPredictionForm] = useState({\r\n        columns: [],\r\n        details: {}\r\n    });\r\n\r\n    const scrollToRef = (ref) => window.scrollTo(0, ref.current.offsetTop) \r\n    const [error, setError] = useState('');\r\n    const [prediction, setPrediction] = useState('')\r\n\r\n    useEffect( () => {\r\n        if (csv) {\r\n            async function Fetch() {\r\n                setDTree(null);\r\n                dT.current.innerHTML = null\r\n                let cols = await csv.columnNames()\r\n                let [lastItem] = cols.slice(-1)\r\n                setColumns(cols);\r\n                setConfig({\r\n                    trainingSet: await csv.toArray(),\r\n                    categoryAttr: lastItem,\r\n                    ignoredAttributes: [] \r\n                })\r\n            }\r\n            Fetch();\r\n        }\r\n    }, [csv]) \r\n\r\n    useEffect(() => {\r\n        if (dTree) {\r\n            let reqCols = columns.filter(n => !config.ignoredAttributes.includes(n))\r\n            reqCols = reqCols.filter(n => n !== config.categoryAttr)\r\n            let details = {};\r\n            reqCols.forEach(col => {\r\n                details[col] = '';\r\n            });\r\n            setPredictionForm({\r\n                columns: reqCols,\r\n                details: details\r\n            })\r\n        }\r\n    }, [columns, config, dTree])\r\n\r\n    const dT = useRef();\r\n\r\n    const ignoreColumn = (event) => {\r\n        let array = config.ignoredAttributes;\r\n        if (array.includes(event.target.name)) {\r\n            const newArray = array.filter((col) => col !== event.target.name);\r\n            setConfig({\r\n                ...config,\r\n                ignoredAttributes: newArray\r\n            })\r\n        } else {\r\n            array.push(event.target.name)\r\n            setConfig({\r\n                ...config,\r\n                ignoredAttributes: array\r\n            })\r\n        }\r\n    }\r\n\r\n    const chooseCategoryAttr = (event) => {\r\n        setConfig({\r\n            ...config,\r\n            categoryAttr: event.target.value\r\n        })\r\n    }\r\n\r\n    const changeDetails = (event) => {\r\n        let details = predictionForm.details\r\n        details[event.target.name] = event.target.value\r\n        setPredictionForm({\r\n            ...predictionForm,\r\n            details: details\r\n        })\r\n    }\r\n\r\n    // Recursive (DFS) function for displaying inner structure of decision tree\r\n    const treeToHtml = (tree) => {\r\n        // only leafs containing category\r\n        if (tree.category) {\r\n            return  ['<ul>',\r\n                        '<li>',\r\n                            '<button>',\r\n                                '<b>', tree.category, '</b>',\r\n                            '</button>',\r\n                        '</li>',\r\n                    '</ul>'].join('');\r\n        }\r\n        \r\n        return  ['<ul>',\r\n                    '<li>',\r\n                        '<button>',\r\n                            '<b>', tree.attribute, ' ', tree.predicateName, ' ', tree.pivot, ' ?</b>',\r\n                        '</button>',\r\n                        '<ul>',\r\n                            '<li>',\r\n                                '<button>yes</button>',\r\n                                treeToHtml(tree.match),\r\n                            '</li>',\r\n                            '<li>', \r\n                                '<button>no</button>',\r\n                                treeToHtml(tree.notMatch),\r\n                            '</li>',\r\n                        '</ul>',\r\n                    '</li>',\r\n                '</ul>'].join('');\r\n    }\r\n\r\n    const generateTree = () => {\r\n        try {\r\n            // Building Decision Tree\r\n            let decisionTree = new dt.DecisionTree(config);\r\n            setDTree(decisionTree)\r\n            // Displaying Decision Tree\r\n            dT.current.innerHTML = treeToHtml(decisionTree.root);\r\n        } catch (err) {\r\n            setError(err)\r\n        }\r\n    }\r\n\r\n    const predictTree = () => {\r\n        // Building Decision Tree\r\n        let decisionTree = new dt.DecisionTree(config);\r\n\r\n        // Testing Decision Tree and Random Forest\r\n        let details = predictionForm.details;\r\n\r\n        let decisionTreePrediction = decisionTree.predict(details);\r\n        setPrediction(decisionTreePrediction)\r\n        // Displaying Decision Tree\r\n        dT.current.innerHTML = treeToHtml(decisionTree.root);\r\n    }\r\n    \r\n    return (\r\n        <Grid container>\r\n            <Grid item md={6} xs={12}>\r\n                <CsvReader />\r\n                <CsvTable />\r\n            </Grid>\r\n            <Grid item md={6} xs={12}>\r\n                {csv ? (\r\n                        <div style={{ padding: '10px' }}>\r\n                            {error && (\r\n                                <Alert onClose={() => setError('')} severity=\"error\">\r\n                                    {error}\r\n                                </Alert>\r\n                            )}\r\n                            {columns && (\r\n                                <React.Fragment>  \r\n                                    <div className={classes.borderDiv}>\r\n                                        <Paper className={classes.descDiv}>\r\n                                            Select the column to be predicted\r\n                                        </Paper>\r\n                                        <FormControl className={classes.formControl}>\r\n                                            <Select\r\n                                                value={config.categoryAttr}\r\n                                                onChange={chooseCategoryAttr}\r\n                                                displayEmpty\r\n                                                className={classes.selectEmpty}\r\n                                                inputProps={{ 'aria-label': 'Without label' }}\r\n                                            >\r\n                                                {columns.map((column, index) => \r\n                                                    <MenuItem key={index} value={column}>{column}</MenuItem>\r\n                                                )}\r\n                                            </Select>\r\n                                            <FormHelperText>Select a column</FormHelperText>\r\n                                        </FormControl>\r\n                                    </div>\r\n                                    <div className={classes.borderDiv}>\r\n                                        <Paper className={classes.descDiv}>\r\n                                            Check the columns to be ignored\r\n                                        </Paper>\r\n                                        {columns.map((column, index) => \r\n                                            <div key={index}>\r\n                                                {column !== config.categoryAttr && (\r\n                                                    <FormControlLabel\r\n                                                        control={<Checkbox \r\n                                                                    checked={config.ignoredAttributes.includes(column)} \r\n                                                                    color=\"default\" \r\n                                                                    name={column}\r\n                                                                    onChange={ignoreColumn} \r\n                                                                />}\r\n                                                        label={column}       \r\n                                                    />\r\n                                                )}\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </React.Fragment>\r\n                            )}\r\n\r\n\r\n                            <div style={{ textAlign: 'center' }}>\r\n                                <Button variant=\"contained\" color=\"primary\" onClick={generateTree}>Generate Decision Tree</Button>\r\n                            </div>\r\n                            {dTree && (\r\n                                <div style={{ marginTop: '20px', padding: '10px' }}>\r\n                                    <Paper className={classes.descDiv}>\r\n                                        Make a Prediction\r\n                                    </Paper>\r\n                                    <form className={classes.root} noValidate autoComplete=\"off\">\r\n                                        {predictionForm.columns.map((column, index) => \r\n                                            <TextField \r\n                                                key={index}  \r\n                                                label={column} \r\n                                                name={column}\r\n                                                value={predictionForm.details.column}\r\n                                                onChange={changeDetails}\r\n                                            />\r\n                                        )}\r\n                                    </form>\r\n                                    <Grid style={{ marginBottom: '20px' }} container spacing={4}>\r\n                                        <Grid item xs={6}>\r\n                                            <Button\r\n                                                variant=\"contained\"\r\n                                                color=\"primary\"\r\n                                                className={classes.button}\r\n                                                startIcon={<FunctionsIcon />}\r\n                                                onClick={predictTree}\r\n                                            >\r\n                                                Predict\r\n                                            </Button>      \r\n                                        </Grid>\r\n                                        <Grid item xs={6}>\r\n                                            <Button\r\n                                                variant=\"contained\"\r\n                                                color=\"primary\"\r\n                                                className={classes.button}\r\n                                                startIcon={<AccountTreeIcon />}\r\n                                                onClick={() => {scrollToRef(dT)}}\r\n                                            >\r\n                                                View Tree\r\n                                            </Button>       \r\n                                        </Grid>\r\n                                    </Grid>\r\n                                </div>\r\n                            )}\r\n                            {prediction && (\r\n                                <Alert onClose={() => {setPrediction('')}} severity=\"success\">\r\n                                    The predicted value is {prediction}\r\n                                </Alert>\r\n                            )}\r\n                        </div>\r\n                ) : (\r\n                        <div style={{ paddingTop: '50px', textAlign: 'center' }}>\r\n                            Please select a dataset \r\n                        </div>\r\n                )}\r\n                \r\n            </Grid>\r\n            {dTree && (\r\n                <Paper style={{ width: '100%', margin: '20px', padding: '20px', textAlign: 'center', backgroundColor: '#000000' }}>\r\n                    <Typography variant=\"h4\" gutterBottom>\r\n                        Decision Tree\r\n                    </Typography>\r\n                </Paper>\r\n            )}\r\n            <div className=\"tree-wrapper\">\r\n                <div className=\"tree\" ref={dT} />\r\n            </div>\r\n        </Grid>\r\n        \r\n    );\r\n}\r\n\r\nexport default DecisionTree;\r\n","let figue = function () {\r\n\r\n\r\n\tfunction euclidianDistance (vec1 , vec2) {\r\n\t\tlet N = vec1.length ;\r\n\t\tlet d = 0 ;\r\n\t\tfor (let i = 0 ; i < N ; i++)\r\n\t\t\td += Math.pow (vec1[i] - vec2[i], 2)\r\n\t\td = Math.sqrt (d) ;\r\n\t\treturn d ;\r\n\t}\r\n\r\n\tfunction manhattanDistance (vec1 , vec2) {\r\n\t\tlet N = vec1.length ;\r\n\t\tlet d = 0 ;\r\n\t\tfor (let i = 0 ; i < N ; i++)\r\n\t\t\td += Math.abs (vec1[i] - vec2[i])\r\n\t\treturn d ;\r\n\t}\r\n\r\n\tfunction maxDistance (vec1 , vec2) {\r\n\t\tlet N = vec1.length ;\r\n\t\tlet d = 0 ;\r\n\t\tfor (let i = 0 ; i < N ; i++)\r\n\t\t\td = Math.max (d , Math.abs (vec1[i] - vec2[i])) ;\r\n\t\treturn d ;\r\n\t}\r\n\r\n\tfunction addVectors (vec1 , vec2) {\r\n\t\tlet N = vec1.length ;\r\n\t\tlet vec = new Array(N) ;\r\n\t\tfor (let i = 0 ; i < N ; i++)\r\n\t\t\tvec[i] = vec1[i] + vec2[i] ;\r\n\t\treturn vec ;\r\n\t}\t\r\n\r\n\tfunction multiplyVectorByValue (value , vec) {\r\n\t\tlet N = vec.length ;\r\n\t\tlet v = new Array(N) ;\r\n\t\tfor (let i = 0 ; i < N ; i++)\r\n\t\t\tv[i] = value * vec[i] ;\r\n\t\treturn v ;\r\n\t}\t\r\n\t\r\n\t// function vectorDotProduct (vec1, vec2) {\r\n\t// \tlet N = vec1.length ;\r\n\t// \tlet s = 0 ;\r\n\t// \tfor (let i = 0 ; i < N ; i++)\r\n\t// \t\ts += vec1[i] * vec2[i] ;\r\n\t// \treturn s ;\r\n\t// }\r\n\t\r\n\r\n\tfunction repeatChar(c, n) {\r\n\t\tlet str = \"\";\r\n\t\tfor (let i = 0 ; i < n ; i++)\r\n\t\t\tstr += c ;\r\n\t\treturn str ;\r\n\t}\r\n\t\r\n\tfunction calculateCentroid (c1Size , c1Centroid , c2Size , c2Centroid) {\r\n\t\tlet newCentroid = new Array(c1Centroid.length) ;\r\n\t\tlet newSize = c1Size + c2Size ;\r\n\t\tfor (let i = 0 ; i < c1Centroid.length ; i++) \r\n\t\t\tnewCentroid[i] = (c1Size * c1Centroid[i] + c2Size * c2Centroid[i]) / newSize ;\r\n\t\treturn newCentroid ;\t\r\n\t}\r\n\r\n\r\n\tfunction centerString(str, width) {\r\n\t\tlet diff = width - str.length ;\r\n\t\tif (diff < 0)\r\n\t\t\treturn ;\r\n\r\n\t\tlet halfdiff = Math.floor(diff / 2) ;\r\n\t\treturn repeatChar (\" \" , halfdiff) + str + repeatChar (\" \" , diff - halfdiff)  ;\r\n\t}\r\n\r\n\tfunction putString(str, width, index) {\r\n\t\tlet diff = width - str.length ;\r\n\t\tif (diff < 0)\r\n\t\t\treturn ;\r\n\r\n\t\treturn repeatChar (\" \" , index) + str + repeatChar (\" \" , width - (str.length+index)) ;\r\n\t}\r\n\r\n\tfunction prettyVector(vector) {\r\n\t\tlet vals = new Array(vector.length) ;\r\n\t\tlet precision = Math.pow(10, figue.PRINT_VECTOR_VALUE_PRECISION) ; \r\n\t\tfor (let i = 0 ; i < vector.length ; i++)\r\n\t\t\tvals[i] = Math.round(vector[i]*precision)/precision ;\r\n\t\treturn vals.join(\",\")\r\n\t}\r\n\r\n\tfunction prettyValue(value) {\r\n\t\tlet precision = Math.pow(10, figue.PRINT_VECTOR_VALUE_PRECISION) ; \r\n\t\treturn String (Math.round(value*precision)/precision) ;\r\n\t}\r\n\r\n\tfunction generateDendogram(tree, sep, balanced, withLabel, withCentroid, withDistance) {\r\n\t\tlet lines = [];\r\n\t\tlet centroidstr = prettyVector(tree.centroid) ;\r\n\t\tif (tree.isLeaf()) {\r\n\t\t\tlet labelstr = String(tree.label) ;\r\n\t\t\tlet len = 1;\r\n\t\t\tif (withCentroid) \r\n\t\t\t\tlen = Math.max(centroidstr.length , len) ;\r\n\t\t\tif (withLabel)\r\n\t\t\t\tlen = Math.max(labelstr.length , len) ;\r\n\r\n\t\t\tlines.push (centerString (\"|\" , len)) ;\r\n\t\t\tif (withCentroid) \r\n\t\t\t\tlines.push (centerString (centroidstr , len)) ;\r\n\t\t\tif (withLabel) \r\n\t\t\t\tlines.push (centerString (labelstr , len)) ;\r\n\r\n\t\t} else {\r\n\t\t\tlet distancestr = prettyValue(tree.dist) ;\r\n\t\t\tlet left_dendo = generateDendogram(tree.left ,sep, balanced,withLabel,withCentroid, withDistance) ;\r\n\t\t\tlet right_dendo = generateDendogram(tree.right, sep, balanced,withLabel,withCentroid,withDistance) ;\r\n\t\t\tlet left_bar_ix = left_dendo[0].indexOf(\"|\") ;\r\n\t\t\tlet right_bar_ix = right_dendo[0].indexOf(\"|\") ;\r\n\t\r\n\t\t\t// calculate nb of chars of each line\r\n\t\t\tlet len = sep + right_dendo[0].length + left_dendo[0].length ;\r\n\t\t\tif (withCentroid) \r\n\t\t\t\tlen = Math.max(centroidstr.length , len) ;\r\n\t\t\tif (withDistance) \r\n\t\t\t\tlen = Math.max(distancestr.length , len) ;\r\n\r\n\r\n\t\t\t// calculate position of new vertical bar\r\n\t\t\tlet bar_ix =  left_bar_ix + Math.floor(( left_dendo[0].length - (left_bar_ix) + sep + (1+right_bar_ix)) / 2) ;\r\n\t\t\t\r\n\t\t\t// add line with the new vertical bar \r\n\t\t\tlines.push (putString (\"|\" , len , bar_ix)) ;\r\n\t\t\tif (withCentroid) {\r\n\t\t\t\tlines.push (putString (centroidstr , len , bar_ix - Math.floor (centroidstr.length / 2))) ; //centerString (centroidstr , len)) ;\r\n\t\t\t}\r\n\t\t\tif (withDistance) {\r\n\t\t\t\tlines.push (putString (distancestr , len , bar_ix - Math.floor (distancestr.length / 2))) ; //centerString (centroidstr , len)) ;\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\t// add horizontal line to connect the vertical bars of the lower level\r\n\t\t\tlet hlineLen = sep + (left_dendo[0].length -left_bar_ix) + right_bar_ix+1 ;\r\n\t\t\tlet hline = repeatChar (\"_\" , hlineLen) ;\r\n\t\t\tlines.push (putString(hline, len, left_bar_ix)) ;\r\n\t\r\n\t\t\t// IF: the user want the tree to be balanced: all the leaves have to be at the same level\r\n\t\t\t// THEN: if the left and right subtrees have not the same depth, add extra vertical bars to the top of the smallest subtree\r\n\t\t\tif (balanced &&  (left_dendo.length !==right_dendo.length)) {\r\n\t\t\t\tlet shortest ;\r\n\t\t\t\tlet longest ;\r\n\t\t\t\tif (left_dendo.length > right_dendo.length) {\r\n\t\t\t\t\tlongest = left_dendo ;\r\n\t\t\t\t\tshortest = right_dendo ;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlongest = right_dendo ;\r\n\t\t\t\t\tshortest = left_dendo ;\r\n\t\t\t\t}\r\n\t\t\t\t// repeat the first line containing the vertical bar\r\n\t\t\t\tlet header = shortest[0] ;\r\n\t\t\t\tlet toadd = longest.length - shortest.length ;\r\n\t\t\t\tfor (let i = 0 ; i < toadd ; i++) {\r\n\t\t\t\t\tshortest.splice (0,0,header) ;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\r\n\t\t\t// merge the left and right subtrees \r\n\t\t\tfor (let i = 0 ; i < Math.max (left_dendo.length , right_dendo.length) ; i++) {\r\n\t\t\t\tlet left = \"\" ;\r\n\t\t\t\tif (i < left_dendo.length)\r\n\t\t\t\t\tleft = left_dendo[i] ;\r\n\t\t\t\telse\r\n\t\t\t\t\tleft = repeatChar (\" \" , left_dendo[0].length) ;\r\n\t\r\n\t\t\t\tlet right = \"\" ;\r\n\t\t\t\tif (i < right_dendo.length)\r\n\t\t\t\t\tright = right_dendo[i] ;\r\n\t\t\t\telse\r\n\t\t\t\t\tright = repeatChar (\" \" , right_dendo[0].length) ;\r\n\t\t\t\tlines.push(left + repeatChar (\" \" , sep) + right) ;\r\n\t\t\t\t// eslint-disable-next-line\t\r\n\t\t\t\tlet l = left + repeatChar (\" \" , sep) + right ;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn lines ;\r\n\t}\r\n\r\n\r\n\r\n\tfunction agglomerate (labels, vectors, distance, linkage) {\r\n\t\tlet N = vectors.length ;\r\n\t\tlet dMin = new Array(N) ;\r\n\t\tlet cSize = new Array(N) ;\r\n\t\tlet matrixObj = new figue.Matrix(N,N);\r\n\t\tlet distMatrix = matrixObj.mtx ;\r\n\t\tlet clusters = new Array(N) ;\r\n\r\n\t\tlet c1, c2, c1Cluster, c2Cluster, i, j, p, root , newCentroid ;\r\n\r\n\t\tif (distance === figue.EUCLIDIAN_DISTANCE)\r\n\t\t\tdistance = euclidianDistance ;\r\n\t\telse if (distance === figue.MANHATTAN_DISTANCE)\r\n\t\t\tdistance = manhattanDistance ;\r\n\t\telse if (distance === figue.MAX_DISTANCE)\r\n\t\t\tdistance = maxDistance ;\r\n\r\n\t\t// Initialize distance matrix and vector of closest clusters\r\n\t\tfor (i = 0 ; i < N ; i++) {\r\n\t\t\tdMin[i] = 0 ;\r\n\t\t\tfor (j = 0 ; j < N ; j++) {\r\n\t\t\t\tif (i === j)\r\n\t\t\t\t\tdistMatrix[i][j] = Infinity ;\r\n\t\t\t\telse\r\n\t\t\t\t\tdistMatrix[i][j] = distance(vectors[i] , vectors[j]) ;\r\n\t\r\n\t\t\t\tif (distMatrix[i][dMin[i]] > distMatrix[i][j] )\r\n\t\t\t\t\tdMin[i] = j ;\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t// create leaves of the tree\r\n\t\tfor (i = 0 ; i < N ; i++) {\r\n\t\t\tclusters[i] = [] ;\r\n\t\t\tclusters[i][0] = new Node (labels[i], null, null, 0, vectors[i]) ;\r\n\t\t\tcSize[i] = 1 ;\r\n\t\t}\r\n\t\t\r\n\t\t// Main loop\r\n\t\tfor (p = 0 ; p < N-1 ; p++) {\r\n\t\t\t// find the closest pair of clusters\r\n\t\t\tc1 = 0 ;\r\n\t\t\tfor (i = 0 ; i < N ; i++) {\r\n\t\t\t\tif (distMatrix[i][dMin[i]] < distMatrix[c1][dMin[c1]])\r\n\t\t\t\t\tc1 = i ;\r\n\t\t\t}\r\n\t\t\tc2 = dMin[c1] ;\r\n\t\r\n\t\t\t// create node to store cluster info \r\n\t\t\tc1Cluster = clusters[c1][0] ;\r\n\t\t\tc2Cluster = clusters[c2][0] ;\r\n\r\n\t\t\tnewCentroid = calculateCentroid ( c1Cluster.size , c1Cluster.centroid , c2Cluster.size , c2Cluster.centroid ) ;\r\n\t\t\tlet newCluster = new Node (-1, c1Cluster, c2Cluster , distMatrix[c1][c2] , newCentroid) ;\r\n\t\t\tclusters[c1].splice(0,0, newCluster) ;\r\n\t\t\tcSize[c1] += cSize[c2] ;\r\n\t\t\r\n\t\t\t// overwrite row c1 with respect to the linkage type\r\n\t\t\tfor (j = 0 ; j < N ; j++) {\r\n\t\t\t\tif (linkage === figue.SINGLE_LINKAGE) {\r\n\t\t\t\t\tif (distMatrix[c1][j] > distMatrix[c2][j])\r\n\t\t\t\t\t\tdistMatrix[j][c1] = distMatrix[c1][j] = distMatrix[c2][j] ;\r\n\t\t\t\t} else if (linkage === figue.COMPLETE_LINKAGE) {\r\n\t\t\t\t\tif (distMatrix[c1][j] < distMatrix[c2][j])\r\n\t\t\t\t\t\tdistMatrix[j][c1] = distMatrix[c1][j] = distMatrix[c2][j] ;\r\n\t\t\t\t} else if (linkage === figue.AVERAGE_LINKAGE) {\r\n\t\t\t\t\tlet avg = ( cSize[c1] * distMatrix[c1][j] + cSize[c2] * distMatrix[c2][j])  / (cSize[c1] + cSize[j]) \r\n\t\t\t\t\tdistMatrix[j][c1] = distMatrix[c1][j] = avg ;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdistMatrix[c1][c1] = Infinity ;\r\n\t\t\r\n\t\t\t// infinity ­out old row c2 and column c2\r\n\t\t\tfor (i = 0 ; i < N ; i++)\r\n\t\t\t\tdistMatrix[i][c2] = distMatrix[c2][i] = Infinity ;\r\n\t\r\n\t\t\t// update dmin and replace ones that previous pointed to c2 to point to c1\r\n\t\t\tfor (j = 0; j < N ; j++) {\r\n\t\t\t\tif (dMin[j] === c2)\r\n\t\t\t\t\tdMin[j] = c1;\r\n\t\t\t\tif (distMatrix[c1][j] < distMatrix[c1][dMin[c1]]) \r\n\t\t\t\t\tdMin[c1] = j;\r\n\t\t\t}\r\n\t\r\n\t\t\t// keep track of the last added cluster\r\n\t\t\troot = newCluster ;\r\n\t\t}\r\n\t\r\n\t\treturn root ;\r\n\t}\r\n\r\n\r\n\t\r\n\tfunction getRandomVectors(k, vectors) {\r\n\t\t/*  Returns a array of k distinct vectors randomly selected from a the input array of vectors\r\n\t\t\tReturns null if k > n or if there are less than k distinct objects in vectors */\r\n\t\t\r\n\t\tlet n = vectors.length ;\r\n\t\tif ( k > n ) \r\n\t\t\treturn null ;\r\n\t\t\r\n\t\tlet selected_vectors = new Array(k) ;\r\n\t\tlet selected_indices = new Array(k) ;\r\n\t\t\r\n\t\tlet tested_indices = {};\r\n\t\tlet tested = 0 ;\r\n\t\tlet selected = 0 ;\r\n\t\tlet i , vector, select ;\r\n\t\twhile (selected < k) {\r\n\t\t\tif (tested === n)\r\n\t\t\t\treturn null ;\r\n\t\t\t\r\n\t\t\tlet random_index = Math.floor(Math.random()*(n)) ;\r\n\t\t\tif (random_index in tested_indices)\r\n\t\t\t\tcontinue ;\r\n\t\t\t\r\n\t\t\ttested_indices[random_index] = 1;\r\n\t\t\ttested++ ;\r\n\t\t\tvector = vectors[random_index] ;\r\n\t\t\tselect = true ;\r\n\t\t\tfor (i = 0 ; i < selected ; i++) {\r\n\t\t\t\tif ( vector.compare (selected_vectors[i]) ) {\r\n\t\t\t\t\tselect = false ;\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (select) {\r\n\t\t\t\tselected_vectors[selected] = vector ;\r\n\t\t\t\tselected_indices[selected] = random_index ; \r\n\t\t\t\tselected++ ;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn {'vectors': selected_vectors, 'indices': selected_indices} ;\r\n\t}\r\n\t\r\n\tfunction kmeans (k, vectors) {\r\n\t\tlet n = vectors.length ;\r\n\t\tlet assignments = new Array(n) ;\r\n\t\tlet clusterSizes = new Array(k) ;\r\n\t\tlet repeat = true ;\r\n\t\tlet nb_iters = 0 ;\r\n\t\tlet centroids = null ;\r\n\t\t\r\n\t\tlet t = getRandomVectors(k, vectors) ;\r\n\t\tif (t === null)\r\n\t\t\treturn null ;\r\n\t\telse\r\n\t\t\tcentroids = t.vectors ;\r\n\t\t\t\r\n\t\twhile (repeat) {\r\n\r\n\t\t\t// assignment step\r\n\t\t\tfor (let j = 0 ; j < k ; j++)\r\n\t\t\t\tclusterSizes[j] = 0 ;\r\n\t\t\t\r\n\t\t\tfor (let i = 0 ; i < n ; i++) {\r\n\t\t\t\tlet vector = vectors[i] ;\r\n\t\t\t\tlet mindist = Number.MAX_VALUE ;\r\n\t\t\t\tlet best ;\r\n\t\t\t\tlet dist;\r\n\t\t\t\tfor (let j = 0 ; j < k ; j++) {\r\n\t\t\t\t\tdist = euclidianDistance (centroids[j], vector)\r\n\t\t\t\t\tif (dist < mindist) {\r\n\t\t\t\t\t\tmindist = dist ;\r\n\t\t\t\t\t\tbest = j ;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tclusterSizes[best]++ ;\r\n\t\t\t\tassignments[i] = best ;\r\n\t\t\t}\r\n\t\t\r\n\t\t\t// update centroids step\r\n\t\t\tlet newCentroids = new Array(k) ;\r\n\t\t\tfor (let j = 0 ; j < k ; j++)\r\n\t\t\t\tnewCentroids[j] = null ;\r\n\t\t\tlet cluster;\r\n\t\t\tfor (let i = 0 ; i < n ; i++) {\r\n\t\t\t\tcluster = assignments[i] ;\r\n\t\t\t\tif (newCentroids[cluster] === null)\r\n\t\t\t\t\tnewCentroids[cluster] = vectors[i] ;\r\n\t\t\t\telse\r\n\t\t\t\t\tnewCentroids[cluster] = addVectors (newCentroids[cluster] , vectors[i]) ;\t\r\n\t\t\t}\r\n\r\n\t\t\tfor (let j = 0 ; j < k ; j++) {\r\n\t\t\t\tnewCentroids[j] = multiplyVectorByValue (1/clusterSizes[j] , newCentroids[j]) ;\r\n\t\t\t}\t\r\n\t\t\t\r\n\t\t\t// check convergence\r\n\t\t\trepeat = false ;\r\n\t\t\tfor (let j = 0 ; j < k ; j++) {\r\n\t\t\t\tif (! newCentroids[j].compare (centroids[j])) {\r\n\t\t\t\t\trepeat = true ; \r\n\t\t\t\t\tbreak ; \r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcentroids = newCentroids ;\r\n\t\t\tnb_iters++ ;\r\n\t\t\t\r\n\t\t\t// check nb of iters\r\n\t\t\tif (nb_iters > figue.KMEANS_MAX_ITERATIONS)\r\n\t\t\t\trepeat = false ;\r\n\t\t\t\r\n\t\t}\r\n\t\treturn { 'centroids': centroids , 'assignments': assignments} ;\r\n\r\n\t}\r\n\t\r\n\tfunction fcmeans (k, vectors, epsilon, fuzziness) {\r\n\t\tlet membershipMatrix = new Matrix (vectors.length, k) ;\r\n\t\tlet repeat = true ;\r\n\t\tlet nb_iters = 0 ;\r\n\t\t\r\n\t\tlet centroids = null ;\r\n\t\t\r\n\t\tlet i,j,l, tmp, norm, max, diff ;\r\n\t\twhile (repeat) {\r\n\t\t\t// initialize or update centroids\r\n\t\t\tif (centroids === null) {\r\n\t\t\t\t\r\n\t\t\t\ttmp = getRandomVectors(k, vectors) ;\r\n\t\t\t\tif (tmp === null)\r\n\t\t\t\t\treturn null ;\r\n\t\t\t\telse\r\n\t\t\t\t\tcentroids = tmp.vectors ;\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tfor (j = 0 ; j < k; j++) {\r\n\t\t\t\t\tcentroids[j] = [] ;\r\n\t\t\t\t\tnorm = 0 ;\r\n\t\t\t\t\tfor (i = 0 ; i < membershipMatrix.rows ; i++) {\r\n\t\t\t\t\t\tnorm += Math.pow(membershipMatrix.mtx[i][j], fuzziness) ;\r\n\t\t\t\t\t\ttmp = multiplyVectorByValue( Math.pow(membershipMatrix.mtx[i][j], fuzziness) , vectors[i]) ;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (i === 0)\r\n\t\t\t\t\t\t\tcentroids[j] = tmp ;\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tcentroids[j] = addVectors (centroids[j] , tmp) ;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (norm > 0)\r\n\t\t\t\t\t\tcentroids[j] = multiplyVectorByValue(1/norm, centroids[j]);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t//alert(centroids);\r\n\t\t\t\r\n\t\t\t// update the degree of membership of each vector\r\n\t\t\tlet previousMembershipMatrix = membershipMatrix.copy() ;\r\n\t\t\tfor (i = 0 ; i < membershipMatrix.rows ; i++) {\r\n\t\t\t\tfor (j = 0 ; j < k ; j++) {\r\n\t\t\t\t\tmembershipMatrix.mtx[i][j] = 0;\r\n\t\t\t\t\tfor (l = 0 ; l < k ; l++) {\r\n\t\t\t\t\t\tif (euclidianDistance(vectors[i] , centroids[l]) === 0)\r\n\t\t\t\t\t\t\ttmp = 0 ;\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\ttmp =  euclidianDistance(vectors[i] , centroids[j]) / euclidianDistance(vectors[i] , centroids[l]) ;\r\n\t\t\t\t\t\ttmp = Math.pow (tmp, 2/(fuzziness-1)) ;\r\n\t\t\t\t\t\tmembershipMatrix.mtx[i][j] += tmp ;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (membershipMatrix.mtx[i][j] > 0)\r\n\t\t\t\t\t\tmembershipMatrix.mtx[i][j] = 1 / membershipMatrix.mtx[i][j] ;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//alert(membershipMatrix) ;\r\n\t\t\t\r\n\t\t\t// check convergence\r\n\t\t\tmax = -1 ;\r\n\t\t\tfor (i = 0 ; i < membershipMatrix.rows ; i++)\r\n\t\t\t\tfor (j = 0 ; j < membershipMatrix.cols ; j++) {\r\n\t\t\t\t\tdiff = Math.abs(membershipMatrix.mtx[i][j] - previousMembershipMatrix.mtx[i][j]) ;\r\n\t\t\t\t\tif (diff > max)\r\n\t\t\t\t\t\tmax = diff ;\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\tif (max < epsilon)\r\n\t\t\t\trepeat = false ;\r\n\r\n\t\t\tnb_iters++ ;\r\n\r\n\t\t\t// check nb of iters\r\n\t\t\tif (nb_iters > figue.FCMEANS_MAX_ITERATIONS)\r\n\t\t\t\trepeat = false ;\r\n\t\t}\r\n\t\treturn { 'centroids': centroids , 'membershipMatrix': membershipMatrix} ;\r\n\t\r\n\t}\r\n\t\r\n\t\t\t\r\n\tfunction Matrix (rows,cols) \r\n\t{\r\n\t\tthis.rows = rows ;\r\n\t\tthis.cols = cols ;\r\n\t\tthis.mtx = new Array(rows) ; \r\n\r\n\t\tfor (let i = 0 ; i < rows ; i++)\r\n\t\t{\r\n\t\t\tlet row = new Array(cols) ;\r\n\t\t\tfor (let j = 0 ; j < cols ; j++)\r\n\t\t\t\trow[j] = 0;\r\n\t\t\tthis.mtx[i] = row ;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction Node (label,left,right,dist, centroid) \r\n\t{\r\n\t\tthis.label = label ;\r\n\t\tthis.left = left ;\r\n\t\tthis.right = right ;\r\n\t\tthis.dist = dist ;\r\n\t\tthis.centroid = centroid ;\r\n\t\tif (left === null && right === null) {\r\n\t\t\tthis.size = 1 ;\r\n\t\t\tthis.depth = 0 ;\r\n\t\t} else {\r\n\t\t\tthis.size = left.size + right.size ;\r\n\t\t\tthis.depth = 1 + Math.max (left.depth , right.depth ) ;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\treturn { \r\n\t\tSINGLE_LINKAGE: 0,\r\n\t\tCOMPLETE_LINKAGE: 1,\r\n\t\tAVERAGE_LINKAGE:2 ,\r\n\t\tEUCLIDIAN_DISTANCE: 0,\r\n\t\tMANHATTAN_DISTANCE: 1,\r\n\t\tMAX_DISTANCE: 2,\r\n\t\tPRINT_VECTOR_VALUE_PRECISION: 2,\r\n\t\tKMEANS_MAX_ITERATIONS: 10,\r\n\t\tFCMEANS_MAX_ITERATIONS: 3,\r\n\r\n\t\tMatrix: Matrix,\r\n\t\tNode: Node,\r\n\t\tgenerateDendogram: generateDendogram,\r\n\t\tagglomerate: agglomerate,\r\n\t\tkmeans: kmeans,\r\n\t\tfcmeans: fcmeans\r\n\t}\r\n}() ;\r\n\r\n\r\nfigue.Matrix.prototype.toString = function() \r\n{\r\n\tlet lines = [] ;\r\n\tfor (let i = 0 ; i < this.rows ; i++) \r\n\t\tlines.push (this.mtx[i].join(\"\\t\")) ;\r\n\treturn lines.join (\"\\n\") ;\r\n}\r\n\r\n\r\nfigue.Matrix.prototype.copy = function() \r\n{\r\n\tlet duplicate = new figue.Matrix(this.rows, this.cols) ;\r\n\tfor (let i = 0 ; i < this.rows ; i++)\r\n\t\tduplicate.mtx[i] = this.mtx[i].slice(0); \r\n\treturn duplicate ;\r\n}\r\n\r\nfigue.Node.prototype.isLeaf = function() \r\n{\r\n\tif ((this.left === null) && (this.right === null))\r\n\t\treturn true ;\r\n\telse\r\n\t\treturn false ;\r\n}\r\n\r\nfigue.Node.prototype.buildDendogram = function (sep, balanced,withLabel,withCentroid, withDistance)\r\n{\r\n\tlet lines;\r\n\tlines = figue.generateDendogram(this, sep, balanced,withLabel,withCentroid, withDistance) ;\r\n\treturn lines.join (\"\\n\") ;\t\r\n}\r\n\r\n\r\n// Array.prototype.compare = function(testArr) {\r\n//     if (this.length !==testArr.length) return false;\r\n//     for (let i = 0; i < testArr.length; i++) {\r\n//         if (this[i].compare) { \r\n//             if (!this[i].compare(testArr[i])) return false;\r\n//         }\r\n//         if (this[i] !== testArr[i]) return false;\r\n//     }\r\n//     return true;\r\n// }\r\n\r\nexport default figue;","import React, { useState, useEffect, useRef, useContext } from 'react';\r\nimport { Formik } from 'formik';\r\nimport { csvContext } from '../../context/csv-context';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport figue from './hc-hook';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport CsvReader from '../../utils/CsvReader';\r\nimport CsvTable from '../../utils/CsvTable';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\n\r\nimport './Dendogram.css';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    paper: {\r\n        margin: theme.spacing(8, 4),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing(1),\r\n        width: '80%',\r\n    },\r\n    selectEmpty: {\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    form: {\r\n        width: '90%', // Fix IE 11 issue.\r\n        marginTop: theme.spacing(1),\r\n        marginLeft: '20px',\r\n    },\r\n    submit: {\r\n        width: '100px',\r\n    },\r\n}));\r\n\r\nconst HierarchicalClustering = () => {\r\n    const classes = useStyles();\r\n    const [error, setError] = useState('')\r\n    const { csv } = useContext(csvContext);\r\n    const [columnNames, setColumnNames] = useState([]);\r\n    const [label, setLabel] = useState();\r\n    const dendoGram = useRef();\r\n    const scrollToRef = (ref) => window.scrollTo(0, ref.current.offsetTop)\r\n\r\n    useEffect(() => {\r\n        if (csv == null) \r\n            return;\r\n        async function LoadColumnNames() {\r\n            const columns = await csv.columnNames();\r\n            setColumnNames(columns);\r\n            setLabel(columns[0]);\r\n        }\r\n        LoadColumnNames();\r\n    }, [csv, setColumnNames]);\r\n\r\n    return (\r\n        <div>\r\n            <Grid container>\r\n                <Grid item md={6} xs={12}>\r\n                    <CsvReader />\r\n                    <CsvTable />\r\n                </Grid>\r\n                <Grid item md={6} xs={12}>                    \r\n                    {csv && columnNames && label ? (\r\n                        <div style={{ padding: '10px' }}>\r\n                        {error && (\r\n                            <Alert onClose={() => setError('')} severity=\"error\">\r\n                                {error}\r\n                            </Alert>\r\n                        )}\r\n                        <Formik\r\n                            enableReinitialize\r\n                            initialValues={{\r\n                                vectors: columnNames,\r\n                                label: label,\r\n                                linkage: 0,\r\n                                distance: 0,\r\n                                withLabel: true,\r\n                                withCentroid: false,\r\n                                withDistance: false,\r\n                                balanced: true,\r\n                                space: 5\r\n                            }}\r\n                            validate={values => {\r\n                                const errors = {};\r\n                                if (!values.label) {\r\n                                    errors.label = 'Required';\r\n                                }\r\n                                if (values.linkage < 0 || values.linkage > 2) {\r\n                                    console.log(\"haha\")\r\n                                    errors.linkage = 'Required';\r\n                                }\r\n                                if (values.distance < 0 || values.distance > 2) {\r\n                                    errors.distance = 'Required';\r\n                                }\r\n                                if (values.space !== 3 && values.space !== 5 && values.space !== 7 && values.space !== 9) {\r\n                                    errors.space = 'Invalid value'\r\n                                }\r\n\r\n                                return errors;\r\n                            }}\r\n                            onSubmit={(values, { setSubmitting }) => {\r\n                                const submitFormHandler = async values => {\r\n                                    try {                                        \r\n                                        let params = [...values.vectors, values.label]\r\n                                        params = [...new Set(params)]\r\n                                        params = params.filter((param) => param !== values.label)\r\n                                        let data = await csv.toArray()\r\n                                        let labels = [];\r\n                                        let vectors = [];\r\n                                        for (let i = 0 ; i < data.length ; i++) {\r\n                                            labels[i] = data[i][values.label] ;\r\n                                            vectors[i] = []\r\n                                            params.forEach((param) => {\r\n                                                vectors[i].push(data[i][param])\r\n                                            }) \r\n                                        }\r\n                                        let train = {'labels': labels , 'vectors': vectors}\r\n                                        let root = figue.agglomerate(train['labels'], train['vectors'] , values.distance, values.linkage)\r\n                                        let text = root.buildDendogram(values.space, values.balanced, values.withLabel, values.withCentroid, values.withDistance)\r\n                                        console.log(root)\r\n                                        dendoGram.current.innerText = text\r\n                                        scrollToRef(dendoGram)\r\n                                    } catch (err) {\r\n                                        console.error(err);\r\n                                        setError('Please Recheck your Provided Parameters');\r\n                                    }\r\n                                }\r\n                                submitFormHandler(values);\r\n                                setSubmitting(false)\r\n                            }}\r\n                        >{({\r\n                            values,\r\n                            errors,\r\n                            touched,\r\n                            handleChange,\r\n                            handleBlur,\r\n                            handleSubmit,\r\n                            isSubmitting,\r\n                            setFieldValue,\r\n                        }) => (\r\n                                <form className={classes.form} onSubmit={handleSubmit}>\r\n                                    <Grid container spacing={1}>\r\n                                        <Grid item xs={12}>\r\n                                            <Paper style={{ backgroundColor: 'black', padding: '20px' }}>\r\n                                                Select the numerical attributes\r\n                                            </Paper>\r\n                                            <Grid container spacing={1}>\r\n                                                {columnNames.map((column, index) =>\r\n                                                    <Grid item xs={12} key={index}>\r\n                                                        {column !== values.label && (\r\n                                                            <FormControlLabel\r\n                                                                control={<Checkbox\r\n                                                                    checked={values.vectors.includes(column)}\r\n                                                                    color=\"default\"\r\n                                                                    name={column}\r\n                                                                    onChange={(event) => {\r\n                                                                        let array = values.vectors;\r\n                                                                        if (array.includes(event.target.name)) {\r\n                                                                            const newArray = array.filter((col) => col !== event.target.name);\r\n                                                                            setFieldValue('vectors', newArray, false)\r\n                                                                        } else {\r\n                                                                            array.push(event.target.name)\r\n                                                                            setFieldValue('vectors', array, false)\r\n                                                                        }\r\n                                                                    }}\r\n                                                                />}\r\n                                                                label={column}\r\n                                                            />\r\n                                                        )}\r\n                                                    </Grid>\r\n                                                )}\r\n                                            </Grid>\r\n                                        </Grid>\r\n                                        <Grid style={{ padding: '10px' }} item xs={12}>\r\n                                            <hr />\r\n                                        </Grid>\r\n                                        <Grid item xs={12}>\r\n                                            <TextField id=\"select\"\r\n                                                label=\"Label\" select\r\n                                                fullWidth\r\n                                                value={values.label}\r\n                                                name=\"label\"\r\n                                                onChange={handleChange}\r\n                                                variant=\"filled\"\r\n                                            >\r\n                                                {columnNames.map((column, index) =>\r\n                                                    <MenuItem key={index} value={column}>{column}</MenuItem>\r\n                                                )}\r\n                                            </TextField>\r\n                                            <FormHelperText>Select a Label</FormHelperText>\r\n                                        </Grid>\r\n                                        <Grid style={{ padding: '10px' }} item xs={12}>\r\n                                            <hr />\r\n                                        </Grid>\r\n                                        <Grid style={{ marginTop: '10px' }} item xs={6}>\r\n                                            <FormControl component=\"fieldset\">\r\n                                            <FormLabel component=\"legend\">Linkage</FormLabel>\r\n                                            <RadioGroup aria-label=\"linkage\" name=\"linkage\" value={values.linkage} onChange={(event) => {\r\n                                                setFieldValue('linkage', parseInt(event.target.value), false)\r\n                                            }}>\r\n                                                <FormControlLabel value={0} control={<Radio />} label=\"Single-Linkage\" />\r\n                                                <FormControlLabel value={1} control={<Radio />} label=\"Complete-Linkage\" />\r\n                                                <FormControlLabel value={2} control={<Radio />} label=\"Average-Linkage\" />\r\n                                            </RadioGroup>\r\n                                            </FormControl>\r\n                                            <div style={{ margin: \"10px\", color: \"red\" }}>\r\n                                                {errors.linkage && touched.linkage && errors.linkage}\r\n                                            </div>\r\n                                        </Grid>\r\n                                        <Grid style={{ marginTop: '10px' }} item xs={6}>\r\n                                            <FormControl component=\"fieldset\">\r\n                                            <FormLabel component=\"legend\">Distance</FormLabel>\r\n                                            <RadioGroup aria-label=\"distance\" name=\"distance\" value={values.distance} onChange={(event) => {\r\n                                                setFieldValue('distance', parseInt(event.target.value), false)\r\n                                            }}>\r\n                                                <FormControlLabel value={0} control={<Radio />} label=\"Euclidian\" />\r\n                                                <FormControlLabel value={1} control={<Radio />} label=\"Manhattan\" />\r\n                                                <FormControlLabel value={2} control={<Radio />} label=\"Maximum\" />\r\n                                            </RadioGroup>\r\n                                            </FormControl>\r\n                                            <div style={{ margin: \"10px\", color: \"red\" }}>\r\n                                                {errors.distance && touched.distance && errors.distance}\r\n                                            </div>\r\n                                        </Grid>\r\n                                        <Grid style={{ padding: '10px' }} item xs={12}>\r\n                                            <hr />\r\n                                        </Grid>\r\n                                        <Grid item xs={6}>\r\n                                            <FormControlLabel\r\n                                                control={<Checkbox checked={values.withLabel} onChange={handleChange} name=\"withLabel\" />}\r\n                                                label=\"Show Labels\"\r\n                                            />\r\n                                        </Grid>\r\n                                        <Grid item xs={6}>\r\n                                            <FormControlLabel\r\n                                                control={<Checkbox checked={values.withDistance} onChange={handleChange} name=\"withDistance\" />}\r\n                                                label=\"Show Distance\"\r\n                                            />\r\n                                        </Grid>\r\n                                        <Grid item xs={6}>\r\n                                            <FormControlLabel\r\n                                                control={<Checkbox checked={values.withCentroid} onChange={handleChange} name=\"withCentroid\" />}\r\n                                                label=\"Show Centroid\"\r\n                                            />\r\n                                        </Grid> \r\n                                        <Grid item xs={6}>\r\n                                            <FormControlLabel\r\n                                                control={<Checkbox checked={values.balanced} onChange={handleChange} name=\"balanced\" />}\r\n                                                label=\"Balance Dendogram\"\r\n                                            />\r\n                                        </Grid>\r\n                                        <Grid item xs={12}>\r\n                                            <TextField id=\"select\"\r\n                                                    style={{ width: '90%' }}\r\n                                                    label=\"Space\" select\r\n                                                    fullWidth\r\n                                                    value={values.space}\r\n                                                    name=\"space\"\r\n                                                    onChange={(event) => {\r\n                                                        setFieldValue('space', parseInt(event.target.value), true)\r\n                                                    }}\r\n                                                    variant=\"filled\"\r\n                                                >\r\n                                                    <MenuItem value={3}>3</MenuItem>\r\n                                                    <MenuItem value={5}>5</MenuItem>\r\n                                                    <MenuItem value={7}>7</MenuItem>\r\n                                                    <MenuItem value={9}>9</MenuItem>\r\n                                                </TextField>\r\n                                                <FormHelperText>Minimum spacing between nodes</FormHelperText>\r\n                                                <div style={{ margin: \"10px\", color: \"red\" }}>\r\n                                                    {errors.space && touched.space && errors.space}\r\n                                                </div>\r\n                                        </Grid>\r\n                                        \r\n                                    </Grid>\r\n                                    <div style={{ margin: '10px', textAlign: 'center' }}>\r\n                                        <Button\r\n                                            style={{ width: '100%' }}\r\n                                            type=\"submit\"\r\n                                            fullWidth\r\n                                            variant=\"contained\"\r\n                                            color=\"primary\"\r\n                                            className={classes.submit}\r\n                                            disabled={isSubmitting}\r\n                                        >\r\n                                            CLUSTER DATA AND DISPLAY DENDOGRAM\r\n                                    </Button>\r\n                                    </div>\r\n                                </form>\r\n                            )}\r\n                        </Formik>\r\n                        </div>\r\n                    ) : (\r\n                        <div style={{ paddingTop: '50px', textAlign: 'center' }}>\r\n                            Please select a dataset\r\n                        </div>\r\n                    )}\r\n                </Grid>\r\n                {csv && label && (\r\n                    <Paper style={{ width: '100%', margin: '20px', padding: '20px', textAlign: 'center', backgroundColor: '#000000' }}>\r\n                        <Typography variant=\"h4\" gutterBottom>\r\n                            Dendogram\r\n                        </Typography>\r\n                    </Paper>\r\n                )}\r\n                <div className=\"ddg-wrapper\">\r\n                    <pre className=\"ddg\" ref={dendoGram} />\r\n                </div>\r\n            </Grid>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default HierarchicalClustering;","import React, { useState, useEffect, useContext } from 'react';\r\nimport CsvReader from '../../utils/CsvReader';\r\nimport CsvTable from '../../utils/CsvTable';\r\nimport './kmeans.css';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { csvContext } from '../../context/csv-context';\r\nimport { ExtractSelectedLabelsFromCSV, ConvertCSVToRawArrays } from '../../../ML/utils';\r\nimport kmeans from 'ml-kmeans';\r\n\r\nasync function kmeansFunction(csv, selectedCols, k=3) {\r\n    const [data, _] = await ConvertCSVToRawArrays(csv, [], selectedCols);\r\n    console.log(selectedCols);\r\n    console.log('Function called', data);\r\n    // Initialize the magicFeature\r\n    const result = kmeans(data, k);\r\n\r\n    console.log(result);\r\n}\r\n\r\n\r\nconst Kmeans = () => {\r\n\r\n    const { csv } = useContext(csvContext);\r\n    const [columnNames, setColumnNames] = useState([]);\r\n    useEffect(() => {\r\n        if (csv == null)\r\n            return;\r\n        async function LoadColumnNames() {\r\n            const columns = await csv.columnNames();\r\n            setColumnNames(columns);\r\n            // setYcolumn(columns[columns.length - 1]);\r\n        }\r\n        LoadColumnNames();\r\n    }, [csv, setColumnNames]);\r\n\r\n    return (\r\n        <Grid container>\r\n            <Grid item md={6} xs={12}>\r\n                <CsvReader />\r\n                <CsvTable />\r\n            </Grid>\r\n            <Grid item md={6} xs={12}>\r\n                <Button onClick={async () => await kmeansFunction(csv, columnNames)}>Click</Button>\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n}\r\n\r\nexport default Kmeans;","import React, { useState, useCallback } from 'react';\r\nimport { \r\n  HashRouter as Router, \r\n  Route, \r\n  Redirect, \r\n  Switch \r\n} from 'react-router-dom';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\nimport customTheme from './components/theme/theme.json';\r\nimport { createMuiTheme } from '@material-ui/core/styles';\r\nimport { csvContext } from './components/context/csv-context';\r\nimport Header from './components/utils/Header';\r\nimport Dashboard from './components/utils/Dashboard';\r\nimport Overview from './components/utils/Overview';\r\nimport LinearRegression from './components/ml/LinearRegression';\r\nimport DecisionTree from './components/decisiontree/DecisionTree';\r\nimport HierarchicalClustering from './components/clustering/HC/HierarchicalClustering';\r\nimport Kmeans from './components/clustering/kmeans/Kmeans';\r\n\r\n\r\nconst theme = createMuiTheme(customTheme);\r\n\r\nconst App = () => {\r\n  const [csv, setCsv] = useState();\r\n\r\n  const fetchCsv = useCallback((csv) => {\r\n    setCsv(csv);\r\n  }, []);\r\n\r\n  let routes = (\r\n      <Switch>\r\n        <Route path=\"/\" exact>\r\n            <Dashboard />\r\n        </Route>\r\n        <Route path=\"/overview\" exact>\r\n            <Overview />\r\n        </Route>\r\n        <Route path=\"/linreg\" exact>\r\n          <LinearRegression/>\r\n        </Route>\r\n        <Route path=\"/decision-tree\" exact>\r\n          <DecisionTree />\r\n        </Route>\r\n        <Route path=\"/hcluster\" exact>\r\n          <HierarchicalClustering />\r\n        </Route>\r\n        <Route path=\"/kmeans\" exact>\r\n          <Kmeans />\r\n        </Route>\r\n        <Redirect to=\"/\" />\r\n      </Switch>\r\n    )\r\n\r\n  return (\r\n      <ThemeProvider theme={theme}>\r\n        <csvContext.Provider\r\n          value={{\r\n            csv: csv,\r\n            fetchCsv: fetchCsv\r\n          }}\r\n        >\r\n          <Router>\r\n            <Header>\r\n              {routes}\r\n            </Header>\r\n          </Router>\r\n        </csvContext.Provider>\r\n      </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n"],"sourceRoot":""}